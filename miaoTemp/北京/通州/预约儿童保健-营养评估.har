{"log":{"pages":[], "comment":"exported @ 2023/4/21 23:26:17", "entries":[{"time":245, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53074;EgressPort:54056", "request":{"headersSize":1236, "postData":{"text":"[{\"eventId\":\"weixin_wx45b57abae69e92e6_eh.wx.health.doctor.AppointApply_checkApplyConditions_ck\",\"eventName\":\"WECHAT_EMPTY_TITLE_\u9884\u7ea6\u63d0\u4ea4\u7533\u8bf7\u4fe1\u606f\",\"time\":\"2023-04-21 23:25:04\",\"params\":\"\",\"location\":\"\",\"userId\":\"\",\"startTime\":\"2023-04-21 23:23:15\"}]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"257"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"jOXKFKjVWsmhtTtAqoqI9+3gdtGsDq6wDOYJxGKTOZo="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090704473126"}, {"name":"X-Ca-Timestamp", "value":"1682090704473"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"saveBuriedPoint"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"DjDWUoH4SFDYuh/iYq0LDw=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"bus.buriedPointService"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":257, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":90, "receive":0, "wait":60, "dns":51, "send":0, "connect":134}, "response":{"headersSize":360, "bodySize":32, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":-20, "text":"{\"code\":200}", "size":12, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:04 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"32"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"5"}, {"name":"X-Orange-Proxy-Latency", "value":"0"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:04.1328296+08:00", "cache":{}}, {"time":287, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53050;EgressPort:54055", "request":{"headersSize":1257, "postData":{"text":"[1000668,\"2023-04-25 00:00:00\"]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"31"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"wBUOjqDNzucPs2HvxxWtWZiGbf+AtGEIG9aQJX67o48="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090704474127"}, {"name":"X-Ca-Timestamp", "value":"1682090704474"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"forbiddenSecondDayAppointByTime"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"Q2zbh4jVR66lIEmCu+hiWQ=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"appoint.appointConfigService"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":31, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":109, "receive":0, "wait":84, "dns":50, "send":0, "connect":153}, "response":{"headersSize":360, "bodySize":62, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":-10, "text":"{\"code\":200,\"body\":{\"code\":200,\"failOrError\":false}}", "size":52, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:04 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"62"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"6"}, {"name":"X-Orange-Proxy-Latency", "value":"0"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:04.1338294+08:00", "cache":{}}, {"time":95, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53050;EgressPort:54055", "request":{"headersSize":1250, "postData":{"text":"[\"2c908223877b51a301879464282e5538\",\"2c90823f877b4d0d01879433435c4fdb\",16807,0,1000668]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"87"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"hFOHWqT8vJKWBSLNB71jEhJTKFAI3lThJftTWnFDvzQ="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090704768128"}, {"name":"X-Ca-Timestamp", "value":"1682090704768"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"canPatientRequestAppointWithOrganId"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"b54xsUVLzVqX7sAIrIzH9Q=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"eh.appointService"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":87, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":0, "receive":0, "wait":94, "dns":0, "send":1, "connect":0}, "response":{"headersSize":361, "bodySize":44, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":-20, "text":"{\"code\":200,\"body\":true}", "size":24, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:04 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"44"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"38"}, {"name":"X-Orange-Proxy-Latency", "value":"1"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:04.4265396+08:00", "cache":{}}, {"time":96, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53050;EgressPort:54055", "request":{"headersSize":1259, "postData":{"text":"[{\"mpiid\":\"2c908223877b51a301879464282e5538\",\"patientName\":\"\u51af\u95fb\",\"organAppointId\":\"\",\"scheduleId\":36410158,\"scheduleTimeId\":\"25\",\"orderNumSopt\":\"14:50\",\"organId\":1000668,\"appointDepartId\":\"3127\",\"appointDepartName\":\"\u8425\u517b\u8bc4\u4f30\u6307\u5bfc\",\"doctorId\":16807,\"workDate\":\"2023-04-25 00:00:00\",\"workType\":25,\"startTime\":\"2023-04-25 14:30:00\",\"endTime\":\"2023-04-25 15:00:00\",\"orderNum\":1013,\"appointRoad\":5,\"appointStatus\":0,\"appointPath\":9,\"appointUser\":\"2c90823f877b4d0d01879433435c4fdb\",\"appointName\":\"\u5468\u73ca\",\"appointOragn\":\"\",\"clinicPrice\":60,\"transferId\":0,\"sourceLevel\":1,\"clinicId\":\"\",\"ifCreateFollowPlan\":1,\"cardId\":\"\",\"triggerId\":null,\"appointRecordExt\":{\"illSummaryTxt\":\"\",\"thirdChannel\":null},\"analyzeNvcData\":\"\",\"ruleString\":\"\",\"isRealTime\":0,\"cardType\":\"\"},0]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"767"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"kc2OXw/wHV3zMdR5a93lWg+M0UZv263ucyOGZG/iWzo="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090704866129"}, {"name":"X-Ca-Timestamp", "value":"1682090704866"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"validateCheckBeforeAppointNoVcode"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"2D+0tDhxNaMoKqtyHOe0MQ=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"appoint.checkAppointService"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":767, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":0, "receive":0, "wait":96, "dns":0, "send":0, "connect":0}, "response":{"headersSize":362, "bodySize":148, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":-1, "text":"{\"code\":200,\"body\":{\"patientName\":\"\u51af\u95fb\",\"isNeedVcode\":false,\"mpiId\":\"2c908223877b51a301879464282e5538\",\"isSignService\":false,\"organId\":1000668}}", "size":147, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:04 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"148"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"41"}, {"name":"X-Orange-Proxy-Latency", "value":"0"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:04.5256190+08:00", "cache":{}}, {"time":333, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53050;EgressPort:54055", "request":{"headersSize":1250, "postData":{"text":"[{\"mpiid\":\"2c908223877b51a301879464282e5538\",\"patientName\":\"\u51af\u95fb\",\"organAppointId\":\"\",\"scheduleId\":36410158,\"scheduleTimeId\":\"25\",\"orderNumSopt\":\"14:50\",\"organId\":1000668,\"appointDepartId\":\"3127\",\"appointDepartName\":\"\u8425\u517b\u8bc4\u4f30\u6307\u5bfc\",\"doctorId\":16807,\"workDate\":\"2023-04-25 00:00:00\",\"workType\":25,\"startTime\":\"2023-04-25 14:30:00\",\"endTime\":\"2023-04-25 15:00:00\",\"orderNum\":1013,\"appointRoad\":5,\"appointStatus\":0,\"appointPath\":9,\"appointUser\":\"2c90823f877b4d0d01879433435c4fdb\",\"appointName\":\"\u5468\u73ca\",\"appointOragn\":\"\",\"clinicPrice\":60,\"transferId\":0,\"sourceLevel\":1,\"clinicId\":\"\",\"ifCreateFollowPlan\":1,\"cardId\":\"\",\"triggerId\":null,\"appointRecordExt\":{\"illSummaryTxt\":\"\",\"thirdChannel\":null},\"analyzeNvcData\":\"\",\"ruleString\":\"\",\"isRealTime\":0,\"cardType\":\"\"}]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"765"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"lQU34+WIGz+LeMla7vpynvvGrMcLARwfxBpug6n+Ow0="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090704968130"}, {"name":"X-Ca-Timestamp", "value":"1682090704968"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"addAppointRecord"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"rBd1zUD3XtSKJ4n2lzLKkQ=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"appoint.requestAppointRecordService"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":765, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":0, "receive":1, "wait":332, "dns":0, "send":0, "connect":0}, "response":{"headersSize":362, "bodySize":49, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":-20, "text":"{\"code\":200,\"body\":163286177}", "size":29, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:05 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"49"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"275"}, {"name":"X-Orange-Proxy-Latency", "value":"0"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:04.6279427+08:00", "cache":{}}, {"time":59, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53050;EgressPort:54055", "request":{"headersSize":1240, "postData":{"text":"[[{\"time\":\"2023-04-21 23:25:04\",\"organId\":\"wx45b57abae69e92e6\",\"appVersion\":2.9,\"deviceId\":\"21\",\"deviceType\":\"WINDOWS\",\"serviceModule\":\"\u9884\u7ea6\u6302\u53f7\u7533\u8bf7\u9875\",\"deviceNet\":\"wifi\",\"route\":\"weixin_eh.wx.health.portal.Portal_null_sw|weixin_eh.wx.health.doctFinder.Reservation_null_sw|weixin_eh.wx.health.doctFinder.DateSelectDoct_null_sw|weixin_eh.wx.health.select.SelectAppointAddr_null_sw|weixin_eh.wx.health.doctor.AppointApply_null_sw|\",\"eventId\":\"weixin_appointapply_checkapplyconditions_ck\",\"eventName\":\"\u7533\u8bf7\u9875-\u70b9\u51fb\u63d0\u4ea4\u6309\u94ae\",\"url\":\"eh.wx.health.doctor.AppointApply\",\"urlTitle\":\"WECHAT_EMPTY_TITLE\",\"location\":\"\",\"userId\":\"\",\"startTime\":\"2023-04-21 23:23:15\"}]]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"671"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"JInOQmfjtqL2cbz3FUJa9raOfz34oss+2XgjJwj8nSk="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090706272131"}, {"name":"X-Ca-Timestamp", "value":"1682090706272"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"saveBuriedPointList"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"+VEMhlBToLl9QvpPLmUm7A=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"bus.buriedPointService"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":671, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":0, "receive":0, "wait":59, "dns":0, "send":0, "connect":0}, "response":{"headersSize":360, "bodySize":32, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":-20, "text":"{\"code\":200}", "size":12, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:06 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"32"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"4"}, {"name":"X-Orange-Proxy-Latency", "value":"0"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:05.9317658+08:00", "cache":{}}, {"time":34, "serverIPAddress":"59.109.99.216", "connection":"ClientPort:53054;EgressPort:54057", "request":{"headersSize":705, "postData":{"text":"", "mimeType":""}, "queryString":[], "headers":[{"name":"Host", "value":"weixinnode.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"Accept", "value":"*/*"}, {"name":"Sec-Fetch-Site", "value":"same-site"}, {"name":"Sec-Fetch-Mode", "value":"no-cors"}, {"name":"Sec-Fetch-Dest", "value":"script"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":0, "url":"https://weixinnode.ngarihealth.com/weixin/eh/wx/health/person/UserAppointDetail-82ac2962.js", "cookies":[], "method":"GET", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":0, "receive":5, "wait":29, "dns":0, "send":0, "connect":0}, "response":{"headersSize":632, "bodySize":19767, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":54416, "text":"$class(\"eh.wx.health.person.UserAppointDetail\",{extend:\"eh.wx.base.BaseContainer\",mixins:[\"eh.wx.health.hospitalization.MaintenanceTimeControl\",\"eh.wx.base.PayWeb\",\"eh.wx.base.ThirdLink\",\"eh.wx.health.doctFinder.appointConsult\"],deps:[\"lib.code\",\"lib.qrcode\",\"eh.wx.health.person.BindAndFile\",\"eh.wx.health.person.accountSelect\",\"eh.wx.util.directive.BackHomeDrag\"],hts:true,title:\"\u6211\u7684\u9884\u7ea6\u5355\",css:[\"eh.wx.health.person.css.user\",\"eh.wx.wap.person.css.barcode\"],hook:[\"showDoctIndexPop\",\"showBackHomeBtn\"],isSignOnPay:!1,sourceLevelToPay:!1,barcodeNoneCardType:!1,showPayTip:!1,shanghaiSixCss:!1,isZJFC:!1,template:'<div style=\"text-align:center;background:#fff;\">'+'<div><img src=\"'+$env.resourcesHome+'eh/wx/health/portal/images/load.gif\"/></div>'+'<div id=\"progress\"> <div id=\"bar\"></div> </div>'+'<div id=\"settleTitle\">\u8df3\u8f6c\u4e2d,\u8bf7\u8010\u5fc3\u7b49\u5f85....</div>'+\"</div>\",config:{organ_1001309:{isSignOnPay:!0},organ_1000899:{cardTips:!0,shSixHospital:!0,shanghaiSixCss:!0,showCardTypeTip:!0},organ_1004140:{cardTips:!0,shSixHospital:!0,shanghaiSixCss:!0,showCardTypeTip:!0},organ_1001994:{isSignOnPay:!0,sourceLevelToPay:!0},organ_1005137:{barcodeNoneCardType:!0},organ_1000872:{noShowCancelBtn:!0,showPayTip:!0},organ_1005826:{showNumTime:!0},organ_1000073:{isZJFC:!0},organ_1003040:{showFailUI:!0,isSHSZ:!0},organ_1001281:{showFailUI:!0,jinJiangUi:!0},organ_1005002:{isHSFive:!0},organ_1007357:{isBJYQ:!0},organ_1007421:{isZiGongFourthHsp:!0},organ_1000427:{showCardTypeTip:!0},organ_1001384:{isHSRMHsp:!0},organ_1008506:{isBeijingHsp:!0},organ_1008113:{isHRFY:!0}},enableDoLog:true,themeName:\"appoint.appointDetailTheme\",doLogConfig:{url:\"userappointdetail\",eventName:\"\u8be6\u60c5\u9875\",serviceModule:\"\u9884\u7ea6\u6302\u53f7\u8be6\u60c5\",eventTypes:[\"sw\",\"st\"]},afterInitComponent:function(){var me=this,el=me.el;me.popovers={};me.modules={};me.weiningBack=!1;this.initController(function($scope,$timeout,$filter,$ionicModal){$scope.shanghaiSixCss=me.shanghaiSixCss;$scope.isHRFY=me.isHRFY;$scope.isOldPersonModel=$env.isOldPersonModel&&$env.isOldPersonModel()||false;$scope.showNumTime=me.showNumTime;$scope.sourceLevelToPay=me.sourceLevelToPay;$scope.customerTel=$AppContext.WXApp.customerTelForShow;$scope.showCardTypeTip=me.showCardTypeTip;$scope.isBeijingHsp=me.isBeijingHsp;$scope.cancelStatus=false;$scope.onlyRefundBtn=!1;$scope.photo=\"\";$scope.myActiveSlide=0;$scope.goBackHomeFlag=false;$scope.isShowAllText=false;$scope.tip=!0;me.timeout=$timeout;me.filter=$filter;$scope.appointStatusObj={};$scope.rotateFlag=[!1,!1,!1];$scope.menuShowFlag=!1;$scope.isPayBtnShow=!0;$scope.judgePayBtnShow=!1;$scope.showMoveTips=!1;$scope.count=0;$scope.titleDescLines=4;$scope.restMinute=\"0\";$scope.restSecond=\"0\";$scope.restTime=1;$scope.payTime=0;$scope.hasBtnWrapChild=false;$scope.payAhead=-2;$scope.showPayRestTime=!1;$scope.zeroRegStatus=false;$scope.showMedInsureEntry=$AppContext.WXApp.organId==\"1005790\";$scope.shSixHospital=me.shSixHospital;$scope.clickAlreadyPay=!0;$scope.sourcePage=\"\";$scope.isGoPaymentRecord=!0;$scope.isRefreshDetail=!0;$scope.banner=!1;$scope.isWeixin=$env.isWeixin;$scope.isShowQrcode=!1;$scope.isZJFC=me.isZJFC;$scope.isHSFive=me.isHSFive;$scope.isSHSZ=me.isSHSZ;$scope.jinJiangUi=me.jinJiangUi;$scope.isZiGongFourthHsp=me.isZiGongFourthHsp;$scope.isDeY=$env.appkey==\"jkdy\"&&$env.hybrid||$AppContext&&$AppContext.wxConfig&&$AppContext.wxConfig.appId==\"wx9a3ac965fb75b2fe\"||$env.appkey==\"tfyjt-jkdy\"||$env.appkey==\"smt-test\";$scope.isFontRed=!1;$env.hybrid&&$env.appkey==\"zzrmyy\"&&$env.callNativeMethod(\"api_showGoHomeBtn\");$scope.TongueTextArr={1:\"\u53bb\u820c\u8bca\u68c0\u67e5\",2:\"\u67e5\u770b\u820c\u8bca\u62a5\u544a\"},$scope.isBJYQ=me.isBJYQ;if($AppContext.allClientConfigs.healthCardBuilderSource==3||$AppContext.allClientConfigs.healthCardBuilderSource==4){console.log($AppContext.allClientConfigs.healthCardBuilderSource,\"$AppContext.allClientConfigs.healthCardBuilderSource\");$scope.canClickToThirdMedical=true}$scope.switchSelect=function(){if($scope.listInfoType==\"specialAppoint\"){return}me.doSwitch()};me.resetScroll=function(){$sys.getScroll(\"myAppointintScroll\").resize()};$scope.showBarcodeInfo=function(isMzId){if($scope.isOldPersonModel)return;isMzId?me.goBarcodeInfoPage(isMzId,$scope.item.appointRecord.clinicMzId):me.showBarcodeInfo(isMzId)};$scope.showElecHealthCardInfo=function(){if($scope.isOldPersonModel)return;me.showElecHealthCardInfo()};$scope.showAllTitleDesc=function(){me.showAllTitleDesc()};$scope.refreshDetail=function(){me.refreshDetailData()};$scope.signIn=function(){me.signIn()};$scope.cancelApply=function(item){if(item.appointRecord.appointStatus==5&&item.appointRecord.outTradeNo){me.getOrganConfigInfo(el.scope().item.appointRecord.organId).then(function(res){me.isMaintenanceControl(res,\"goSystemSuggest\")}).fail(function(e){$sys.showFail(e)})}else{!$scope.zeroRegStatus&&me.goSystemSuggest()}};$scope.reApply=function(){me.reAppointApply()};$scope.payNow=function(){if(!$scope.zeroRegStatus&&$scope.clickAlreadyPay){$sys.showLoading();$scope.clickAlreadyPay=!1;me.payOrderNow()}};$scope.closeTip=function(){me.refresh(function($scope){$scope.showCancelScrollTip=false});clearInterval($scope.scrollTipTimer)};$scope.goDoctorIndex=function(id){$sys.openModule({title:\"\u533b\u751f\u4e3b\u9875\",cache:me.popovers,manualLoading:!0,url:\"eh.wx.health.doctor.SingleDoctIndex\"}).then(function(p){p.module.getDoctInfo(id,\"user\")})};$scope.switchRotate=function(flag){$scope.rotateFlag[flag]=!$scope.rotateFlag[flag];me.resetScroll()};$scope.onApilyClose=function(){$scope.menuShowFlag=!1;if(!$scope.clickAlreadyPay){$scope.clickAlreadyPay=!0;$scope.$applyAsync()}};$scope.onApilyTypeSelected=function(accountType){me.onApilyTypeSelected(accountType)};$scope.goIndexClick=function(){me._dologMgr.dolog({eventId:\"weixin_userappointdetail_backhome_ck\",eventName:\"\u8be6\u60c5\u9875-\u70b9\u51fb\u8fd4\u56de\u9996\u9875\u6309\u94ae\",eventType:\"ck\"});clearInterval($scope.scrollTipTimer);$emitter.emit(\"indexGoIndex\")};$scope.showQrcode=function(){me.showQrcodeFunc()};$scope.showEInvoice=function(){me.showElecInvoiceFunc()};$scope.showElecInvoiceQrcode=function(){me.showElecInvoiceQrcodeFunc()};$scope.goInsuranceCard=function(){$sys.goLink(\"https://mp.weixin.qq.com/insurance/card/creditview?cityid=310000&from=kEOqu5C0GCrWFSAs96zlnw.%3D&uin=&key=&devicetype=Windows+10+x64&version=6300002f&lang=zh_CN&ascene=0&fontgear=2#wechat_redirect\")};$scope.$watch(\"thirdUrlLink\",function(newValue,oldValue){if(newValue==oldValue){return}me.goThirdUrlMethod(newValue)});$scope.goConsult=function(){$env.setConsultPageId(\"zx_gh_004\");$sys.goLink(el.scope().consultUrl)};$scope.refundApply=function(){me.refundApply()};$scope.queryRefundStatus=function(){me.queryRefundStatus()};$scope.conclusionClose=function(){$scope.msgConclusion.close();$scope.clickAlreadyPay=!0;$scope.$applyAsync()};$scope.showCloneMZ=function(){me.showCloneMZ()};$scope.chooseCoupon=function(){$scope.afterChoosedCoupon=function(couponId){$scope.useModal&&$scope.useModal.remove();me.payNowDetail(couponId)};$create(\"eh.wx.health.payment.CouponUseModal\",{scope:$scope,type:2,subType:$scope.item.appointRecord.appointRecordExt&&$scope.item.appointRecord.appointRecordExt.firstAppointPatient!=null?$scope.item.appointRecord.appointRecordExt.firstAppointPatient?12:13:null,orderAmount:$scope.item.appointRecord.clinicPrice,doctorId:$scope.item.appointRecord.doctorId,departId:$scope.item.department.deptId}).then(function(m){$scope.getUseConpouList().then(function(){$scope.useModal=$ionicModal.fromTemplate(m.html,{scope:$scope});$scope.useModal.show();setTimeout(function(){$scope.clickAlreadyPay=!0},10)}).fail(function(){$scope.useModal=$ionicModal.fromTemplate(m.html,{scope:$scope});$scope.useModal.show();setTimeout(function(){$scope.clickAlreadyPay=!0},10)})})};$scope.clickCombineBtns=function(){me.clickCombineBtns()};$scope.closeCardTip=function(e){e.stopPropagation();e.preventDefault();$scope.item.activationSignText=\"\"};$scope.goParkingReservation=function(){me.goParkingReservation()}});el.on(\"click\",\"#topdocintro\",function(){me.showDoctIndexPop()});el.on(\"click\",\"#J-goBackHome\",function(){var scope=el.scope();clearInterval(scope.scrollTipTimer);$emitter.emit(\"indexGoIndex\")});el.on(\"click\",\"#J-userCdrOtherdocs li\",function(){var index=this.dataset.index;me.previewCdrImagePop(index)});el.on(\"click\",\".appointdetaildesc .allTextBtn\",function(){me.showAllText();me.resetScroll()});el.on(\"click\",\"#Preconsultation\",function(){me.goPreconsultation()});el.on(\"click\",\".tongueButton\",function(e){e.preventDefault();window.event?window.event.cancelBubble=true:e.stopPropagation();setTimeout(function(){me.goTongueConsult()},500)});me.setupService([{beanName:\"eh.unLoginSevice\",method:\"getAllClientConfigs\"},{beanName:\"appoint.appointConfigService\",method:[\"getOrganConfig\",\"getNavigationGuideNotice\"]},{beanName:\"eh.organ\",method:\"getByOrganId\"},{beanName:\"eh.healthCard\",method:\"queryHealthCardFromHisAndMerge\"},{beanName:\"appoint.queryAppointRecordService\",method:\"getOrganPayTimeSetting\"},{beanName:\"appoint.queryAppointRecordController\",method:\"getPatAppointRecordByIdWithStar\"},{beanName:\"ts.transfer\",method:\"getPatTransferById\"},{beanName:\"eh.serviceConfig\",method:\"canAppointAndCanFile\"},{beanName:\"eh.healthCard\",method:\"bindCard\"},{beanName:\"appoint.settleService\",method:[\"simpleSettleWithoutInterrupt\",\"settlePreBillForBusNew\"]},{beanName:\"appoint.requestAppointRecordService\",method:\"getDoctorDeptInfo\"},{beanName:\"basic.patientService\",method:\"getPatientInfoDS\"},{beanName:\"eh.configurationCenterUtils\",method:\"findConfigurations\"},{beanName:\"appoint.appointUnLoginService\",method:\"getAppointOrganConfig\"},{beanName:\"appoint.preConsultService\",method:\"preConsultURL\"},{beanName:\"appoint.askQuestionConfigService\",method:[\"getQuestionUrls\",\"getAssessUrl\"]},{beanName:\"appoint.settleService\",method:\"fastZeroPay\"},{beanName:\"mi.authExtraService\",method:\"getSignNoAndSaveData\"},{beanName:\"appoint.queryAppointRecordService\",method:\"getShanghai6NCovUrl\"},{beanName:\"appoint.queryAppointRecordController\",method:[\"applyAppointRecordRefund\",\"queryAppointRefundStatus\"]},{beanName:\"treatmentguide.electronicBillController\",method:\"getBillByBusOrderNo\"},{beanName:\"infra.cardOperationService\",method:\"cardEncryption\"},{beanName:\"infra.antForestService\",method:\"getAntForestEnergyValueInfo\"},{beanName:\"hs.assessService\",method:\"findApointHistoryByAssessIdAndMpiId\"},{beanName:\"easypay.medPaymentService\",method:\"refundAuth\"},{beanName:\"appoint.signInRequestService\",method:\"signInRequestToHis\"},{beanName:\"wx.aliAuthCodeService\",method:\"authAliAccessToken\"}])},showLocation:function(){var me=this,el=me.el,scope=el.scope(),info,record=scope.item.appointRecord;if($env.isWeixin&&record&&record.confirmClinicAddr&&~[0,1,5].indexOf(record.appointStatus)){me.service.getNavigationGuideNotice(record.appointRecordId).then(function(res){if(res&&res.ghAppId&&~res.busType.indexOf(\"appoint\")){me.refresh(function($scope){$scope.showAddrLocationFlag=true});info={appid:res.ghAppId,url:res.path};me.showLocationLaunch(info)}else{scope.showAddrLocationFlag=false;scope.$applyAsync()}}).fail(function(e){scope.showAddrLocationFlag=false;scope.$applyAsync();$sys.hideLoading();$sys.showFail(e)})}else{scope.showAddrLocationFlag=false;scope.$applyAsync()}},showLocationLaunch:function(info){var me=this,scope=me.el.scope(),i,btns,script,html,bgColor=scope.shanghaiSixCss?\"#F6FBFA\":\"#F7F9FC\",txtColor=scope.shanghaiSixCss?\"#01B282\":\"#4289FF\",txtSize=scope.isOldPersonModel?\"19px\":\"13px\",iconPath=$env.resourcesHome+\"eh/wx/health/\"+(scope.shanghaiSixCss?\"themes/theme1/appoint\":\"person\")+\"/images/icon_location.png\",iconOrBtnSize=scope.isOldPersonModel?\"19px\":\"15px\";btns=document.getElementsByClassName(\"appointAddrLocation\");script=document.createElement(\"script\");script.type=\"text/wxtag-template\";script.text=\"<button style='border: none;outline: none;background-color: \"+bgColor+\";display: -webkit-box;display: -webkit-flex;display: flex;-webkit-box-align: center;-webkit-align-items: center;align-items: center;white-space: nowrap;margin-left: 12px;color: \"+txtColor+\";line-height: 19px;font-size: \"+txtSize+\";'>\"+\"<div style='display: inline-block;width: \"+iconOrBtnSize+\";height: \"+iconOrBtnSize+\";margin-right: 6px;'><img style='width: \"+iconOrBtnSize+\";height: \"+iconOrBtnSize+\";' src='\"+iconPath+\"'></div>\u5bfc\u822a</button>\";html='<wx-open-launch-weapp id=\"'+\"location-\"+info.appid+'-launch-btn\" class=\"weaAppStyle\" style=\"display: inline-block;\" username=\"'+info.appid+'\" path=\"'+info.url+'\">'+script.outerHTML+\"</wx-open-launch-weapp>\";for(i=0;i<btns.length;i++){btns[i].innerHTML=html}},payOrderNow:function(){var me=this,el=me.el,scope=el.scope();if(scope.args&&!scope.args.paySource&&scope.args.insuranceCardUpgrade&&scope.item&&scope.item.appointRecord&&scope.item.appointRecord.cancelResean){$sys.showMsg(\"\u56e0\u533b\u4fdd\u5361\u5347\u7ea7\uff0c\u8bf7\u5728\u5019\u8bca\u5f00\u59cb\u65f6\u95f4\u524d\uff0c\u524d\u5f80\u533b\u9662\u7a97\u53e3\u652f\u4ed8\u6302\u53f7\u8d39\uff0c\u7ed9\u60a8\u5e26\u6765\u4e0d\u4fbf\u656c\u8bf7\u8c05\u89e3!\",2e3,\"toast-auto\");$sys.hideLoading();scope.clickAlreadyPay=!0;scope.$applyAsync();return}if(scope.item.appointRecord&&scope.item.appointRecord.appointSourceId==-1){if(scope.appointOfflinePayOnline&&scope.OfflineAppointPayCancel&&scope.payTime>0&&scope.payAhead!=-2&&scope.restTime<=0){$sys.showMsg({template:\"\u5012\u8ba1\u65f6\u7ed3\u675f\uff0c\u6682\u4e0d\u80fd\u652f\u4ed8\",cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\",onTap:function(){me.getSourceAppointDetail(scope.appointId)}}]});scope.clickAlreadyPay=!0;scope.$applyAsync();$sys.hideLoading();return}}else if(scope.payTime>0&&scope.payAhead!=-2&&scope.restTime<=0){$sys.showMsg({template:\"\u5012\u8ba1\u65f6\u7ed3\u675f\uff0c\u6682\u4e0d\u80fd\u652f\u4ed8\",cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\",onTap:function(){me.getSourceAppointDetail(scope.appointId)}}]});scope.clickAlreadyPay=!0;scope.$applyAsync();$sys.hideLoading();return}$sys.showLoading();me.service.getOrganConfig(scope.item.appointRecord.organId).then(function(res){me.isMaintenanceControl(res,\"insuranceCardOrSelfPay\")}).fail(function(e){scope.clickAlreadyPay=!0;scope.$applyAsync();$sys.hideLoading();$sys.showFail(e)})},showAllText:function(){var me=this,el=me.el,scope=el.scope();me.refresh(function($scope){$scope.patientLeaveMsg=scope.item.transfer.patientCondition;$scope.isShowAllText=false})},resetCdrImgStyle:function(){var me=this,el=me.el,scope=el.scope(),lis=el.find(\"#J-userCdrOtherdocs img\"),liW;liW=Math.ceil(document.body.clientWidth/4-20);lis.css(\"height\",liW+\"px\");function getByteLen(val,lineNum,rowWidth){var len=0;for(var i=0;i<val.length;i++){if(len<rowWidth*lineNum){var cur=val.charAt(i);if(/[^\\x00-\\xff]/gi.test(cur)){len+=1}else{len+=.5}}else{return i}}}var winWidth=document.body.clientWidth-30,rowWidth=Math.floor(winWidth/15),maxLength=Math.ceil(getByteLen(scope.item.transfer.patientCondition,4,rowWidth)),realLength=scope.item.transfer.patientCondition.length;if(realLength>maxLength){me.refresh(function($scope){$scope.patientLeaveMsg=scope.item.transfer.patientCondition.substring(0,maxLength-5)+\"...\";$scope.isShowAllText=true})}else{me.refresh(function($scope){$scope.patientLeaveMsg=scope.item.transfer.patientCondition;$scope.isShowAllText=false})}},doSwitch:function(){var me=this,el=me.el,scope=el.scope(),switchFlag=!scope.switchFlag;scope.switchFlag=switchFlag;me.resetScroll()},getAppointDetailInfo:function(type,appointId,rType,source,autoPay,noRefresh){var me=this,el=me.el,scope=el.scope(),timer;$sys.hideLoading();scope.appointId=appointId;scope.rType=rType;scope.source=source;scope.sourcePage=source;scope.listInfoType=type;scope.autoPayFlag=autoPay;scope.noRefresh=noRefresh;scope.barcodeId=\"\";scope.tip=!0;scope.menuShowFlag=!1;scope.preBill=undefined;scope.count=0;scope.banner=!1;$sys.getScroll(\"myAppointintScroll\").scrollTop();scope.isPayBtnShow=!($env.getCookie(\"appkey\")==\"aliAppointDetail\"||$env.appkey==\"jins_jiankt\"||me.isHSRMHsp&&$env.isWeixin);if(type==\"sourceAppoint\"){me.getSourceAppointDetail(appointId)}else if(type==\"specialAppoint\"){me.getSpecialAppointDetail(appointId)}me.resetScroll()},showPreTip:function(){var me=this,scope=me.el.scope(),appointRecord=scope.item.appointRecord,status=appointRecord.appointStatus;if(!(scope.showPreconsultbtn&&scope.isZiGongFourthHsp&&!scope.hidePreConsultMsg&&(scope.source==\"pay\"||scope.paySuccessCallbackFlag)&&(status==1&&appointRecord.payFlag||status==5&&appointRecord.outTradeNo)))return;scope.hidePreConsultMsg=true;scope.$applyAsync();$sys.showMsg({template:\"\u4e3a\u4e86\u5feb\u901f\u4e86\u89e3\u60a8\u7684\u75c5\u60c5\uff0c\u8bf7\u5b8c\u6210\u9884\u95ee\u8bca\",cssClass:\"default\",buttons:[{text:\"\u53d6\u6d88\",type:\"button-default\"},{text:\"\u786e\u8ba4\",type:\"button-positive\",onTap:function(){me.goPreconsultation()}}]})},previewCdrImagePop:function(index){var me=this,el=me.el,scope=el.scope(),cdrDocArr=scope.item.cdrOtherdocs||scope.item.illSummaryBeforeAppoint;if(!cdrDocArr.length){return false}$sys.openModule({title:\"\u67e5\u770b\u5927\u56fe\",cache:me.popovers,url:\"eh.wx.health.person.ViewBigImage\",events:{close:{autoclose:!0}}}).then(function(p){p.module.setCdrImageArray(index,cdrDocArr)})},getSourceAppointDetail:function(appointId,showEva,refresh){var me=this,el=me.el,scope=el.scope(),liW=Math.ceil(document.body.clientWidth/4-20),zeroRegStatus,showQrcodeStatus;clearInterval(scope.scrollTipTimer);clearInterval(scope.appointTimer);scope.isPayBtnShow=!($env.getCookie(\"appkey\")==\"aliAppointDetail\"||$env.appkey==\"jins_jiankt\"||me.isHSRMHsp&&$env.isWeixin);scope.showMoveTips=!$env.hybrid&&!$env.getCookie(\"appkey\")&&!$env.isAlipay&&$env.isWeixin;scope.preBill=undefined;scope.judgePayBtnShow=!1;me.service.getPatAppointRecordByIdWithStar(appointId).then(function(detail){zeroRegStatus=detail.appointRecord.appointRecordExt&&(detail.appointRecord.appointRecordExt.zeroRegStatus==0||detail.appointRecord.appointRecordExt.zeroRegStatus==4);showQrcodeStatus=detail.appointRecord&&(detail.appointRecord.appointStatus==1||detail.appointRecord.appointStatus==5||detail.appointRecord.appointStatus==6||detail.appointRecord.appointStatus==7||detail.appointRecord.appointStatus==8||detail.appointRecord.appointStatus==10||detail.appointRecord.appointStatus==12||detail.appointRecord.appointStatus==14);me.refresh(function($scope){$scope.clickAlreadyPay=!0;var record=detail.appointRecord,extInfo=record.appointRecordExt;$scope.listInfoType=\"sourceAppoint\";$scope.liW=liW;$scope.noShowCancelBtn=me.noShowCancelBtn;$scope.rotateFlag=[!1,!1,!1];detail.displayIllSummaryBeforeAppoint&&(extInfo||(record.appointRecordExt=extInfo={illSummaryTxt:\"\"}));$scope.detailFalg=0;$scope.cloudQrCode=detail.intellijCloudAppointQrCode;$scope.item=detail;$scope.item.appointRecord.appointDepartName=$scope.item.appointRecord.appointDepartName&&$scope.item.appointRecord.appointDepartName.replace(/<[^>]*>|<\\/[^>]*>/gm,\"\").trim();$scope.photo=$scope.getAva(detail.doctor);$scope.appointId=appointId;$scope.payBtnText=me.isSignOnPay?\"\u7b7e\u5230\u652f\u4ed8\":!$scope.shSixHospital?\"\u7acb\u5373\u652f\u4ed8\":detail.appointRecord&&detail.appointRecord.medInsureCarId?\"\u533b\u4fdd\u652f\u4ed8\":\"\u81ea\u8d39\u652f\u4ed8\";refresh&&$scope.$broadcast(\"scroll.refreshComplete\");if(!scope.refreshDetailFlag){document.title=record.recordType&&record.recordType!=2?\"\u6211\u7684\u6302\u53f7\u5355\":\"\u6211\u7684\u9884\u7ea6\u5355\";$env.isIOS&&$sys.iosTitleReset();scope.refreshDetailFlag=false}$scope.invoiceUrl=extInfo.invoiceUrl||\"\";$scope.invoiceCode=extInfo.invoiceCode||\"\";$scope.hasBtnWrapChild=false;$scope.showPayRestTime=!1;$scope.titleDescFold=undefined;$scope.titleDescLines=4;$scope.zeroRegStatus=zeroRegStatus;$scope.refundApplyNo=detail.appointRecord&&detail.appointRecord.appointRecordExt&&detail.appointRecord.appointRecordExt.refundApplyNo||\"\";$scope.showRefundBtn=detail.refundBtn;$scope.cancelStatus=detail.cancelBtn;$scope.onlyRefundBtn=detail.onlyRefundBtn;$scope.appointFailShow=detail.appointRecord.appointStatus==2&&detail.appointRecord.cancelType==4&&me.showFailUI?!0:!1;$scope.canShowTongueConsultBtn=detail.canShowTongueConsultBtn;$scope.tongueConsultUrl=detail.canShowTongueConsultBtn&&detail.tongueConsultUrl;$scope.showPreconsultbtn=detail.preConsultBtn});$sys.hideLoading();var record=scope.item.appointRecord?scope.item.appointRecord:scope.item;console.log(scope.canClickToThirdMedical,\"scope.canClickToThirdMedical\");console.log(record,\"record\");if(scope.canClickToThirdMedical&&record.medInsureCarId){el.find(\".patient-block\").find(\".weaAppStyle\").remove();scope.insertWXlabelTimer=setInterval(function(){if(!el.find(\".patient-block\").find(\".weaAppStyle\").length){me.insertWXlabel(el,\".wx-label-wrap\")}else{clearInterval(scope.insertWXlabelTimer)}},50)}(scope.sourcePage==\"appointApply\"||scope.sourcePage==\"pay\")&&scope.isRefreshDetail&&(detail.appointRecord.appointStatus==9||detail.appointRecord.appointStatus==11||zeroRegStatus)?timer=setTimeout(function(){scope.isRefreshDetail=!1;me.refreshDetailData();clearTimeout(timer)},2e3):null;Promise.all([me.initOrganInfo(detail),me.initClientConfigs(),me.getClinicMzIdInstructions()]).then(function(){me.initBarcodeInfo();me.showCoronavirusUpdateTime();me.showLocation();scope.regQrCode=\"\";scope.electronicInvoiceSwitch==\"2\"&&showQrcodeStatus&&me.getQrcode(detail);if(detail.appointRecord&&(detail.appointRecord.appointStatus==2||detail.appointRecord.appointStatus==6)){me.showConsult()}detail.appointRecord.appointRecordExt&&detail.appointRecord.appointRecordExt.appointDetailQrNum&&detail.appointRecord.statusName!=\"doc\"&&me.getClinicMzCode();if(detail.appointRecord.appointStatus==0||detail.appointRecord.appointStatus==4){if(detail.appointRecord.appointSourceId==-1){scope.appointOfflinePayOnline&&scope.OfflineAppointPayCancel&&me.showRestTime()}else{me.showRestTime()}}if(detail.appointRecord.appointStatus==10){me.showStatusWrap()}else{me.canShowPayBtn()}me.getMaYiEngrency();me.showError();me.goPaymentRecord(detail);scope.args&&scope.args.business==\"appoint\"&&me.showSystemSuggestPop();scope.args&&(scope.args.business=\"\")});showEva&&me.showEvaluatePop();me.showDepartInfo(detail);me.showPreTip();$sys.getClientConfigs().then(function(config){config.gotoQuestionUrls[0]==\"ngari_znwz_url\"&&scope.args&&scope.args.uniqueIndex&&($sys.showLoading(),me.payNowValidateDetail())});me.goThirdUrlSixHospital(detail)}).fail(function(e){$sys.hideLoading();$sys.showFail(e)})},getMaYiEngrency:function(){var me=this,scope=me.el.scope(),record=scope.item.appointRecord;console.log(record.recordType,scope.args&&scope.args.sourcePage,\"=== recordType\");console.log(record.appointStatus,scope.sourcePage,\"=== appointStatus\");if(scope.organInfo.GetAntForestEnergy&&($env.isAlipay&&$env.ngariMiniAppForWeb)&&(scope.args&&scope.args.sourcePage==\"appointApply\"&&record.appointStatus==0||record.recordType==1&&scope.sourcePage==\"pay\"&&record.appointStatus==1)){var accessToken=$env.getCookie(\"aliAk\");console.log(accessToken,\"===getMaYiEngrency\");accessToken&&me.service.getAntForestEnergyValueInfo(accessToken,\"horegister\",scope.appointId).then(function(engencyData){scope.total_energy=engencyData.total_energy;console.log(\"\u8f93\u51fascope.total_energy\",scope.total_energy);engencyData.total_energy&&$sys.showMsg({template:'<div class=\"nenglSuccessTip\">\u672c\u6b21\u9884\u7ea6\u6302\u53f7\u5f97\u8682\u8681\u68ee\u6797\u80fd\u91cf<span>{{total_energy}}g</span></div>',scope:scope},!0,\"maYiNengliang\")}).fail(function(e){console.log(e,\"===getAntForestEnergyValueInfo error\");$sys.showFail(e)})}},showConsult:function(){var me=this,scope=me.el.scope(),doctorId=\"\";if(scope.item.doctor){doctorId=!scope.item.doctor.jobNumber||scope.item.doctor.jobNumber&&scope.item.doctor.jobNumber.slice(0,3)!=\"PT_\"?scope.item.doctor.doctorId:\"\"}me.showConsultEntry(scope.organInfo,\"appointcanceldetail\",\"appoint_detail\",doctorId).then(function(consult){me.refresh(function($scope){$scope.banner=consult&&consult.banner;$scope.consultUrl=consult&&consult.url})})},goThirdUrlSixHospital:function(detail){var me=this,scope=me.el.scope();if(detail.appointRecord&&detail.appointRecord.payFlag==1&&detail.appointRecord.appointdepartId==3607&&detail.appointRecord.organId==1000899){me.getThirdUrl(detail.appointRecord.organId).then(function(url){me.refresh(function($scope){$scope.thirdUrlLink=url})})}},goPaymentRecord:function(detail){var me=this,scope=me.el.scope();if(!(scope.sourcePage==\"appointApply\"||scope.sourcePage==\"pay\")){return}if(detail.appointRecord&&detail.appointRecord.appointStatus!=5){return}if((detail.appointRecord.organId==1006601&&detail.appointRecord.appointDepartId==680||scope.jumpToOutPaymentSupportDept&&scope.jumpToOutPaymentSupportDept.indexOf(detail.appointRecord.appointDepartId)>-1)&&scope.isGoPaymentRecord){$sys.openModule({url:\"eh.wx.health.payment.NoPaymentRecord\",cache:me.popovers,title:\"\u7f34\u8d39\"}).then(function(p){scope.isGoPaymentRecord=!1;p.module.doHandle({OrganID:detail.appointRecord.organId,mpiId:detail.appointRecord.mpiid,CardID:detail.appointRecord.cardId||\"\",CardType:detail.appointRecord.cardId?detail.appointRecord.cardType:\"\",CardOrgan:detail.appointRecord.cardId||\"\"})})}},showError:function(){var me=this,scope=me.el.scope(),errorText,detail=scope.item,errorText=\"\u68c0\u6d4b\u5230\u5c31\u8bca\u4eba\u7684\u533b\u4fdd\u5df2\u7ecf\u5347\u7ea7\uff0c\u4e3a\u4e86\u5728\u672c\u5e73\u53f0\u53ef\u4ee5\u4f7f\u7528\u533b\u4fdd\u5361\u529e\u7406\u4e1a\u52a1\uff0c\u6216\u8fdb\u884c\u533b\u4fdd\u7ed3\u7b97\uff0c\u8bf7\u5141\u8bb8\u672c\u6b21\u5347\u7ea7\";scope.seconds=3;if(scope.showErrorMsg&&(detail.appointRecord.cancelResean!=null||scope.organInfo.appointFailText!=null)){if(!!~detail.appointRecord.cancelResean.indexOf(\"M001-medCardError\")){$sys.showMsg({title:\"\u533b\u4fdd\u5347\u7ea7\",template:\"<div>\"+errorText+'<div class=\"tipClass\">\u6ce8:\u8be5\u66f4\u65b0\u4ec5\u5bf9\u5fae\u4fe1\u8d26\u53f7\u5bf9\u5e94\u7684\u5c31\u8bca\u4eba\u6709\u6548\uff0c\u5176\u4ed6\u5c31\u8bca\u4eba\u8bf7\u81f3\u533b\u9662\u7a97\u53e3\u66f4\u65b0</div>'+\"</div>\",cssClass:\"default inpoppa\",buttons:[{text:\"\u70b9\u51fb\u5347\u7ea7\",type:\"button-positive\",onTap:function(){me.doUpdateInsuranceCard()}}]})}else{$sys.showMsg({template:detail.appointRecord.appointStatus==2&&detail.appointRecord.cancelType==4&&scope.organInfo.appointFailText!=null&&!(scope.isSHSZ&&record.cancelResean)?scope.organInfo.appointFailText:detail.appointRecord.cancelResean,cssClass:\"default inpoppa\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\",onTap:function(){me.showSkipRecentRecords()}}]})}}else if(scope.args&&scope.args.insuranceCardUpgrade){$sys.showMsg({title:\"\u533b\u4fdd\u5347\u7ea7\",template:errorText,cssClass:\"default inpopp updateMedInsureMsg\",scope:scope,buttons:[{text:\"\u5347\u7ea7\u5b8c\u6210(\"+scope.seconds+\"S)\",type:\"button-positive\",onTap:function(){me.showSkipRecentRecords();scope.goSkipRecentRecordsFlag=true}}]},4e3);setTimeout(function(){if(!scope.goSkipRecentRecordsFlag){me.showSkipRecentRecords()}},4e3);var timer=setInterval(function(){scope.seconds--;$(\".updateMedInsureMsg button\").text(\"\u5347\u7ea7\u5b8c\u6210(\"+scope.seconds+\"S)\");if(scope.seconds==0){$(\".updateMedInsureMsg button\").text(\"\u5347\u7ea7\u5b8c\u6210\");clearInterval(timer)}},1e3)}else if(scope.args&&scope.args.errMsg){$sys.showMsg({template:scope.args.errMsg,cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\",onTap:function(){me.showSkipRecentRecords()}}]})}else{me.showSkipRecentRecords()}},showSkipRecentRecords:function(){var me=this,scope=me.el.scope(),skipRecentRecords=scope.item.skipRecentRecords||[],skipRecentRecordsText=scope.organInfo.FailSkipRecentRecords,showSkipRecentRecordsFlag=skipRecentRecordsText!=null&&skipRecentRecordsText!=\"\";if(showSkipRecentRecordsFlag&&skipRecentRecords.length){$sys.showMsg({template:skipRecentRecordsText,cssClass:\"default inpopp\",buttons:[{text:\"\u53d6\u6d88\",type:\"button-default\"},{text:\"\u524d\u5f80\",type:\"button-positive\",onTap:function(){$sys.openModule({url:\"eh.wx.health.person.UserAppointDetail\",cache:me.popovers,title:\"\u6211\u7684\u9884\u7ea6\u5355\"}).then(function(p){p.module.getAppointDetailInfo(\"sourceAppoint\",skipRecentRecords[0],1)})}}]})}},getThirdUrl:function(organId){var me=this,defer=new $Defer;me.service.getShanghai6NCovUrl(organId).then(function(url){defer.resolve(url)}).fail(function(e){$sys.showFail(e)});return defer.promise},goThirdUrlMethod:function(url){var me=this,scope=me.el.scope();setTimeout(function(){$sys.goLink(url)},2e3)},doUpdateInsuranceCard:function(){var me=this,scope=me.el.scope(),extraData,paramsWX;$sys.showLoading();extraData={moduleUrl:\"eh.wx.health.person.UserAppointDetail\",appointId:scope.appointId,insuranceCardUpgrade:!0,paySource:0};paramsWX=[scope.item.patient.mpiId||$AppContext.urt&&$AppContext.urt.properties.patient.mpiId,3,scope.item.appointRecord.organId,extraData];me.goThirdLink(\"insuranceCardUpgrade\",paramsWX,extraData)},formThirdCallBack:function(arg){var me=this;arg.extraData.appointId&&me.doHandle({aid:arg.extraData.appointId,insuranceCardUpgrade:arg.extraData.insuranceCardUpgrade})},showStatusWrap:function(){var me=this,h=0,m=0,t,scope=me.scope(),record=scope.item.appointRecord,wxConfig=$AppContext&&$AppContext.wxConfig;scope.appointStatusObj={statusTitle:\"\",statusTitleDesc:\"\",statusTitleDescPlus:\"\",secondStatus:\"\",btnTxt:\"\",btnTxtType:\"\"};scope.isFontRed=!1;scope.appointStatusObj.statusTitle=scope.item.statusTitle;if(record.appointStatus==0||record.appointStatus==1||record.appointStatus==5||record.appointStatus==10){if(record.appointStatus==5){scope.appointStatusObj.secondStatus=\"\u5df2\u652f\u4ed8\";$AppContext.WXApp&&$AppContext.WXApp.preDiagnosisData&&$AppContext.WXApp.preDiagnosisData.preDiagnosisEnterFlag&&scope.source==\"appointApply\"&&me.showPreDiagnosis()}scope.appointStatusObj.statusTitleDesc=\"\u8bf7\u51c6\u65f6\u4e8e\u5c31\u8bca\u5f53\u5929\u524d\u5f80\u533b\u9662\u95e8\u8bca\u5c31\u8bca\u3002\";if(record.appointStatus==1||record.appointStatus==5){scope.appointStatusObj.statusTitleDesc=scope.organInfo.appointSuccessTip}if(record.organId==\"1001281\"&&(record.appointStatus==0||record.appointStatus==1)){scope.appointStatusObj.statusTitleDescPlus=\"\u9884\u7ea6\u5c31\u8bca\u65f6\u95f4\u4e3a\u5019\u8bca\u65f6\u95f4\uff0c\u5c31\u8bca\u65f6\u95f4\u4ee5\u73b0\u573a\u4e3a\u51c6\u3002\"}if(record.appointStatus==0){scope.appointStatusObj.statusTitleDesc=scope.payAhead==-2?scope.organInfo.appointSuccessTip:scope.organInfo.appointApplySuccessText;if((record.clinicPrice||scope.preBill||scope.organInfo.applyZeroPayFlag)&&scope.payAhead!=-2&&!record.evaStatus){scope.appointStatusObj.secondStatus=\"\u9884\u7ea6\u6210\u529f\"}if(scope.specialByMICFlag){scope.appointStatusObj.secondStatus=\"\"}if(record.organId==\"1002835\"){me.service.getOrganPayTimeSetting(record.organId).then(function(res){me.refresh(function($scope){$scope.payTime=res.payTime;$scope.payAhead=res.payAhead;if(res.payTime==0&&(res.payAhead==-1||res.payAhead==\"null\"||res.payAhead==\"undefined\")){$scope.appointStatusObj.statusTitleDesc=\"\u8bf7\u5728\u5c31\u8bca\u524d\u652f\u4ed8\uff0c\u4ee5\u514d\u5f71\u54cd\u60a8\u672c\u6b21\u5c31\u8bca\u3002\"}else if(res.payTime>0&&(res.payAhead==-1||res.payAhead==\"null\"||res.payAhead==\"undefined\")){h=record.appointDate.substr(11,2);m=record.appointDate.substr(14,2);m=+m+ +res.payTime;if(m>=60){h=+h+1;m=m%60;if(h>=24){h=\"00\"}}h=+h<10&&+h>0?\"0\"+ +h:h;m=+m<10?\"0\"+ +m:m;t=h+\":\"+m;$scope.appointStatusObj.statusTitleDesc=\"\u8bf7\u4e8e\"+t+\"\u524d\u652f\u4ed8\uff0c\u8d85\u65f6\u7cfb\u7edf\u81ea\u52a8\u53d6\u6d88\u3002\"}else if(res.payAhead==0){$scope.appointStatusObj.statusTitleDesc=\"\u8bf7\u4e8e\u9884\u7ea6\u5f53\u5929\u5b8c\u6210\u652f\u4ed8\uff0c\u8d85\u65f6\u7cfb\u7edf\u81ea\u52a8\u53d6\u6d88\u3002\"}else if(res.payAhead>0){$scope.appointStatusObj.statusTitleDesc=\"\u8bf7\u4e8e\u5c31\u8bca\u65e5\u671f\u524d\"+res.payAhead+\"\u5929\u5185\u652f\u4ed8\"}else if(res.payAhead==-2){if(record.connectCallNumberSystem){$scope.appointStatusObj.statusTitleDesc=\"\u70b9\u51fb\u67e5\u770b\u95e8\u8bca\u6392\u961f\u53eb\u53f7\u4fe1\u606f \"}else{$scope.appointStatusObj.statusTitleDesc=\"\u8bf7\u51c6\u65f6\u4e8e\u5c31\u8bca\u5f53\u5929\u524d\u5f80\u533b\u9662\u95e8\u8bca\u5c31\u8bca \"}}});me.countDetailBox()}).fail(function(e){$sys.showFail(e)})}if(scope.payAhead!=-2&&scope.isDeY&&(scope.organInfo.applyZeroPayFlag&&!record.clinicPrice||record.clinicPrice)){scope.appointStatusObj.statusTitleDesc=\"\u9501\u53f7\u6210\u529f\uff0c\u9501\u53f7\u65f6\u95f4\u7ea615\u5206\u949f\uff0c\u8bf7\u53ca\u65f6\u5b8c\u6210\u652f\u4ed8\u3002\"}}}if(record.appointStatus==2||record.appointStatus==6||record.appointStatus==7||record.appointStatus==8){scope.appointStatusObj.statusTitleDesc=record.cancelType==4||record.cancelResean!=null?\"\":\"\u53d6\u6d88\u539f\u56e0\uff1a\";scope.appointStatusObj.statusTitleDesc+=record.cancelResean||\"\";if(record.appointStatus==2&&record.cancelType==4&&scope.organInfo.appointFailText!=null&&!(scope.isSHSZ&&record.cancelResean)){scope.appointStatusObj.statusTitleDesc=scope.organInfo.appointFailText}if(record.appointStatus==6){scope.appointStatusObj.secondStatus=\"\u5df2\u9000\u6b3e\";if(scope.shSixHospital){scope.appointStatusObj.statusTitleDesc=\"\u60a8\u7684\u8d39\u7528\u5df2\u9000\u56de\u60a8\u7684\u8d26\u6237\uff0c\u8bf7\u67e5\u6536\uff01\"}}else if(record.appointStatus==7){scope.appointStatusObj.secondStatus=\"\u9000\u6b3e\u5931\u8d25\";scope.appointStatusObj.statusTitleDescPlus=scope.refundFailDescription;scope.isFontRed=scope.isDeY}else if(record.appointStatus==8){scope.appointStatusObj.secondStatus=\"\u9000\u6b3e\u4e2d\"}else{scope.appointStatusObj.secondStatus=\"\"}}if(!record.evaStatus&&record.appointStatus==9||record.appointStatus==11){scope.appointStatusObj.statusTitleDesc=record.appointStatus==9?\"\u82e5\u957f\u65f6\u95f4\u672a\u53cd\u5e94\uff0c\u8bf7\u5c1d\u8bd5\u4e0b\u62c9\u5237\u65b0\":scope.organInfo.appointmentConfirmationDoc||\"\"}if(record.appointStatus==3){scope.appointStatusObj.statusTitleDesc=\"\u672a\u83b7\u53d6\u5230\u60a8\u7684\u533b\u9662\u5c31\u8bca\u8bb0\u5f55\"}if(record.appointStatus==0||record.appointStatus==1||record.appointStatus==4||record.appointStatus==5||record.appointStatus==10){if(record.connectCallNumberSystem){scope.appointStatusObj.statusTitleDesc=\"\u70b9\u51fb\u67e5\u770b\u95e8\u8bca\u6392\u961f\u53eb\u53f7\u4fe1\u606f\";scope.appointStatusObj.btnTxtType=3;scope.appointStatusObj.btnTxt=\"\u67e5\u770b\u53eb\u53f7\"}else if(scope.organInfo.AppointToCallList){scope.appointStatusObj.statusTitleDesc=\"\u70b9\u51fb\u67e5\u770b\u95e8\u8bca\u6392\u961f\u53eb\u53f7\u4fe1\u606f\";scope.appointStatusObj.btnTxtType=4;scope.appointStatusObj.btnTxt=\"\u7b7e\u5230\u53d6\u53f7\"}}if($AppContext.WXApp.organId==\"1005569\"&&record.appointStatus==0){scope.appointStatusObj.statusTitleDesc=\"\u53f7\u6e90\u5df2\u4e3a\u60a8\u9501\u5b9a\uff0c\u8bf7\u57282\u5206\u949f\u5185\u5b8c\u6210\u652f\u4ed8\"}if(record.appointStatus==4){scope.appointStatusObj.statusTitleDesc=scope.waitPayDescription}if(record.appointStatus==13){scope.appointStatusObj.secondStatus=\"\u9884\u7ea6\u6210\u529f\";scope.appointStatusObj.statusTitleDesc=\"\u60a8\u7684\u9884\u7ea6\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u9884\u7ea6\u6302\u53f7\uff0c\u5982\u60a8\u5df2\u5c31\u8bca\uff0c\u8bf7\u5ffd\u7565\u3002\"}if(record.evaStatus){if(record.appointStatus!=3){scope.appointStatusObj.statusTitleDesc=\"\";scope.appointStatusObj.secondStatus=\"\"}if(record.evaStatus==2){scope.appointStatusObj.btnTxtType=2;scope.appointStatusObj.btnTxt=\"\u67e5\u770b\u8bc4\u4ef7\"}else{scope.appointStatusObj.btnTxtType=1;scope.appointStatusObj.btnTxt=\"\u7acb\u5373\u8bc4\u4ef7\"}}scope.$apply();if($env.isWeixin&&scope.organInfo.toastCancelReason&&record.appointStatus==2&&record.cancelType==4&&scope.appointStatusObj.statusTitleDesc){me.refresh(function($scope){$scope.showCancelScrollTip=true});me.scrollTip()}else{me.refresh(function($scope){$scope.showCancelScrollTip=false})}me.countDetailBox()},countDetailBox:function(){var me=this,el=me.el,scope=el.scope(),titleDescLines=4,oneLineHeight=!scope.isOldPersonModel?21:22,h=el.find(\".userappointdetail .titleDesc\").height();if(h==0){titleDescLines=0}else if(h<=oneLineHeight){titleDescLines=1}else if(h<=oneLineHeight*2){titleDescLines=2}else if(h<=oneLineHeight*3){titleDescLines=3}else{titleDescLines=4}me.refresh(function($scope){$scope.titleDescLines=titleDescLines;$scope.titleDescFold=titleDescLines==4;$scope.hasBtnWrapChild=el.find(\".appoint-btn-box\").children().length>0})},showAllTitleDesc:function(){var me=this,scope=me.el.scope();if(scope.titleDescLines>3){me.refresh(function($scope){$scope.titleDescFold=!$scope.titleDescFold})}},showRestTime:function(){var me=this,scope=me.el.scope(),record=scope.item.appointRecord,appointDate=record.appointDate,sysDate=scope.item.systemDate,curDate=new Date(sysDate.replace(/-/g,\"/\")),endDate=new Date(appointDate.replace(/-/g,\"/\")),differDate,deptId=record.appointDepartId;if(deptId&&scope.organInfo.ForcePayAppointDepartment&&scope.organInfo.ForcePayAppointDepartment.indexOf(deptId)>=0){scope.payTime=scope.organInfo.ForcePayTime}if(scope.payAhead!=-2&&!record.evaStatus&&(record.clinicPrice||scope.organInfo.applyZeroPayFlag)){if(scope.payTime>0){differDate=parseInt((curDate.getTime()-endDate.getTime())/1e3,10);scope.restTime=scope.payTime*60-differDate;scope.restTime=scope.restTime<0?0:scope.restTime;scope.restMinute=(Math.floor(scope.restTime/60)>=10?\"\":\"0\")+Math.floor(scope.restTime/60);scope.restSecond=(parseInt(scope.restTime%60,10)>=10?\"\":\"0\")+parseInt(scope.restTime%60,10);scope.showPayRestTime=!0;scope.appointTimer&&clearInterval(scope.appointTimer);scope.appointTimer=setInterval(function(){scope.restTime--;if(scope.restTime<=0){scope.restMinute=\"00\";scope.restSecond=\"00\";console.log(\"\u8fdb\u5165\u7ed3\u675f\");clearInterval(scope.appointTimer)}else{scope.restMinute=(Math.floor(scope.restTime/60)>=10?\"\":\"0\")+Math.floor(scope.restTime/60);scope.restSecond=(parseInt(scope.restTime%60,10)>=10?\"\":\"0\")+parseInt(scope.restTime%60,10)}scope.$apply()},1e3);scope.$apply()}}},showPreDiagnosis:function(){var me=this,scope=me.el.scope(),param;$sys.showMsg({title:\"\",template:'<div style=\"text-align: center\">\u4e3a\u7f29\u77ed\u60a3\u513f\u5728\u9662\u7b49\u5019\u65f6\u95f4\uff0c\u6211\u9662\u5bf9\u5c31\u533b\u6d41\u7a0b\u8fdb\u4e00\u6b65\u4f18\u5316\uff0c\u4e3a\u5c31\u8bca\u60a3\u513f\u63d0\u4f9b\u8bca\u524d\u5e38\u89c4\u68c0\u9a8c\u670d\u52a1\u3002\u5feb\u53bb\u7533\u8bf7\u5427\u3002</div>',scope:scope,cssClass:\"default\",buttons:[{text:\"\u6682\u65f6\u4e0d\u7528\",type:\"button-default\"},{text:\"\u9884\u7ea6\u8bca\u524d\u68c0\u9a8c\",type:\"button-positive\",onTap:function(){$sys.openModule({url:\"eh.wx.health.preDiagnosis.SelectInspectItem\",cache:me.popovers,destroy:!0,title:\"\u9009\u62e9\u68c0\u9a8c\u9879\u76ee\"}).then(function(p){param=scope.item&&scope.item.appointRecord;param.patientSexText=scope.item&&scope.item.patient&&scope.item.patient.patientSexText;param.age=scope.item&&scope.item.patient&&scope.item.patient.age;p.module.initSelectInspectItem(param,scope.organInfo)})}}]})},scrollTip:function(){var me=this,el=me.el,scope=el.scope(),left,noticeWidth=el.find(\".bd\")[0]&&el.find(\".bd\")[0].offsetWidth||0,outerWidth=el.find(\".tip-box\")[0]&&el.find(\".tip-box\")[0].offsetWidth||0;if(noticeWidth>outerWidth){el.find(\".bd\").css(\"left\",0);scope.scrollTipTimer=setInterval(function(){left=parseInt(el.find(\".bd\").css(\"left\"),10);el.find(\".bd\").css(\"left\",(left>-noticeWidth?left-1:outerWidth)+\"px\")},40)}},getSpecialAppointDetail:function(appointId,showEva,refresh){var me=this,switchFlag;me.service.getPatTransferById(appointId).then(function(detail){$sys.hideLoading();switchFlag=false;me.refresh(function($scope){$scope.clickAlreadyPay=!0;$scope.detailFalg=1;$scope.item=detail;$scope.photo=$scope.getAva(detail.doctor);$scope.switchFlag=switchFlag;$scope.cdrOtherdocsLen=detail.cdrOtherdocs.length;$scope.appointId=appointId;$scope.listInfoType=\"specialAppoint\";$scope.showMoveTips=!$env.hybrid&&!$env.getCookie(\"appkey\")&&!$env.isAlipay&&$env.isWeixin;refresh&&$scope.$broadcast(\"scroll.refreshComplete\")});me.resetCdrImgStyle();showEva&&me.showEvaluatePop()}).fail(function(e){$sys.showFail(e)})},showDepartInfo:function(obj){var me=this;me.service.getDoctorDeptInfo(obj.appointRecord.appointDepartId,obj.appointRecord.organId).then(function(e){me.refresh(function($scope){$scope.organProfessionText=e.length&&e[0][0];$scope.organText=e.length&&e[0][1]})}).fail(function(e){$sys.showFail(e)})},canShowPayBtn:function(){var me=this,scope=me.scope(),appointInfo=scope.item,record=scope.item.appointRecord,appointAutoPay=scope.appointAutoPay;me.refresh(function($scope){$scope.showPayBtn=appointInfo.payBtn;$scope.judgePayBtnShow=(record.appointStatus==0||record.appointStatus==4)&&scope.isPayBtnShow&&scope.showPayBtn&&!record.evaStatus&&(record.clinicPrice||scope.organInfo.applyZeroPayFlag)});me.showStatusWrap();if(record.recordType!=2&&appointInfo.payBtn&&record.preSettleFlag){me.refresh(function($scope){$scope.preBill=record.clinicPrice})}if(scope.judgePayBtnShow&&!scope.zeroRegStatus){if(scope.source==\"appointApply\"&&(appointAutoPay.length?appointAutoPay.length==2?1:appointAutoPay[0]==\"1\"?1:record.appointDate.slice(0,10)==record.workDate?1:0:0)){me.payOrderNow()}else if(scope.autoPayFlag){me.payOrderNow();scope.autoPayFlag=false}}},showCloneMZ:function(){var me=this,scope=me.el.scope();scope.newData=\"data:image/png;base64,\"+scope.cloudQrCode;scope.msgConclusion=$sys.showMsg({scope:scope,title:\"\u4e91\u8bca\u7801\",template:\"<i id='reConclusionMsg' ng-click='conclusionClose()'></i>\"+'<div id=\"cloneqrcode\"></div>',cssClass:\"default appointConclusionMsg cloneMz\"});setTimeout(function(){me.initCloneCode()},200)},showDoctIndexPop:function(){var me=this,scope=me.el.scope(),targetDoct=scope.item.doctor,moduleInfo=$sys.getDoctIndexPageInfo(targetDoct);$sys.openModule({title:moduleInfo.title,cache:me.popovers,manualLoading:!0,url:moduleInfo.url}).then(function(p){p.module.getDoctInfo(targetDoct.doctorId,\"user\")})},showDoctIndexPopWeb:function(){var me=this,scope=me.el.scope(),targetDoct=scope.item.doctor,doctid=targetDoct.doctorId;$sys.openModule({title:targetDoct.teams?\"\u56e2\u961f\u533b\u751f\u4ecb\u7ecd\":\"\u533b\u751f\u4ecb\u7ecd\",cache:me.popovers,url:\"eh.wx.health.doctor.DoctDetail\",destroy:!0,events:{doctIndexFollowChanged:{callback:function(){me.emit(\"doctListFollowChanged\")}}}}).then(function(p){p.module.getDoctDetail(doctid)})},reAppointApply:function(){var me=this,scope=me.el.scope(),args;$sys.openModule({url:\"eh.wx.health.doctFinder.DateSelectDoct\",cache:me.popovers,manualLoading:!0,args:{organId:scope.item.appointRecord&&scope.item.appointRecord.organId}}).then(function(popover){args={deptId:scope.item.department&&scope.item.department.deptId,deptName:scope.item.department&&scope.item.department.name,organId:scope.item.appointRecord&&scope.item.appointRecord.organId,shortName:scope.item.appointRecord&&scope.item.appointRecord.organIdText,intClinicFlag:scope.item.department&&scope.item.department.intClinicFlag};popover.module.doHandle(args)})},goSystemSuggest:function(){var me=this,scope=me.el.scope(),record=scope.item.appointRecord;if(record.appointRecordExt&&record.appointRecordExt.medicalInsuranceSupport==2&&record.outTradeNo&&record.payFlag==1){if($env.isAlipay&&$env.ngariMiniAppForWeb){me.getAliAuthorization().then(function(){me.refundAuthApply()})}else{me.refundAuthApply()}}else{me.showSystemSuggestPop()}},refundAuthApply:function(){var me=this,scope=me.el.scope(),record=scope.item.appointRecord;var param={applyNo:record.outTradeNo,successCallMsg:{module:\"appoint\",aid:record.appointRecordId.toString(),business:\"appoint\"},failCallMsg:{module:\"appoint\",aid:record.appointRecordId.toString()}};$sys.showLoading();me.service.refundAuth(param).then(function(res){$sys.hideLoading();res.needAuth?$sys.goLink(res.payAuthUrl):me.showSystemSuggestPop()}).fail(function(e){$sys.showMsg(e);$sys.hideLoading()})},getAliAuthorization:function(){var me=this,scope=me.el.scope(),defer=new $Defer;me.api&&me.api.callAliApi(\"getAuthCode\",{scopes:[\"auth_user\",\"nhsamp\"]}).then(function(res){if(res.authCode){me.service.authAliAccessToken($env.appkey,res.authCode,\"nhsamp\")}defer.resolve(1)}).fail(function(e){defer.reject(0)});return defer.promise},showSystemSuggestPop:function(){var me=this,scope=me.el.scope(),setInfo={head:\"\u53d6\u6d88\u9884\u7ea6\",title:\"\u8bf7\u9009\u62e9\u53d6\u6d88\u539f\u56e0\",placeholder:\"\",name:scope.item.patient.patientName,mpiId:scope.item.patient.mpiId,appointId:scope.item.appointRecord?scope.item.appointRecord.appointRecordId:scope.item.appointRecordId,cancelAppointRemindText:scope.organInfo.cancelAppointRemindText,organId:scope.item.appointRecord&&scope.item.appointRecord.organId,onlyRefundBtn:scope.onlyRefundBtn},status=scope.item,doc=status.appointRecord||status.transfer;if(doc.statusName==\"doc\"){setInfo.docAppoint=true}$sys.openModule({title:\"\u53d6\u6d88\u9884\u7ea6\",cache:me.popovers,url:\"eh.wx.health.person.SystemSuggest\",events:{cancelAppoint:{autoclose:!0,callback:function(obj){setInfo.appointId=obj?obj:setInfo.appointId;scope.item.appointRecord.appointStatus=2;scope.source=\"\";scope.showErrorMsg=!1;me.getSourceAppointDetail(setInfo.appointId);me.emit(\"cancelAppoint\");$sys.getScroll(\"myAppointintScroll\").scrollTo(0,0,!1)}}}}).then(function(p){p.module.setPageInfo(\"cancelAppoint\",setInfo)})},clickCombineBtns:function(){var me=this,scope=me.el.scope();switch(scope.appointStatusObj.btnTxtType){case 1:case 2:me.showEvaluatePop();break;case 3:me.checkCurNum();break;case 4:me.goCallNumberList();break;default:break}},showEvaluatePop:function(){var me=this,scope=me.el.scope(),items=scope.item.appointRecord?scope.item.appointRecord:scope.item.transfer,args={feedbackId:items.feedbackId,isEva:items.evaStatus,consultId:items.appointRecordId||items.transferId,doctor:items.doctorId||items.confirmDoctor,uid:$AppContext.urt.id,typeCode:scope.item.appointRecord?4:1,type:scope.item.transfer?\"specialAppoint\":\"sourceAppoint\",organId:items.organId||items.confirmOrgan,departmentId:items.appointDepartId||items.confirmDepart,info:items};if(args.isEva==2){$sys.openModule({title:\"\u533b\u751f\u8bc4\u4ef7\",cache:me.popovers,url:\"eh.wx.health.evaluationCenter.EvaluationList\"}).then(function(p){p.module.initEvaList(args.doctor)})}else{$sys.openModule({url:\"eh.wx.health.evaluate.PublishEvaForAppoint\",cache:me.popovers,title:\"\u53d1\u5e03\u8bc4\u4ef7\",destroy:!0,events:{updateAppointEva:{autoclose:!0,callback:function(res){me.getAppointDetailInfo(res.type,res.consultId,scope.rType||0,\"\")}},updateAppointEva2:{callback:function(res){me.getAppointDetailInfo(res.type,res.consultId,scope.rType||0,\"\")}}}}).then(function(popover){popover.module.initEva(args)})}},checkCurNum:function(){var me=this,scope=me.el.scope(),appointId=scope.item.appointRecord&&scope.item.appointRecord.appointRecordId||scope.item.transfer&&scope.item.appointRecordId,organId=scope.item.appointRecord&&scope.item.appointRecord.organId||scope.item.transfer&&scope.item.transfer.confirmOrgan;appointId&&$sys.openModule({url:\"eh.wx.health.person.CallNumber\",manualLoading:!0,cache:me.popovers}).then(function(p){p.module.showInfo({aid:appointId},organId)})},goCallNumberList:function(){var me=this,scope=me.el.scope(),record=scope.item.appointRecord,params={mpiId:scope.item.patient.mpiId,cardId:record.cardId||record.medInsureCarId,cardType:record.medInsureCarId?2:record.cardType,organId:record.organId};$sys.openModule({url:\"eh.wx.health.person.QueueCallNumberNew\",cache:me.popovers}).then(function(p){p.module.initScope(params)})},goPreconsultation:function(){var me=this,scope=me.scope(),aid=scope.item.appointRecord.appointRecordId;$sys.showLoading();me.service.preConsultURL(aid).then(function(res){$sys.hideLoading();$sys.goLink(res)}).fail(function(e){$sys.hideLoading();$sys.showFail(e)})},payNowValidateDetail:function(){$sys.hideLoading();var me=this,scope=me.scope();if(scope.organInfo.MedicalInsuranceWindow){me.refresh(function($scope){$scope.menuShowFlag=!0})}else{if(scope.item.couponFlag){scope.chooseCoupon()}else{me.payNowDetail()}}},payNowDetail:function(couponId){var me=this,scope=me.el.scope(),firstFlag,param=scope.accountType?{medicalInsuranceSupport:\"1\"}:{},record=scope.item.appointRecord?scope.item.appointRecord:scope.item;me.showLoading();scope.special=scope.item.transfer?\"1\":\"0\";me.loadProcess();if(scope.item.couponFlag&&couponId){param.couponId=couponId}me.service.settlePreBillForBusNew(+record.appointRecordId,$AppContext.WXApp.payWay,param).then(function(res){me.hideLoading();clearInterval(me.processTimer);firstFlag=$AppContext.WXApp.organId==\"1000874\"&&res.firstRegisterPatient;if(res.errorCode==\"canPay\"&&!firstFlag){var data={appointRecordId:+record.appointRecordId,busType:\"appointPay\"};if(scope.item.couponFlag&&couponId){data.couponId=couponId}scope.isWeiningPay?me.weiNingFormData(data):me.goConfirm(res.preBill,record)}else{$sys.showMsg({template:firstFlag?\"\u60a8\u597d\uff0c\u672c\u5355\u4f4d\u9996\u8bca\u60a3\u8005\u987b\u5148\u5230\u6536\u8d39\u7a97\u53e3\u5efa\u6863\u652f\u4ed8\uff01\":res.errorMsg,cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\"}]});scope.clickAlreadyPay=!0;scope.$applyAsync()}}).fail(function(e){scope.clickAlreadyPay=!0;scope.$applyAsync();me.hideLoading();clearInterval(me.processTimer);$sys.showFail(e)})},applySocialCardCallBack:function(callBackData){var me=this,el=me.el,scope=el.scope(),data=callBackData.extraData;scope.source=\"\";data&&data.appointRecordId&&(data.detailType==\"specialAppoint\"?me.getSpecialAppointDetail(data.appointRecordId):me.getSourceAppointDetail(data.appointRecordId))},weiNingFormData:function(data){var me=this,scope=me.el.scope(),param={},linkInfo={},extraDataWX={extraData:{appointRecordId:data.appointRecordId,detailType:scope.listInfoType},fromModuleUrl:\"eh.wx.health.person.UserAppointDetail\"};param={mpiId:scope.item.patient.mpiId,busType:\"appointpay\",busId:data.appointRecordId,extraData:extraDataWX};linkInfo={moduleUrl:\"eh.wx.health.person.UserAppointDetail\",appointId:data.appointRecordId};if(scope.item.couponFlag&&data.couponId){linkInfo.couponId=data.couponId}me.service.getSignNoAndSaveData(param).then(function(res){me.showPayTip?$sys.showMsg({template:\"\u60a8\u597d\uff01\u5f53\u524d\u6302\u53f7\u4e3a\u7ebf\u4e0a\u652f\u4ed8\uff0c\u5982\u9700\u9000\u53f7\u8bf7\u5f53\u65e5\u5230\u533b\u9662\u7a97\u53e3\u3002\",cssClass:\"default\",buttons:[{text:\"\u53d6\u6d88\",type:\"button-default\",onTap:function(){scope.clickAlreadyPay=!0;scope.$applyAsync()}},{text:\"\u786e\u8ba4\",type:\"button-positive\",onTap:function(){me.payOnCurrentPage(data.appointRecordId,data.busType,null,null,linkInfo)}}]}):me.payOnCurrentPage(data.appointRecordId,data.busType,null,null,linkInfo)}).fail(function(e){scope.clickAlreadyPay=!0;scope.$applyAsync();$sys.showFail(e)})},payFirstHandle:function(){var me=this,scope=me.el.scope();if(!scope.coronavirusAssessPosition){me.payNowValidateDetail();return}me.getCoronAssessUrl().then(function(res){if(res&&res.genNewForm){console.log(\"\u672a\u586b\u5199\u8fc7/\u5df2\u8fc7\u671f\");$sys.goLink(res.ngariForm);return}if(res&&!res.genNewForm&&res.isConclusionAbnormal){$sys.hideLoading();console.log(\"\u672a\u8fc7\u671f/\u5f02\u5e38\");scope.msgConclusion=$sys.showMsg({scope:scope,title:\"\",template:\"<i id='reConclusionMsg' ng-click='conclusionClose()'></i>\"+scope.detailsPageAbnormalTips,cssClass:\"default appointConclusionMsg\",buttons:[{text:\"\u91cd\u65b0\u586b\u5199\",type:\"button-positive\",onTap:function(){$sys.goLink(res.ngariForm)}}]});return}console.log(\"\u672a\u8fc7\u671f/\u6b63\u5e38\");me.payNowValidateDetail()})},loadProcess:function(){var me=this,el=me.el,iSpeed=1;me.processTimer=setInterval(function(){iSpeed+=1;if(iSpeed>=90){clearInterval(me.processTimer)}document.getElementById(\"bar\").style.width=iSpeed+\"%\"},500)},insuranceCardOrSelfPay:function(){var me=this,scope=me.scope(),insuranceText=!me.cardTips?\"\u5c0a\u656c\u7684\u533b\u4fdd\u75c5\u4eba\uff0c\u76ee\u524d\u6682\u4e0d\u652f\u6301\u533b\u4fdd\u652f\u4ed8\uff0c\u53ea\u80fd\u81ea\u8d39\u7ed3\u7b97\uff0c\u662f\u5426\u7ee7\u7eed\uff1f\":\"\u56e0\u533b\u4fdd\u8981\u6c42\uff0c\u76ee\u524d\u4ec5\u652f\u6301\u624b\u673a\u7528\u6237\u672c\u4eba\u7684\u533b\u4fdd\u8d26\u6237\u8fdb\u884c\u5728\u7ebf\u652f\u4ed8\uff0c\u5982\u975e\u624b\u673a\u7528\u6237\u672c\u4eba\uff0c\u8bf7\u524d\u5f80\u533b\u9662\u81ea\u52a9\u673a\u6216\u7a97\u53e3\u7ed3\u7b97\u3002\";if(scope.barcodeId){switch(+scope.item.healthCardType){case 1:me.payFirstHandle();break;case 2:$sys.hideLoading();if(!scope.isWeiningPay){if(scope.isBJYQ&&scope.item.appointRecord.appointDepartId==255&&scope.item.appointRecord.workDate.indexOf($AppContext.serverDate.substr(0,10))>=0){me.payFirstHandle();return}insuranceText=scope.isBJYQ?\"\u5c0a\u656c\u7684\u533b\u4fdd\u75c5\u4eba\uff0c\u60a8\u5df2\u6210\u529f\u9884\u7ea6\uff0c\u8bf7\u60a8\u7ebf\u4e0b\u7f34\u8d39\u53d6\u53f7\u3002\u7ebf\u4e0a\u6682\u4e0d\u652f\u6301\u533b\u4fdd\u652f\u4ed8\uff01\":insuranceText;if(scope.organInfo.supportInsuranceCardSelfPay){$sys.showMsg({template:insuranceText,cssClass:\"default\",buttons:[{text:\"\u7ee7\u7eed\",type:\"button-positive\",onTap:function(){$sys.showLoading();me.payFirstHandle()}},{text:\"\u53d6\u6d88\",type:\"button-default\",onTap:function(){scope.clickAlreadyPay=!0;scope.$applyAsync()}}]})}else{$sys.showMsg(scope.isBJYQ?insuranceText:\"\u5c0a\u656c\u7684\u533b\u4fdd\u75c5\u4eba\uff0c\u76ee\u524d\u6682\u4e0d\u652f\u6301\u533b\u4fdd\u652f\u4ed8\uff0c\u8bf7\u7ebf\u4e0b\u652f\u4ed8\",2e3,\"toast-auto\");scope.clickAlreadyPay=!0;scope.$applyAsync()}}else{me.payFirstHandle()}break;default:me.payFirstHandle();break}}else{me.payFirstHandle()}},onApilyTypeSelected:function(accountType){var me=this,scope=me.el.scope();scope.menuShowFlag=!1;scope.accountType=accountType;if(scope.item.couponFlag){scope.chooseCoupon()}else{me.payNowDetail()}},goConfirm:function(preBill,record){var me=this,scope=me.el.scope(),args,mpiId=$AppContext.urt.properties.patient.mpiId;if($env.isMinapp()&&$env.ngariWeApp){var url=\"/pages/appointPayment/index?id=\"+(+record.appointRecordId||scope.appointId)+\"&busType=appointPay\";if($env.isAliapp){my.navigateTo({url:url})}else{wx.miniProgram.navigateTo({url:url})}return}args={mpiId:mpiId,appointId:+record.appointRecordId||scope.appointId,organId:+record.organId,price:preBill,busType:\"appointPay\",couponType:3,special:scope.special,transferId:record.transfer?record.transfer.transferId:\"\",appointDepartId:record.appointDepartId,cardId:record.cardId||\"\",cardType:record.cardType?record.cardType:record.cardId?1:\"\",cardOrgan:record.cardId?record.organId:\"\"};$sys.openModule({url:\"eh.wx.health.doctor.AppointApplyOrderConfirm\",cache:me.popovers,title:\"\u786e\u8ba4\u8ba2\u5355\",events:{backClose:{autoclose:!0},refreshAppointDetail:{callback:function(appointId){scope.isGoPaymentRecord=!1;scope.appointId=appointId||scope.appointId;scope.appointId&&me.refreshDetailData()}}}}).then(function(popover){popover.module.showAppointDeConfirmPayDetail(args)})},refreshDetailData:function(){var me=this,scope=me.el.scope(),evaFlag=scope.args?scope.args.evaflag:\"\";if(scope.listInfoType==\"sourceAppoint\"&&scope.appointId){scope.count=0;scope.source=\"\";scope.refreshDetailFlag=true;me.getSourceAppointDetail(scope.appointId,evaFlag,!0)}else if(scope.listInfoType==\"specialAppoint\"&&scope.appointId){me.getSpecialAppointDetail(scope.appointId,evaFlag,!0)}},showBackHomeBtn:function(){var me=this,scope=me.el.scope();scope.goBackHomeFlag=false;scope.$apply()},initOrganInfo:function(detail){var me=this,scope=me.el.scope(),timeSolt,temp,defer=new $Defer,workType=\"\",record=scope.item.appointRecord||scope.item,startTime;me.getOrganConfigInfo(record.organId).then(function(organCfgInfo){scope.organInfo=organCfgInfo;scope.specialByMICFlag=organCfgInfo.MedCardAppointToPaymentTimeout&&(record.medInsureCarId!=null&&record.medInsureCarId!=\"\"||record.appointRecordExt&&record.appointRecordExt.medFlag);scope.payTime=!scope.specialByMICFlag&&organCfgInfo.payTime||0;scope.payAhead=organCfgInfo.payAhead;scope.RegisterToAppoint=organCfgInfo.RegisterToAppoint;scope.showReAppointButton=organCfgInfo.showReAppointButton?!0:!1;scope.zeroDisplay=organCfgInfo.zeroDisplay[0];scope.showOrderNumber=organCfgInfo.AppointRecordFixedDisplayNumber&&organCfgInfo.AppointRecordFixedDisplayNumber.length>0&&(organCfgInfo.AppointRecordFixedDisplayNumber.indexOf(\"1\")>-1&&record.recordType==1)||organCfgInfo.AppointRecordFixedDisplayNumber&&organCfgInfo.AppointRecordFixedDisplayNumber.indexOf(\"0\")>-1&&record.recordType==0||scope.shSixHospital&&(record.appointStatus==5||record.appointStatus==12)&&record.appointId&&record.organAppointId&&record.appointId!=record.organAppointId;scope.appointOrderText=organCfgInfo.appointOrderText&&organCfgInfo.appointOrderText.split(\"\\n\")||[];scope.isWeiningPay=record.recordType?organCfgInfo.supportAppointTodayWeiNingPay:organCfgInfo.supportAppointWeiNingPay;scope.jumpToOutPaymentSupportDept=organCfgInfo.jumpToOutPaymentSupportDept;scope.OfflineAppointPayCancel=organCfgInfo.OfflineAppointPayCancel;scope.appointOfflinePayOnline=organCfgInfo.appointOfflinePayOnline;scope.electronicInvoiceSwitch=organCfgInfo.electronicInvoiceSwitch&&organCfgInfo.electronicInvoiceSwitch[0];scope.showSourceLevelText=me.getSourceLevelText(detail);scope.waitingTimeInfo=\"\";workType=(organCfgInfo.HisWorkType&&record.appointRecordExt&&record.appointRecordExt.hisWorkType?record.appointRecordExt.hisWorkType:record.workTypeText)||\"\";timeSolt=me.filter(\"customDate\")(record.startTime,\"hh:mm\")+\"~\"+me.filter(\"customDate\")(record.endTime,\"hh:mm\");if(!scope.showNumTime){temp=[null,me.filter(\"shortDate\")(record.workDate),workType,me.filter(\"customDate\")(record.startTime,\"hh:mm\"),timeSolt]}else{temp=[null,me.filter(\"shortDate\")(record.workDate),\"\",\"\",\"\"]}if(!record.recordType||record.recordType==1&&scope.RegisterToAppoint){me.waitingTime(organCfgInfo.appointTimeRule.sort(),temp)}else if(record.recordType==2){me.waitingTime([\"1\",\"2\",\"3\"],temp)}else{me.waitingTime(organCfgInfo.registerTimeRule.sort(),temp)}if(record.transferId&&record.transferId!=0&&scope.item.preciseAppointmentTime){scope.waitingTimeInfo=scope.item.preciseAppointmentTime}if(scope.showNumTime){scope.callingNumTime=\"\";startTime=new Date(record.startTime.replace(/-/g,\"/\"));startTime.setMinutes(startTime.getMinutes()-30);scope.callingNumTime=me.filter(\"customDate\")(startTime,\"hh:mm\")+\"~\"+me.filter(\"customDate\")(record.startTime,\"hh:mm\")}scope.coronavirusAssessValidPeriod=organCfgInfo.coronavirusAssessValidPeriod;scope.coronavirusAssessNickname=organCfgInfo.coronavirusAssessNickname;scope.coronavirusAssessPosition=organCfgInfo.coronavirusAssessPosition.length&&organCfgInfo.coronavirusAssessPosition.indexOf(\"7\")>-1&&!0||!1;scope.detailsPageAbnormalTips=organCfgInfo.detailsPageAbnormalTips;scope.$apply();defer.resolve()}).fail(function(e){$sys.showFail(e);defer.reject()});return defer.promise},getSourceLevelText:function(detail){var me=this,scope=me.el.scope(),organCfgInfo=scope.organInfo;if(detail.appointRecord.recordType==2){detail.appointRecord.statusName=\"remoteClinic\";return\"\u8fdc\u7a0b\u8054\u5408\u95e8\u8bca\"}if(organCfgInfo.showHisSourceLevelText&&detail.appointRecord.hisSourceLevelText!=null){return detail.appointRecord.hisSourceLevelText}switch(detail.appointRecord.sourceLevel){case 1:return\"\u666e\u901a\u95e8\u8bca\";case 2:return\"\u4e13\u5bb6\u95e8\u8bca\";case 3:return\"\u7279\u9700\u95e8\u8bca\";default:return detail.appointRecord.sourceLevelText}},waitingTime:function(arr,temp){var me=this,i=0,scope=me.el.scope();for(i;i<arr.length;i++){scope.waitingTimeInfo+=temp[arr[i]]+\" \"}},initClientConfigs:function(){var me=this,scope=me.el.scope(),defer=new $Defer;me.getAllClientConfigs().then(function(clientCfgInfo){scope.supportWholeSomeCard=clientCfgInfo.supportWholeSomeCard;scope.isDisplayHomeBox=clientCfgInfo.isDisplayHomeBox;scope.switchCardName=clientCfgInfo.switchCardName;scope.$apply();defer.resolve()}).fail(function(e){$sys.showFail(e);defer.reject()});return defer.promise},initBarcodeInfo:function(){var me=this,scope=me.el.scope(),cardId,record=scope.item.appointRecord||scope.item;cardId=record.cardId||record.medInsureCarId;scope.barcodeId=scope.barcodeName=me.barcodeNoneCardType&&cardId&&cardId.indexOf(\"_\")>0?cardId.substring(0,cardId.indexOf(\"_\")):cardId;scope.$apply()},showCoronavirusUpdateTime:function(){var me=this,scope=me.el.scope(),nowDate=Date.parse(new Date),formDate,record=scope.item.appointRecord,coronavirusAssessPosition=scope.organInfo.coronavirusAssessPosition||[],appointDate=parseInt(record.endTime.substr(0,10).replace(/-/g,\"\"),10),currentDate=parseInt($AppContext.serverDate.substr(0,10).replace(/-/g,\"\"),10),positionFlag=~coronavirusAssessPosition.indexOf(\"1\")||~coronavirusAssessPosition.indexOf(\"7\");if(!(scope.isZiGongFourthHsp&&positionFlag&&record&&currentDate<=appointDate)){scope.showCoronavirusAssessTimeFlag=false;scope.$applyAsync();return}me.getAssessUrl().then(function(assId){return me.findApointHistoryByAssessIdAndMpiId(assId)}).then(function(data){if(data&&data.code==200&&data.result){formDate=Date.parse(new Date(data.result.modifyDate.replace(/-/g,\"/\")));scope.isInTimeFlag=nowDate-formDate<=864e5;scope.coronavirusUpdateTime=data.result.modifyDate;scope.showCoronavirusAssessTimeFlag=true}else{scope.showCoronavirusAssessTimeFlag=false}scope.$applyAsync()})},getAssessUrl:function(){var me=this,scope=me.el.scope(),defer=new $Defer,urlArr,hospStr=\"\",assId=\"\",record=scope.item.appointRecord;me.service.getAssessUrl(record.organId,record.appointDepartId).then(function(res){if(res&&~res.indexOf(\"uniqueIndex\")){hospStr=res.indexOf(\"assessId\")&&res.slice(res.indexOf(\"assessId\"));urlArr=hospStr&&hospStr.split(\"&\");urlArr&&urlArr.length&&urlArr.forEach(function(item){if(~item.indexOf(\"assessId\")){assId=item.split(\"=\")[1]}})}defer.resolve(assId)}).fail(function(e){$sys.showFail(e);defer.reject()});return defer.promise},findApointHistoryByAssessIdAndMpiId:function(assId){var me=this,scope=me.el.scope(),defer=new $Defer,record=scope.item.appointRecord;if(assId){me.service.findApointHistoryByAssessIdAndMpiId({assessId:assId,mpiId:record.mpiid,dateNum:30}).then(function(data){defer.resolve(data)}).fail(function(e){$sys.showFail(e);defer.reject()})}else{defer.resolve()}return defer.promise},showBarcodeInfo:function(isMzId){var me=this,scope=me.el.scope(),record=scope.item.appointRecord?scope.item.appointRecord:scope.item;me.service.queryHealthCardFromHisAndMerge(record.organId,record.mpiid,!0).then(function(e){if(e.length>0){me.goBarcodeInfoPage(isMzId,record.cardId)}})},insertWXlabel:function(el,className){var me=this,scope=me.scope();if(!scope.canClickToThirdMedical)return;if($AppContext.allClientConfigs.healthCardBuilderSource==4)return;var isContainWXLabel=document.querySelector(className)&&document.querySelector(className).getElementsByTagName(\"wx-open-launch-weapp\").length;console.log(isContainWXLabel,\"isContainWXLabel\");if(isContainWXLabel){document.querySelector(className).removeChild(document.querySelector(className).getElementsByTagName(\"wx-open-launch-weapp\")[0])}var info={appid:\"gh_45334679e384\",url:\"pages/nhsa-code/index/index.html\"};var scriptDom=document.createElement(\"script\");scriptDom.type=\"text/wxtag-template\";scriptDom.text='<button style=\"width:100%;height:87px; background:transparent; border:none;outline:none\"></button>';var htmlStr='<wx-open-launch-weapp id=\"'+info.appid+'-launch-btn\" class=\"weaAppStyle\" style=\"width:100%;height:100%;position:absolute;left:0;display:block;top:0\" username=\"'+info.appid+'\" path=\"'+info.url+'\">'+scriptDom.outerHTML+\"</wx-open-launch-weapp>\";el.find(className).append(htmlStr)},goBarcodeInfoPage:function(isMzId,barcodeId){var me=this,record,cardInfo,scope=me.el.scope(),el=me.el;record=scope.item.appointRecord?scope.item.appointRecord:scope.item;console.log(scope.canClickToThirdMedical,\"scope.canClickToThirdMedical\");console.log(record,\"record\");if(scope.canClickToThirdMedical&&record.medInsureCarId){if($AppContext.allClientConfigs.healthCardBuilderSource==4){$sys.goLink(\"https://card.wecity.qq.com/v2/scan-code-nhsa?channel=AAGY07oBBUruTgiPkp-wvnRw\")}return}cardInfo={cardId:isMzId?barcodeId:scope.barcodeId,cardOrgan:record.organId,cardType:record.medInsureCarId?2:record.cardType==3?3:1,mpiId:scope.item.patient&&scope.item.patient.mpiId,cardTextName:isMzId?record.appointRecordExt.clinicMzIdName||\"\u95e8\u8bca\u53f7\":\"\u5c31\u8bca\u5361\u53f7\"};$sys.openModule({title:isMzId?record.appointRecordExt.clinicMzIdName||\"\u95e8\u8bca\u53f7\":\"\u5c31\u8bca\u5361\u53f7\",cache:me.popovers,url:\"eh.wx.health.person.BarCodeInfo\"}).then(function(p){p.module.initBar({cardInfo:cardInfo,it:\"\",curMember:scope.item.patient,entrance:\"\",prevPage:\"userAppointDetail\",notMedical:!0,isMzId:isMzId})})},showBackHomeBtnWeb:function(){var me=this,scope=me.el.scope();scope.goBackHomeFlag=true;scope.$apply()},showElecHealthCardInfo:function(){var me=this;me.getPatientInfoByMpiid().then(function(patientInfo){$sys.openModule({url:\"eh.wx.health.pubElecHealthCard.ElecHealthCardInfo\",cache:me.popovers,title:\"\u5065\u5eb7\u5361\"}).then(function(p){p.module.initHealthCardInfo(patientInfo.mpiId,\"appointDetail\")})})},getPatientInfoByMpiid:function(){var me=this,scope=me.scope(),mpiId=scope.item.patient.mpiId,defer=new $Defer;me.service.getPatientInfoDS(mpiId).then(function(patientInfo){defer.resolve(patientInfo)}).fail(function(e){$sys.showFail(e)});return defer.promise},getAllClientConfigs:function(){var me=this,defer=new $Defer;me.service.getAllClientConfigs().then(function(res){defer.resolve(res)}).fail(function(e){$sys.showFail(e)});return defer.promise},getClinicMzIdInstructions:function(){var me=this,scope=me.scope(),defer=new $Defer,organId=scope.item.appointRecord?scope.item.appointRecord.organId:scope.item.organId;me.service.findConfigurations(organId,[\"healthCardInstructions\",\"appointAutoPay\",\"waitPayDescription\",\"refundFailDescription\",\"canCheckInDistinceRange\",\"callNumBeyondDistanceInfo\"]).then(function(res){me.refresh(function($scope){$scope.clinicMzIdTips=res.healthCardInstructions;$scope.appointAutoPay=res.appointAutoPay;$scope.waitPayDescription=res.waitPayDescription;$scope.refundFailDescription=res.refundFailDescription;$scope.canCheckInDistinceRange=res.canCheckInDistinceRange;$scope.callNumBeyondDistanceInfo=res.callNumBeyondDistanceInfo});defer.resolve()}).fail(function(e){defer.reject();$sys.showFail(e)});return defer.promise},getClinicMzCode:function(){var me=this,el=me.el,scope=el.scope(),appointRecord=scope.item.appointRecord,qrNum=appointRecord.appointRecordExt.appointDetailQrNum,appointDate=parseInt(appointRecord.endTime.substr(0,10).replace(/-/g,\"\"),10),currentDate=parseInt($AppContext.serverDate.substr(0,10).replace(/-/g,\"\"),10);if(scope.isHSFive&&qrNum&&qrNum.length==9&&currentDate==appointDate){me.service.cardEncryption(qrNum,appointRecord.organId).then(function(res){me.initQrCode(res)}).fail(function(e){$sys.hideLoading();$sys.showFail(e)})}else{me.initQrCode(qrNum)}},initQrCode:function(qrNum){var me=this,el=me.el,scope=el.scope(),qrcode;if(!scope.isZiGongFourthHsp){me.barCode=new eh.wx.wap.portal.code;el.find(\"#barCode\").html(me.barCode.code128(qrNum,\"B\"))}if(el.find(\"#qrcode\")[0]){el.find(\"#qrcode\")[0].innerHTML=\"\";qrcode=new QRCode(el.find(\"#qrcode\")[0],{text:qrNum,width:scope.isOldPersonModel?208:168,height:scope.isOldPersonModel?208:168,colorDark:\"#000000\",colorLight:\"#ffffff\",correctLevel:QRCode.CorrectLevel.H})}me.resetScroll()},initCloneCode:function(){var me=this,el=me.el,scope=el.scope(),qrcode;if(document.getElementById(\"cloneqrcode\")&&scope.cloudQrCode){document.getElementById(\"cloneqrcode\").innerHTML=\"\";qrcode=new QRCode(document.getElementById(\"cloneqrcode\"),{text:scope.cloudQrCode,width:250,height:250,colorDark:\"#000000\",colorLight:\"#ffffff\",correctLevel:QRCode.CorrectLevel.H})}},getOrganConfigInfo:function(organId){var me=this,scope=me.el.scope(),defer=new $Defer;$sys.showLoading();me.service.getOrganConfig(organId).then(function(res){$sys.hideLoading();defer.resolve(res)}).fail(function(e){$sys.hideLoading();defer.reject(e)});return defer.promise},showElecInvoiceFunc:function(){var me=this,scope=me.scope();if(scope.invoiceUrl){$sys.goLink(scope.invoiceUrl)}else{$sys.openModule({url:\"eh.wx.health.payment.ElecInvoice\",cache:me.popovers,title:\"\u7535\u5b50\u7968\u636e\"}).then(function(popover){})}},showElecInvoiceQrcodeFunc:function(){var me=this,scope=me.scope();$sys.openModule({url:\"eh.wx.health.payment.ElecInvoiceQrcode\",cache:me.popovers,title:\"\u7535\u5b50\u7968\u636e\",manualLoading:!0}).then(function(popover){popover.module.initElecInvoiceQrcode(scope.invoiceCode)})},showQrcodeFunc:function(){var me=this,scope=me.el.scope(),params={qrcodeStr:scope.regQrCode,isBase64:!0};$sys.openModule({url:\"eh.wx.health.payment.showQrcodePage\",cache:me.popovers}).then(function(popover){popover.module.initQrcode(params)})},getQrcode:function(detail){var me=this,scope=me.el.scope(),defer=new $Defer,recode=detail.appointRecord;$sys.showLoading();me.service.getBillByBusOrderNo(recode.organId,detail.patient.mpiId,recode.appointRecordId).then(function(res){me.refresh(function($scope){$scope.regQrCode=res||\"\"});$sys.hideLoading();defer.resolve(res)}).fail(function(e){$sys.hideLoading();defer.reject(e)});return defer.promise},refundApply:function(){var me=this,scope=me.el.scope();$sys.showMsg({title:\"\u53d6\u6d88\u9884\u7ea6\u5e76\u53d1\u8d77\u9000\u8d39\u7533\u8bf7\",template:scope.organInfo.refundApplyText,cssClass:\"default\",buttons:[{text:\"\u53d6\u6d88\",type:\"button-default\"},{text:\"\u786e\u5b9a\",type:\"button-positive\",onTap:function(){$sys.showLoading();me.service.applyAppointRecordRefund(scope.appointId).then(function(res){$sys.hideLoading();$sys.showMsg({title:\"\u9000\u8d39\u7533\u8bf7\u6210\u529f\",template:res||\"\",cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\",onTap:function(){me.getSourceAppointDetail(scope.appointId)}}]})}).fail(function(e){$sys.hideLoading();if(e.code==609){$sys.showMsg({title:\"\u9000\u8d39\u7533\u8bf7\u5931\u8d25\",template:e.msg||\"\",cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\"}]})}else{$sys.showFail(e)}})}}]})},queryRefundStatus:function(){var me=this,scope=me.el.scope(),applyStatus,applyStatusInfo=[\"\u60a8\u7684\u8d39\u7528\u6b63\u5728\u5ba1\u6838\u4e2d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\uff01\",\"\u4f60\u7684\u8d39\u7528\u5df2\u5ba1\u6838\u901a\u8fc7\uff0c\u7a0d\u540e\u4f1a\u539f\u8def\u9000\u56de\uff0c\u8bf7\u60a8\u6ce8\u610f\u67e5\u770b\uff01\",\"\u60a8\u7684\u8d39\u7528\u5ba1\u6838\u4e0d\u901a\u8fc7\uff0c\u8bf7\u81f3\u7ebf\u4e0b\u529e\u7406\u9000\u8d39\",\"\u6302\u53f7\u8d39\u7528\u5df2\u9000\u56de\u60a8\u7684\u8d26\u6237\u3002\"];$sys.showLoading();me.service.queryAppointRefundStatus(scope.appointId).then(function(res){$sys.hideLoading();if(res&&res.length){applyStatus=res[0].applyStatus;$sys.showMsg({title:res[0].applyStatusText||\"\",template:res[0].applyStatusMessage||applyStatusInfo[applyStatus]||\"\",cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\",onTap:function(){if(applyStatus==1){me.getSourceAppointDetail(scope.appointId)}}}]})}else{$sys.showMsg(\"\u6682\u672a\u67e5\u8be2\u5230\u5ba1\u6838\u8fdb\u5ea6\")}}).fail(function(e){$sys.hideLoading();$sys.showFail(e)})},goTongueConsult:function(){var me=this,scope=me.el.scope();history.replaceState($apply({},{title:\"\u6211\u7684\u9884\u7ea6\u5355\"},history.state),null,me.funcUrlDel(\"module\"));$sys.goLink(scope.tongueConsultUrl)},funcUrlDel:function(){var me=this,scope=me.el.scope(),wLocal=window.location,baseUrl=wLocal.origin+wLocal.pathname+\"?\",query=wLocal.search.substr(1);var obj={};obj[\"module\"]=\"appoint\";obj[\"aid\"]=scope.appointId;var arr=query.split(\"&\");for(var i=0;i<arr.length;i++){arr[i]=arr[i].split(\"=\");if(arr[i][0]==\"module\"||arr[i][0]==\"aid\"){continue}obj[arr[i][0]]=arr[i][1]}var url=baseUrl+JSON.stringify(obj).replace(/[\\\"\\{\\}]/g,\"\").replace(/\\:/g,\"=\").replace(/\\,/g,\"&\");return url},doHandle:function(args){var me=this,appointId,scope=me.el.scope(),requestDate=new Date;me.weiningBack=!1;$sys.hideLoading();if(args.paySource==-1){scope.showErrorMsg=!0}else if(args.paySuccessFlag==1){scope.paySuccessCallbackFlag=!0;if($env.isAlipay&&($env.ngariMiniAppForWeb||$env.ngariWeApp)){$emitter.on(\"apiReady\",function(){$sys.api.aliSuccessLog(\"\u6302\u53f7\u7f34\u8d39\",requestDate)})}}if($env.hybrid&&$env.appkey==\"zzrmyy\"){me.weiningBack=!0}if($env.isAlipay&&$env.ngariMiniAppForWeb){if(scope.sourcePage==\"appointApply\"||scope.sourcePage==\"pay\"||document.referrer&&document.referrer.indexOf($env.weiNingUrl)>-1||$env.fromWeiNing){window.onbeforeunload=function(e){$sys.api.goIndex()};window.onunload=function(){$sys.api.goIndex()}}}scope.isPayBtnShow=!($env.getCookie(\"appkey\")==\"aliAppointDetail\"||$env.appkey==\"jins_jiankt\"||me.isHSRMHsp&&$env.isWeixin);scope.args=args;scope.source=\"\";appointId=args.aid;$AppContext.WXApp.isFromYc=args&&args.pageSource==\"pageYC\"?(!0,document.title=me.title):!1;appointId&&(args.special==\"1\"?me.getSpecialAppointDetail(appointId,args.evaflag):me.getSourceAppointDetail(appointId,args.evaflag))},emitBack:function(e){var me=this,scope=me.el.scope(),status=scope.item&&(scope.item.appointRecord&&scope.item.appointRecord.appointStatus||scope.item.appointStatus),record=scope.item&&scope.item.appointRecord&&scope.item.appointRecord.recordType;clearInterval(me.processTimer);scope.clickAlreadyPay=!0;scope.$apply();if(e){scope.useModal&&scope.useModal.remove();clearInterval(scope.scrollTipTimer);clearInterval(scope.appointTimer);me.emit(\"updateGuidance\");scope.isGoPaymentRecord=!0;scope.isRefreshDetail=!0;if($env.isAlipay&&$env.ngariMiniAppForWeb){if(scope.sourcePage==\"appointApply\"||scope.sourcePage==\"pay\"){$sys.api.goIndex()}}}if(me.weiningBack){$env.callNativeMethod.apply(me,[\"api_closeWindow\"])}else if(e&&(scope.source==\"remoteClinic\"||scope.source==\"pay\"&&(status==2||status==6))){$emitter.emit(\"indexGoIndex\")}else{e&&!scope.noRefresh&&me.emit(\"updateList\",scope.rType);if(scope.source==\"appointListrecord\"&&!e){document.title=record!=2?\"\u6211\u7684\u6302\u53f7\u5355\":\"\u6211\u7684\u9884\u7ea6\u5355\";$env.isIOS&&$sys.iosTitleReset()}}},getJumpStatus:function(){var me=this,scope=me.el.scope();scope.clickAlreadyPay=!0;scope.$apply()},getCoronAssessUrl:function(){var me=this,scope=me.el.scope(),param={aid:scope.appointId,appointDepartCode:scope.item.appointRecord.appointDepartId,organId:scope.item.appointRecord.organId,mpiId:scope.item.patient.mpiId},defer=new $Defer;ngari.rmi.serviceAdapter.bindMethod({useHttpHeader:!0,beanName:\"appoint.askQuestionConfigService\",method:\"getNgariFormByBusType\"})(\"appointDetail\",null,scope.item.appointRecord.organId,param).then(function(res){defer.resolve(res)}).fail(function(e){$sys.showFail(e);scope.clickAlreadyPay=!0;scope.$applyAsync()});return defer.promise},signIn:function(){var me=this,scope=me.scope();if(scope.canCheckInDistinceRange<0){$sys.showMsg({template:\"\u5f88\u62b1\u6b49\uff0c\u533b\u9662\u6682\u4e0d\u652f\u6301\u7ebf\u4e0a\u7b7e\u5230\uff0c\u8bf7\u524d\u5f80\u81ea\u52a9\u673a\u6216\u5c31\u8bca\u79d1\u5ba4\u7b7e\u5230\u5904\u7b7e\u5230\uff0c\u7b7e\u5230\u540e\u53ef\u8fdb\u5165\u53eb\u53f7\u961f\u5217\uff0c\u7b49\u5f85\u5c31\u8bca\u3002\",cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\"}]})}else if(scope.canCheckInDistinceRange==0){me.doCheckIn(null,null)}else{me.getLocation().then(function(res){me.doCheckIn(+res.longitude||+res.data.longitude,+res.latitude||+res.data.latitude)}).fail(function(e){e.errMsg==\"getLocation:cancel\"?$sys.showMsg({template:\"\u5f88\u62b1\u6b49\uff0c\u7ebf\u4e0a\u7b7e\u5230\u9700\u8981\u83b7\u53d6\u5b9a\u4f4d\uff0c\u8bf7\u5148\u540c\u610f\u6388\u6743\u5730\u7406\u4f4d\u7f6e\",cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\"}]}):$sys.showFail()})}},doCheckIn:function(longitude,latitude){var me=this,scope=me.el.scope(),param,record=scope.item.appointRecord;param={cardId:record.cardId,cardType:record.cardType||record.healthCardType,latitude:latitude,longitude:longitude,mpiId:record.mpiid,organId:record.organId,signType:0,appointRecordId:record.appointRecordId,medicalInsuranceSupport:record.appointRecordExt&&record.appointRecordExt.medicalInsuranceSupport||\"\",ghxh:record.organAppointId,yyxh:record.appointId};$sys.showLoading();me.service.signInRequestToHis(param).then(function(res){$sys.hideLoading();if(res.code==200){$sys.showMsg(\"\u7b7e\u5230\u53d6\u53f7\u6210\u529f\",!0,\"toast tickIcon\");setTimeout(function(){me.getSourceAppointDetail(scope.appointId)},1e3)}else if(res.code==-1){$sys.showMsg({template:scope.callNumBeyondDistanceInfo,cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\"}]})}else{$sys.showMsg(res.msg)}}).fail(function(e){$sys.hideLoading();$sys.showFail(e)})},goParkingReservation:function(){var me=this,scope=me.el.scope(),record=scope.item.appointRecord,url,params;if(scope.item.stopCar){url=\"eh.wx.health.parkingReservation.ParkingOrderList\";params={organId:record.organId,organIdText:record.organIdText}}else{url=\"eh.wx.health.parkingReservation.ParkingReservation\";params={organId:record.organId,organIdText:record.organIdText,mobile:record.linkTel,workDate:record.workDate,appointRecordId:record.appointRecordId,id:scope.item.stopCar,visitorName:scope.item.patient.patientName}}$sys.openModule({title:\"\u505c\u8f66\u9884\u7ea6\",cache:me.popovers,destroy:!0,url:url,events:{refreshAppointDetail:{callback:function(){$sys.showLoading();me.refreshDetailData()}},closeApply:{autoclose:!0,callback:function(){me.fireEvent(\"closeApply\")}}}}).then(function(p){p.module.initScope(params,\"userAppointDetail\")})}});", "size":74183, "mimeType":"application/javascript"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:09 GMT"}, {"name":"Content-Type", "value":"application/javascript"}, {"name":"Content-Length", "value":"19767"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Server", "value":"openresty"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Last-Modified", "value":"Thu, 13 Apr 2023 11:17:22 GMT"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"via", "value":"CHN-BJ-SSPfz3-CACHE2[3],CHN-BJ-SSPfz3-CACHE5[0,TCP_HIT,2],CHN-TJ-GLOBAL1-CACHE58[5],CHN-TJ-GLOBAL1-CACHE62[0,TCP_HIT,0]"}, {"name":"x-hcs-proxy-type", "value":"1"}, {"name":"X-CCDN-CacheTTL", "value":"1728000"}, {"name":"nginx-hit", "value":"1"}, {"name":"Age", "value":"705977"}, {"name":"Accept-Ranges", "value":"bytes"}, {"name":"Access-Control-Allow-Origin", "value":"*"}, {"name":"Access-Control-Allow-Methods", "value":"GET, POST, OPTIONS"}, {"name":"Access-Control-Allow-Credentials", "value":"true"}, {"name":"Access-Control-Allow-Headers", "value":"*"}]}, "startedDateTime":"2023-04-21T23:25:08.8299036+08:00", "cache":{}}, {"time":72, "serverIPAddress":"59.109.99.216", "connection":"ClientPort:54040;EgressPort:54058", "request":{"headersSize":743, "postData":{"text":"", "mimeType":""}, "queryString":[], "headers":[{"name":"Host", "value":"weixinnode.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"Accept", "value":"*/*"}, {"name":"Sec-Fetch-Site", "value":"same-site"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":0, "url":"https://weixinnode.ngarihealth.com/weixin/eh/wx/health/person/UserAppointDetail-e3e26168.html", "cookies":[], "method":"GET", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":20, "receive":0, "wait":28, "dns":0, "send":0, "connect":44}, "response":{"headersSize":619, "bodySize":50488, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":0, "text":"<div class=\"userappointdetail\" ng-class=\"{'appointDetail-oldStyle': isOldPersonModel}\">\n    <ion-content delegate-handle=\"myAppointintScroll\" ng-style=\"{'bottom':!detailFalg&&hasBtnWrapChild && canShowTongueConsultBtn? '136px' : (!detailFalg&&hasBtnWrapChild || canShowTongueConsultBtn) ? '68px':'0px'}\">\n        <ion-refresher refreshing-icon=\"loading-na\" disable-pulling-rotation=\"true\" pulling-icon=\"loading-na\"\n                       on-refresh=\"refreshDetail()\"></ion-refresher>\n        <!--\u663e\u793a\u4fe1\u606f  \u7279\u9700detailFalg == 1; \u6302\u53f7 detailFalg == 0-->\n        <!-- \u6302\u53f7\u9884\u7ea6 -->\n        <div class=\"pulldownNotice\"\n             ng-if=\"item.appointRecord.appointStatus == 8 || item.appointRecord.appointStatus == 9 || item.appointRecord.appointStatus == 11 || zeroRegStatus\">\n            <i></i>\u8bf7\u4e0b\u62c9\u5237\u65b0\u6700\u65b0\u72b6\u6001\n        </div>\n        <!-- \u9884\u7ea6\u5931\u8d25\u9876\u90e8\u6eda\u52a8\u6761 -->\n        <div class=\"scrollTip mui-flex\" ng-if=\"showCancelScrollTip\">\n            <div class=\"tip-box\"><span class=\"bd cell\">{{appointStatusObj.statusTitleDesc}}</span></div>\n            <span class=\"tip-close\" ng-click=\"closeTip()\"></span>\n        </div>\n        <div class=\"appointFail\" ng-if=\"item.appointRecord.appointStatus == 2 && item.appointRecord.cancelType == 4 && !showCancelScrollTip\"></div>\n        <div class=\"detail_box\" ng-if=\"!detailFalg\">\n            <!-- \u9884\u7ea6\u6302\u53f7\u72b6\u6001\u533a\u57df -->\n            <div class=\"appointStatusBar\">\n                <div class=\"title-wrap\">\n                    <div class=\"title\" ng-class=\"{'titleColor': jinJiangUi}\">{{appointStatusObj.statusTitle}}</div>\n                    <div class=\"restTime\" ng-if=\"showPayRestTime\">\n                        \u5269\u4f59:<span>{{restMinute}}</span>\u5206<span>{{restSecond}}</span>\u79d2\n                    </div>\n                </div>\n                <div class=\"secondStatus\" ng-if=\"organInfo.AppointDetailShowSmallTitle && appointStatusObj.secondStatus\">{{appointStatusObj.secondStatus}}</div>\n                <div class=\"titleDesc\"\n                     ng-class=\"{'titleDesc1': appointStatusObj.secondStatus, 'titleDesc_more': titleDescFold != undefined && titleDescLines > 3, 'titleDesc_fold': titleDescFold, 'titleDesc_all': titleDescFold != undefined && !titleDescFold, 'titleDescFontRed': isFontRed}\"\n                     ng-if=\"appointStatusObj.statusTitleDesc||appointStatusObj.statusTitleDescPlus\"\n                     ng-click=\"showAllTitleDesc()\">\n                    <span>{{appointStatusObj.statusTitleDesc}}</span>\n                    <span ng-if=\"appointStatusObj.statusTitleDescPlus\"></br>{{appointStatusObj.statusTitleDescPlus}}</span>\n                </div>\n            </div>\n            <!--\u6b63\u5e38\u663e\u793a\u9884\u7ea6\u8be6\u60c5\u5355ui-->\n            <div class=\"{{'newAppointDetail-box_'+titleDescLines}}\" ng-class=\"{'noDesc': appointStatusObj.secondStatus && appointStatusObj.statusTitleDesc == null}\" ng-if=\"!item.appointRecord.statusName && !appointFailShow\">\n                <div class=\"appoint_box_list appoint_box_list_new\" ng-class=\"{'appoint_box_list_bg_red': isFontRed}\">\n                    <div class=\"waiting\">\n                        <div class=\"oldTimeTitle\" ng-if=\"isOldPersonModel\">\u5019\u8bca\u65f6\u95f4\uff1a</div>\n                        <div>\n                            {{waitingTimeInfo}}<span class=\"order-num\" ng-if=\"showOrderNumber\">{{item.appointRecord.orderNumStr || item.appointRecord.orderNum}}\u53f7</span>\n                        </div>\n                    </div>\n                    <dl>\n                        <dt>{{isBeijingHsp? '\u5c31\u8bca\u9662\u533a': '\u5c31\u8bca\u533b\u9662'}}</dt>\n                        <dd class=\"strongText\">{{item.appointRecord.organIdText}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u5c31\u8bca\u79d1\u5ba4</dt>\n                        <dd>{{item.appointRecord.appointDepartName}}</dd>\n                    </dl>\n                    <dl ng-if=\"!item.doctor.jobNumber || (item.doctor.jobNumber && item.doctor.jobNumber.slice(0, 3) != 'PT_')\">\n                        <dt>\u5c31\u8bca\u533b\u751f</dt>\n                        <dd>{{item.doctor.name + ' ' + item.doctor.proTitleText}}\n                        </dd>\n                    </dl>\n                    <dl ng-if=\"!sourceLevelToPay\">\n                        <dt>\u95e8\u8bca\u7c7b\u578b</dt>\n                        <dd><span id=\"visitTypeClass\">{{showSourceLevelText}}</span>\n                            <!--\u4f18\u60e0\u540e\u7684\u4ef7\u683c\u4e0d\u5b58\u5728            \u53ea\u663e\u793a\u539f\u4ef7\n                                \u4f18\u60e0\u540e\u7684\u4ef7\u683c\u5b58\u5728  \u4e14\u7b49\u4e8e\u539f\u4ef7  \u53ea\u663e\u793a\u539f\u4ef7\n                                \u4f18\u60e0\u540e\u7684\u4ef7\u683c\u5b58\u5728  \u4e0d\u7b49\u4e8e\u539f\u4ef7  \u663e\u793a\u539f\u4ef7 \u548c\u4f18\u60e0\u540e\u7684\u4ef7\u683c-->\n                            <span ng-if=\"preBill != undefined\">\n                              <span class=\"price\">{{+preBill ? +preBill + '\u5143' : zeroDisplay}}</span>\n                              <s>{{+item.appointRecord.regAmt ? +item.appointRecord.regAmt + '\u5143' : zeroDisplay}}</s>\n                            </span>\n                            <span class=\"price\" ng-if=\"preBill == undefined\">{{+item.appointRecord.regAmt || +item.appointRecord.clinicPrice ? (+item.appointRecord.regAmt || +item.appointRecord.clinicPrice) + '\u5143' : zeroDisplay}}</span>\n                        </dd>\n                    </dl>\n                    <dl ng-if=\"organInfo.scheduleDescLabel != null && item.scheduleDesc\">\n                        <dt>{{organInfo.scheduleDescLabel}}</dt>\n                        <dd>{{item.scheduleDesc}}</dd>\n                    </dl>\n                    <dl ng-if=\"sourceLevelToPay\">\n                        <dt>\u6302\u53f7\u8d39\u7528</dt>\n                        <dd>\n                            <!--\u4f18\u60e0\u540e\u7684\u4ef7\u683c\u4e0d\u5b58\u5728            \u53ea\u663e\u793a\u539f\u4ef7\n                                \u4f18\u60e0\u540e\u7684\u4ef7\u683c\u5b58\u5728  \u4e14\u7b49\u4e8e\u539f\u4ef7  \u53ea\u663e\u793a\u539f\u4ef7\n                                \u4f18\u60e0\u540e\u7684\u4ef7\u683c\u5b58\u5728  \u4e0d\u7b49\u4e8e\u539f\u4ef7  \u663e\u793a\u539f\u4ef7 \u548c\u4f18\u60e0\u540e\u7684\u4ef7\u683c-->\n                            <div ng-if=\"preBill != undefined && preBill != regAmt\">\n                                <em class=\"price\">{{+preBill ? +preBill + '\u5143' : zeroDisplay}}</em>\n                                <s>{{+regAmt ? +regAmt + '\u5143' : zeroDisplay}}</s>\n                            </div>\n                            <em class=\"price\" ng-if=\"preBill == undefined || preBill != undefined && preBill == regAmt\">\n                                {{+item.appointRecord.regAmt || +item.appointRecord.clinicPrice ? (+item.appointRecord.regAmt || +item.appointRecord.clinicPrice) + '\u5143' : zeroDisplay}}\n                            </em>\n                        </dd>\n                    </dl>\n                    <dl ng-if=\"item.appointRecord.confirmClinicAddr\" ng-class=\"{'showLocationDl': showAddrLocationFlag}\">\n                        <dt>\u5c31\u8bca\u5730\u70b9</dt>\n                        <dd class=\"alignLeft\" ng-class=\"{'showLocationBox': showAddrLocationFlag, 'addrLocation': showAddrLocationFlag, 'strongText': !showAddrLocationFlag && showAddrLocationFlag != null}\">\n                            <div>{{shSixHospital && item.address ? item.address + ' ' : ''}}{{item.appointRecord.confirmClinicAddr}}</div>\n                            <div id=\"appointAddr\" class=\"addrLocation appointAddrLocation\" ng-show=\"showAddrLocationFlag\"></div>\n                        </dd>\n                    </dl>\n                    <dl ng-if=\"showNumTime\">\n                        <dt>\u53d6\u53f7\u65f6\u95f4</dt>\n                        <dd class=\"alignLeft strongText\">{{callingNumTime}}</dd>\n                    </dl>\n                    <dl ng-if=\"item.displayIllSummaryBeforeAppoint\" class=\"description arrowRight\">\n                        <dt>\u75c5\u60c5\u6982\u8981</dt>\n                        <dd ng-class=\"{'des':!rotateFlag[0]}\">\n                        <span ng-click=\"switchRotate(0)\">{{item.appointRecord.appointRecordExt.illSummaryTxt ?\n                                item.appointRecord.appointRecordExt.illSummaryTxt : item.illSummaryBeforeAppoint.length ?\n                                        '\u56fe': '\u65e0'}}</span>\n                            <div class=\"on-switch\" ng-class=\"{'onDown':rotateFlag[0]}\" ng-click=\"switchRotate(0)\"></div>\n                        </dd>\n                    </dl>\n                    <ul ng-if=\"rotateFlag[0] && item.illSummaryBeforeAppoint.length\" class=\"userCdrOtherdocs img-up\"\n                        id=\"J-userCdrOtherdocs\">\n                        <li ng-repeat=\"i in item.illSummaryBeforeAppoint\" data-index=\"{{$index}}\"><img\n                                style=\"height:{{liW}}px;\" ng-src=\"{{::getThumb(i.docContent,1,i.docContentToken)}}\"/>\n                        </li>\n                    </ul>\n                    <dl ng-if=\"item.replaceDoctorId\">\n                        <dt>\u66ff\u8bca\u533b\u751f</dt>\n                        <dd class=\"txt-noWrap arrowRight\" ng-click=\"goDoctorIndex(item.replaceDoctorId)\">\n                            {{item.replaceAppointDepartName}} {{item.replaceAppointDoctorName}} {{item.replaceDoctorProTitle}}\n                        </dd>\n                    </dl>\n                    <div class=\"patient-block\">\n                        <dl>\n                            <dt>\u5c31\u8bca\u4eba</dt>\n                            <dd>\n                                <span>{{item.patient.patientName}}</span>\n                                <span ng-if=\"organInfo.showPatientType && item.appointRecord && item.appointRecord.appointRecordExt\">{{' ' + item.appointRecord.appointRecordExt.hisMedInsureTypeName}}</span>\n                            </dd>\n                        </dl>\n                        <dl ng-if=\"barcodeId && organInfo.appointDetailHealthcardDisplay\" class=\"patCard\" data-eventId=\"weixin_userappointdetail_showcardinfo_ck\" data-eventName=\"\u8be6\u60c5\u9875-\u67e5\u770b\u5361\u4fe1\u606f\">\n                            <dt>{{isHRFY ? '\u5c31\u8bca\u7c7b\u578b' : item.appointRecord.cardType == '4' ? switchCardName ? '\u5065\u5eb7\u7801\u53f7' : '\u5065\u5eb7\u5361\u53f7' : isZJFC ? '\u75c5\u6848\u53f7' : '\u5c31\u8bca\u5361\u53f7'}}</dt>\n                            <dd class=\"txt-noWrap newappointTip wordBreak wx-label-wrap\" ng-class=\"{'arrowRight': !shSixHospital && !isOldPersonModel}\"\n                                ng-if=\"item.appointRecord.cardType != '4'\" ng-click=\"showBarcodeInfo()\">\n                                <span>{{barcodeId}}<i ng-if=\"item.healthCardName && organInfo.CardNameShow\">\uff08{{item.healthCardName}}\uff09</i></span>\n                                <span class=\"detailCard cardone\" ng-if=\"showCardTypeTip\" ng-class=\"{'cardTwo':shSixHospital && item.appointRecord && item.appointRecord.medInsureCarId}\">{{item.appointRecord && item.appointRecord.medInsureCarId ? ' \u533b\u4fdd\u5361' : ' \u81ea\u8d39\u5361'}}</span>\n                            </dd>\n                            <dd class=\"txt-noWrap\" ng-class=\"{'arrowRight': !shSixHospital && !isOldPersonModel}\" ng-if=\"item.appointRecord.cardType == '4'\"\n                                ng-click=\"showElecHealthCardInfo()\">{{ switchCardName ? '\u7535\u5b50\u5065\u5eb7\u7801' : '\u7535\u5b50\u5065\u5eb7\u5361' }}\n                            </dd>\n                            <div class=\"cardTipMagContainer\" ng-if=\"item.activationSignText && item.appointRecord.cardType!=4\" ng-click=\"closeCardTip($event)\"><i class=\"msgTop\"></i><div class=\"tipContent\">{{ item.activationSignText }}</div> <i class=\"msgClose\"></i></div>\n                        </dl>\n                        <dl ng-if=\"isZiGongFourthHsp && item.appointRecord && item.appointRecord.clinicMzId != null\">\n                            <dt>\u95e8\u8bca\u53f7</dt>\n                            <dd>{{item.appointRecord.clinicMzId}}</dd>\n                        </dl>\n                    </div>\n                    <div class=\"patient-block\" style=\"margin-top: 10px;\" ng-if=\"cloudQrCode\">\n                        <dl>\n                            <dt>\u667a\u6167\u4e91\u8bca</dt>\n                            <dd class=\"txt-noWrap arrowRight\" ng-click=\"showCloneMZ()\">\u70b9\u51fb\u67e5\u770b\u4e91\u8bca\u7801\n                            </dd>\n                        </dl>\n                    </div>\n                </div>\n                <div class=\"appoint_box_list appoint_box_list_new\" ng-if=\"item.appointRecord.appointStatus == 5 && item.recordPayInfos\">\n                    <dl ng-if=\"item.appointRecord.paymentDate\">\n                        <dt>\u652f\u4ed8\u65f6\u95f4</dt>\n                        <dd>{{ item.appointRecord.paymentDate }}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u603b\u989d</dt>\n                        <dd>\uffe5{{ item.recordPayInfos.regAmt }}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u4f18\u60e0\u91d1\u989d</dt>\n                        <dd>-\uffe5{{ item.recordPayInfos.couponPrice }}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u5b9e\u9645\u652f\u4ed8</dt>\n                        <dd>\uffe5{{ item.recordPayInfos.clinicPrice }}</dd>\n                    </dl>\n                </div>\n                <div class=\"appoint_box_list coronavirusTimeBox\" ng-if=\"showCoronavirusAssessTimeFlag\">\n                    <div>\n                        <span class=\"coronavirusTimeTitle\">\u6700\u8fd1\u6d41\u8c03\u8868\u586b\u5199\u65f6\u95f4<br/></span>\n                        <span class=\"coronavirusTimeTxt\">{{coronavirusUpdateTime}}</span>\n                    </div>\n                    <div class=\"coronavirusTimeBtn\" ng-if=\"isInTimeFlag\">24\u5c0f\u65f6\u5185<br/>\u5df2\u5b8c\u6210</div>\n                    <div class=\"coronavirusTimeBtn coronavirusTimeBtnGray\" ng-if=\"!isInTimeFlag\">>24\u5c0f\u65f6<br/>\u672a\u5b8c\u6210</div>\n                </div>\n                <div class=\"queue-box\" ng-if=\"item.appointRecord.takeNumberOnLine && item.appointRecord.takeNumber == null\">\n                    <dl>\n                        <dt>\u60a8\u5c1a\u672a\u7b7e\u5230\uff0c\u8bf7\u5148\u7b7e\u5230\u83b7\u53d6\u6392\u961f\u53f7</dt>\n                        <dd ng-click=\"signIn()\">\u5728\u7ebf\u7b7e\u5230</dd>\n                    </dl>\n                </div>\n                <div class=\"queue-box\" ng-if=\"item.stopCar != null\">\n                    <dl>\n                        <dt>\u5c31\u8bca\u5f53\u65e5\u5982\u9700\u505c\u8f66\uff0c\u53ef\u63d0\u524d\u9884\u7ea6</dt>\n                        <dd ng-click=\"goParkingReservation()\">{{ item.stopCar ? '\u5df2\u9884\u7ea6' : '\u7acb\u5373\u9884\u7ea6' }}</dd>\n                    </dl>\n                </div>\n                <div class=\"appoint_box_list appoint_box_list_new\" ng-if=\"item.appointRecord.takeNumberOnLine && item.appointRecord.takeNumber != null\">\n                    <dl>\n                        <dt>\u6392\u961f\u53f7</dt>\n                        <dd style=\"color: #4289FF\">{{item.appointRecord.takeNumber}}</dd>\n                    </dl>\n                </div>\n                <div class=\"appointConsultBanner\" style=\"margin-bottom:10px\" ng-if=\"banner && !isOldPersonModel\" ng-click=\"goConsult()\" data-eventId=\"weixin_userappointdetail_consult_ck\" data-eventName=\"\u8be6\u60c5\u9875-\u53d6\u6d88\u540e\u54a8\u8be2\u5f15\u6d41\">\n                    <div class=\"inner\">\n                        <img src=\"{{banner}}\">\n                    </div>\n                </div>\n                <div class=\"appoint_box_list\" ng-if=\"regQrCode\">\n                    <dl>\n                        <dt class=\"txtLong\">\u67e5\u770b\u7535\u5b50\u7968\u636e</dt>\n                        <dd class=\"txtRight arrowRight txtNull\" ng-click=\"showQrcode()\"><i></i></dd>\n                    </dl>\n                </div>\n\n                <div class=\"appoint_box_list\" ng-if=\"(electronicInvoiceSwitch == 1 || electronicInvoiceSwitch == 3) && (invoiceUrl || invoiceCode)\">\n                    <dl ng-if=\"invoiceUrl\">\n                        <dt class=\"txtLong\">\u7535\u5b50\u7968\u636e\u9884\u89c8\uff1a</dt>\n                        <dd class=\"txtRight arrowRight txtNull\" ng-click=\"showEInvoice()\"><i></i></dd>\n                    </dl>\n                    <dl ng-if=\"invoiceCode\">\n                        <dt class=\"txtLong\">\u4e0b\u8f7d\u7535\u5b50\u7968\u636e\uff1a</dt>\n                        <dd class=\"txtRight arrowRight txtNull\" ng-click=\"showElecInvoiceQrcode()\"><i></i></dd>\n                    </dl>\n                </div>\n                <div class=\"appoint_box_list\"\n                     ng-if=\"item.appointRecord.appointRecordExt && item.appointRecord.appointRecordExt.appointDetailQrNum && organInfo.appointDetailMzCardDisplay && (!showMedInsureEntry || organInfo.appointDetailMzCardDisplay != 1 || item.healthCardType != 2)\">\n                    <div class=\"bar-info\">\n                        <p class=\"sec\">{{clinicMzIdTips}}</p>\n                        <p class=\"card-text\" ng-if=\"!isZiGongFourthHsp\">\n                            <span ng-if=\"item.appointRecord.appointRecordExt.clinicMzIdName\">{{item.appointRecord.appointRecordExt.clinicMzIdName}}:</span>\n                            <span>{{item.appointRecord.appointRecordExt.appointDetailQrNum}}</span>\n                        </p>\n                        <div class=\"barCodeBox\" ng-if=\"!isZiGongFourthHsp\">\n                            <div id=\"barCode\" class=\"barCode barcode2\"></div>\n                        </div>\n                        <div class=\"qr-code\">\n                            <div id=\"qrcode\"></div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"appoint_box_list\" ng-if=\"showMedInsureEntry && organInfo.appointDetailMzCardDisplay == 1 && item.healthCardType == 2\">\n                    <div class=\"bar-info\">\n                        <p class=\"card-text\">\u8bf7\u70b9\u51fb\u4e0b\u65b9\u6309\u94ae\u4f7f\u7528\u6216\u6253\u5f00\u968f\u7533\u529eAPP\uff0c</br>\u5c55\u793a\u201c\u533b\u4fdd\u7535\u5b50\u51ed\u8bc1\u201d</p>\n                        <div class=\"card-button\" ng-click=\"goInsuranceCard()\">\u70b9\u51fb\u5c55\u793a\u7535\u5b50\u533b\u4fdd\u51ed\u8bc1</div>\n                    </div>\n                </div>\n            </div>\n            <!--\u9700\u6c42\u7f16\u53f7 21837\u3010\u4e0a\u6d77\u5e02\u4e2d\u533b\u533b\u9662\u3011\u9884\u7ea6\u5931\u8d25 \u53ea\u663e\u793a\u5c31\u8bca\u4eba\u548c\u5c31\u8bca\u5361\u4fe1\u606f \u5176\u4ed6\u7684\u9690\u85cf\u4e0d\u5c55\u793a-->\n            <div class=\"{{'newAppointDetail-box_'+titleDescLines}}\" ng-if=\"!item.appointRecord.statusName && appointFailShow\">\n                <div class=\"appoint_box_list appoint_box_list_new\" ng-class=\"{'appoint_box_list_bg_red': isFontRed}\">\n                    <div class=\"patient-block\" style=\"border: none\">\n                        <dl>\n                            <dt>\u5c31\u8bca\u4eba</dt>\n                            <dd>\n                                <span>{{item.patient.patientName}}</span>\n                                <span ng-if=\"organInfo.showPatientType && item.appointRecord && item.appointRecord.appointRecordExt\">{{' ' + item.appointRecord.appointRecordExt.hisMedInsureTypeName}}</span>\n                            </dd>\n                        </dl>\n                        <dl ng-if=\"barcodeId && organInfo.appointDetailHealthcardDisplay\" data-eventId=\"weixin_userappointdetail_showcardinfo_ck\" data-eventName=\"\u8be6\u60c5\u9875-\u67e5\u770b\u5361\u4fe1\u606f\">\n                            <dt>{{item.appointRecord.cardType == '4' ? switchCardName ? '\u5065\u5eb7\u7801\u53f7' : '\u5065\u5eb7\u5361\u53f7' : isZJFC ? '\u75c5\u6848\u53f7' : '\u5c31\u8bca\u5361\u53f7'}}</dt>\n                            <dd class=\"txt-noWrap newappointTip wordBreak\" ng-class=\"{'arrowRight': !shSixHospital && !isOldPersonModel}\"\n                                ng-if=\"item.appointRecord.cardType != '4'\" ng-click=\"showBarcodeInfo()\">\n                                <span>{{barcodeId}}<i ng-if=\"item.healthCardName && organInfo.CardNameShow\">\uff08{{item.healthCardName}}\uff09</i></span>\n                                <span class=\"detailCard cardone\" ng-if=\"showCardTypeTip\" ng-class=\"{'cardTwo': shSixHospital && item.appointRecord && item.appointRecord.medInsureCarId}\">{{item.appointRecord && item.appointRecord.medInsureCarId ? ' \u533b\u4fdd\u5361' : ' \u81ea\u8d39\u5361'}}</span>\n                            </dd>\n                            <dd class=\"txt-noWrap\" ng-if=\"item.appointRecord.cardType == '4'\"\n                                ng-click=\"showElecHealthCardInfo()\" ng-class=\"{'arrowRight': !shSixHospital && !isOldPersonModel}\">{{ switchCardName ? '\u7535\u5b50\u5065\u5eb7\u7801' : '\u7535\u5b50\u5065\u5eb7\u5361' }}\n                            </dd>\n                        </dl>\n                    </div>\n                </div>\n            </div>\n\n            <!-- \u95e8\u8bca\u6709\u53f7\u9884\u7ea6 \u95e8\u8bca\u6709\u53f7\u9884\u7ea6-->\n            <div class=\"{{'newAppointDetail-box_'+titleDescLines}}\" ng-if=\"item.appointRecord.statusName == 'doc'\">\n                <div class=\"appoint_box_list appoint_box_list_new\">\n                    <div class=\"waiting\">\n\n                        {{\n                            item.preciseAppointmentTime\n                            ? item.preciseAppointmentTime\n                            : (\n                                item.appointRecord.recordType&&(item.appointRecord.appointStatus==2||item.appointRecord.appointStatus==9)\n                                ? ((item.appointRecord.workDate | shortTime)+' '+item.appointRecord.workTypeText)\n                                : (item.appointRecord.startTime | shortTime)\n                            )\n                        }}\n                    </div>\n                    <dl>\n                        <dt>\u5c31\u8bca\u533b\u9662</dt>\n                        <dd class=\"strongText\">{{item.appointRecord.organIdText}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u5c31\u8bca\u79d1\u5ba4</dt>\n                        <dd>{{item.appointRecord.appointDepartName}}</dd>\n                    </dl>\n                    <dl ng-if=\"!item.doctor.jobNumber || (item.doctor.jobNumber && item.doctor.jobNumber.slice(0, 3) != 'PT_')\">\n                        <dt>\u5c31\u8bca\u533b\u751f</dt>\n                        <dd>\n                            {{item.appointRecord.doctorIdText}}\n                        </dd>\n                    </dl>\n                    <dl>\n                        <dt>\u8bca\u7597\u8d39\u7528</dt>\n                        <dd><span class=\"price ml0\">{{item.appointRecord.clinicPrice+'\u5143'}}</span></dd>\n                    </dl>\n                    <dl ng-if=\"item.appointRecord.diagianName || item.cdrOtherdocs.length\"\n                        class=\"description arrowRight\">\n                        <dt>\u75c5\u60c5\u6982\u8981</dt>\n                        <dd ng-class=\"{'des':!rotateFlag[1]}\">\n                            <span ng-click=\"switchRotate(1)\">{{item.appointRecord.diagianName ? '\u521d\u6b65\u8bca\u65ad  ' + item.appointRecord.diagianName : '\u56fe'}}</span>\n                            <div class=\"on-switch\" ng-class=\"{'onDown':rotateFlag[1]}\" ng-click=\"switchRotate(1)\"></div>\n                        </dd>\n                    </dl>\n                    <ul ng-if=\"rotateFlag[1] && item.cdrOtherdocs.length\" class=\"userCdrOtherdocs img-up\"\n                        id=\"J-userCdrOtherdocs\">\n                        <li ng-repeat=\"i in item.cdrOtherdocs\" data-index=\"{{$index}}\"><img style=\"height:{{liW}}px;\"\n                                                                                            ng-src=\"{{::getThumb(i.docContent,1,i.docContentToken)}}\"/>\n                        </li>\n                    </ul>\n                    <dl ng-if=\"item.appointRecord.patientCondition\">\n                        <dt>\u8f6c\u8bca\u8bf4\u660e</dt>\n                        <dd ng-class=\"{'des':!rotateFlag[2]}\">\n                            <span ng-click=\"switchRotate(2)\">{{item.appointRecord.patientCondition}}</span>\n                            <div class=\"on-switch\" ng-class=\"{'onDown':rotateFlag[2]}\" ng-click=\"switchRotate(2)\"></div>\n                        </dd>\n                    </dl>\n                    <dl>\n                        <dt>\u7533\u8bf7\u533b\u751f</dt>\n                        <dd class=\"txt-noWrap arrowRight\" ng-click=\"goDoctorIndex(item.requestDoctor.doctorId)\">\n                            {{item.requestDoctor.name+' '+ item.requestDoctor.proTitleText}}\n                        </dd>\n                    </dl>\n                    <div class=\"patient-block\">\n                        <dl>\n                            <dt>\u5c31\u8bca\u4eba</dt>\n                            <dd class=\"flexNowarp\">\n                                <span class=\"nowarpShrink\">{{item.patient.patientName}}</span>\n                                <span class=\"nowarpNoShrink\">{{item.patient.patientSexText+'  '+item.patient.age}}</span>\n                            </dd>\n                        </dl>\n                        <dl ng-if=\"barcodeId && organInfo.appointDetailHealthcardDisplay\">\n                            <dt>{{item.appointRecord.cardType == '4' ? switchCardName ? '\u5065\u5eb7\u7801\u53f7' : '\u5065\u5eb7\u5361\u53f7' : '\u5c31\u8bca\u5361\u53f7'}}</dt>\n                            <dd class=\"txt-noWrap\" ng-class=\"{'arrowRight': !isOldPersonModel}\"\n                                ng-if=\"item.appointRecord.cardType != '4'\" ng-click=\"showBarcodeInfo()\">\n                                {{barcodeId}}<i ng-if=\"item.healthCardName && organInfo.CardNameShow\">\uff08{{item.healthCardName}}\uff09</i>\n                            </dd>\n                            <dd class=\"txt-noWrap\" ng-class=\"{'arrowRight': !isOldPersonModel}\" ng-if=\"item.appointRecord.cardType == '4'\"\n                                ng-click=\"showElecHealthCardInfo()\">{{ switchCardName ? '\u7535\u5b50\u5065\u5eb7\u7801' : '\u7535\u5b50\u5065\u5eb7\u5361' }}\n                            </dd>\n                        </dl>\n                    </div>\n                </div>\n            </div>\n            <div class=\"newAppointDetail-bottom\">\n                <!-- \u5e95\u90e8\u6587\u6848 -->\n                <div class=\"appoint-btn-wrap\"\n                     ng-if=\"appointOrderText.length && (item.appointRecord.appointStatus == 0 || item.appointRecord.appointStatus == 1 || item.appointRecord.appointStatus == 4 || item.appointRecord.appointStatus == 9)\">\n                    <div class=\"bs-text-wrap bs-txt-new\">\n                        <div class=\"title\">\u6e29\u99a8\u63d0\u9192</div>\n                        <p class=\"bs-p\" ng-repeat=\"it in appointOrderText\">{{it}}</p>\n                        <p class=\"bs-p\" ng-if=\"cancelStatus && item.appointRecord.appointStatus == 5\">\u5c31\u8bca\u5f53\u5929\u4e0d\u53ef\u53d6\u6d88\u9884\u7ea6\uff0c\u53d6\u6d88\u540e\uff0c\u5df2\u4ed8\u91d1\u989d\u6309\u539f\u4ed8\u6b3e\u65b9\u5f0f\u9000\u56de</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div ng-if=\"detailFalg\">\n            <div class=\"consultTips\" ng-if=\"item.transfer.evaStatus\">\n                <span class=\"TipsPull-center icon-bell\">{{item.transfer.evaStatusText}}</span>\n            </div>\n            <div ng-if=\"!item.transfer.evaStatus\">\n                <div class=\"consultTips\"\n                     ng-if=\"item.transfer.transferStatus==2&&item.transfer.transferResult==1&&item.transfer.connectCallNumberSystem&&!item.appointInhosp\">\n                    <p>\n                        <i></i>\n                        <span>\u82e5\u8981\u67e5\u770b\u95e8\u8bca\u5177\u4f53\u6392\u961f\u53eb\u53f7\u4fe1\u606f\uff0c\u53ef\u70b9\u51fb</span>\n                        <a class=\"btn\" id=\"J-checkCurNum\" data-eventId=\"weixin_userappointdetail_checkcurnum_ck\" data-eventName=\"\u8be6\u60c5\u9875-\u67e5\u770b\u53eb\u53f7\u6309\u94ae\">\u67e5\u770b\u53eb\u53f7</a>\n                    </p>\n                </div>\n                <dl ng-if=\"item.transfer.transferStatus == 9\" class=\"cancelAppointResean\">\n                    <dt>\u53d6\u6d88</dt>\n                    <dd><span>\u53d6\u6d88\u539f\u56e0:</span>{{item.transfer.transferStatusText}}</dd>\n                </dl>\n                <!--\u56e2\u961f \u5904\u7406\u4e2d==1 \u6216\u5ba1\u6838\u5b8c\u6210\u5e76\u63a5\u6536==2 \u663e\u793a\u56e2\u961f\u4fe1\u606f-->\n                <div class=\"tuanConsultDetail\"\n                     ng-if=\"item.doctor.teams&&(item.transfer.transferStatus==1||(item.transfer.transferStatus==2&&item.transfer.transferResult==1))\">\n                    {{item.transfer.targetDoctorText}}\n                </div>\n                <!--==\u5934\u90e8\u72b6\u6001\u63d0\u793a\u7ed3\u675f==-->\n                <!--\u533b\u751f\u6216\u4fe1\u606f\u56e2\u961f\u4fe1\u606f\u663e\u793a\u4e1a\u52a1\u6d41\u7a0b-->\n                <!--\n                \u56e2\u961f\u9884\u7ea6\u72b6\u6001\u6709\u4e09\u4e2a\u5c5e\u6027\uff1a1\uff1atransferStatus\uff0c2\uff1atransferResult\uff0c3\uff1aevaStatus \u9ed8\u8ba4\u4e3a0\uff1b\n                transferStatus\u67090~9\u4e2a\u5c5e\u6027\u503c\u3002\u5f53\u503c\u4e3a0\u548c1\u65f6\uff0c\u8868\u793a\u6ca1\u6709\u533b\u751f\u5bf9\u6b64\u9884\u7ea6\u5355\u6709\u4efb\u4f55\u64cd\u4f5c\u3002\u7528\u6237\u4e0b\u5355\u540e\uff0c\u5148\u8d700\u518d\u8d701\uff0c\u7136\u540e\u8d70\u52307\uff0c\u5f53\u62ff\u5230\u4e09\u65b9\u533b\u9662\u7684\u56de\u9988\u65f6\u503c\u4e3a2\u65f6\uff0c\u8868\u793a\u6709\u533b\u751f\u64cd\u4f5c\u4e86\u8fd9\u4e2a\u9884\u7ea6\u5355\uff0c\u6b64\u65f6transferResult\u8bde\u751f\u4e86\uff0c\u5b83\u7684\u503c\u53ef\u80fd\u662f1\uff1a\u533b\u751f\u63a5\u6536\uff1b\u4e5f\u53ef\u80fd\u662f\u503c2\uff1a\u533b\u751f\u62d2\u7edd\u3002\n                \u57282.8\u7248\u672c\uff0ctransferResult\u503c\u4e3a2\u65f6\uff0c\u8be5\u9884\u7ea6\u5355\u4e0d\u4f1a\u51fa\u73b0\u5728\u9884\u7ea6\u5355\u5217\u8868\u91cc\u3002\u4e5f\u5c31\u662f\u8bf4transferResult\u8fd4\u56de\u7684\u53ea\u4f1a\u662f1\u3002\u5230\u4e86\u9884\u7ea6\u5355\u9884\u7ea6\u65f6\u95f4\u7684\u7b2c\u4e8c\u5929\uff0cevaStatus\u7684\u503c\u4f1a\u53d8\u62101\uff08\u5f85\u8bc4\u4ef7\uff09\uff0c\u60a3\u8005\u8bc4\u4ef7\u540e\u663e\u793a2\u3002\n                -->\n                <!--\u533b\u751f\u4fe1\u606f\u663e\u793a\u548c\u540e\u7aef\u8fbe\u6210\u5171\u8bc6\uff0c\u4e2a\u4eba\u533b\u751f\u8fd4\u56dedoctor\u5b57\u6bb5\uff0c\u56e2\u961f\u533b\u751f\u7684doctor\u5b57\u6bb5\u4f5c\u4e3a\u8ffd\u8e2a\u5668\uff0c\u5f53\u65e0\u533b\u751f\u63a5\u6536\u65f6\u8fd4\u56de\u56e2\u961f\u4fe1\u606f\u3001\u6709\u533b\u751f\u63a5\u6536\u65f6\u8fd4\u56de\u5f53\u524d\u533b\u751f\u4fe1\u606f\u3001\u76f4\u81f3\u9884\u7ea6\u5355\u5b8c\u6210\u3001\u8fd4\u56de\u786e\u8bca\u533b\u751f\u4fe1\u606f-->\n                <!--\u4ee5\u4e0a\u4e1a\u52a1\u6d41\u7a0b\u548c\u5224\u65ad\u89c4\u5219 \u66f4\u4e8e2.8\u7248\u672c-->\n                <div class=\"doctTopInfoCommon doctTopInfoHaveArrow\" id=\"topdocintro\">\n                    <div class=\"photo\"><img ng-src=\"{{getAva(item.doctor)}}\"></div>\n                    <div class=\"info\">\n                        <dl>\n                            <dt><strong>{{item.doctor.name}}</strong><span>{{item.doctor.proTitleText}}</span></dt>\n                            <dd><strong>{{organProfessionText || item.doctor.organProfessionText}}</strong><span>{{organText || item.transfer.targetOrganText}}</span>\n                            </dd>\n                        </dl>\n                    </div>\n                </div>\n            </div>\n            <!-- \u4e2a\u6027\u5316\u95e8\u8bca-->\n            <div ng-if=\"!item.transfer.statusName\" class=\"applyDetailBox\">\n                <dl class=\"doctor_item_title\" ng-if=\"item.transfer.transferStatus==2\">\n                    <dt>\u533b\u751f\u7b54\u590d</dt>\n                    <dd><span>{{item.transfer.transferResultText}}</span></dd>\n                </dl>\n                <div class=\"box_list\" ng-if=\"item.transfer.transferStatus==2&&item.transfer.transferResult==1\">\n                    <dl ng-if=\"!item.doctor.teams\">\n                        <dt>\u5c31\u8bca\u533b\u751f</dt>\n                        <dd class=\"dd_txt_normal\">{{item.transfer.targetDoctorText+' '+item.transfer.targetDepartText+'\n                            '+item.transfer.targetOrganText}}\n                        </dd>\n                    </dl>\n                    <dl>\n                        <dt>\u5019\u8bca\u65f6\u95f4</dt>\n                        <dd>{{item.transfer.confirmClinicTimeType || item.transfer.confirmClinicTime}}</dd>\n                    </dl>\n                    <dl ng-if=\"item.transfer.confirmClinicAddr\">\n                        <dt>\u5c31\u8bca\u5730\u70b9</dt>\n                        <dd class=\"dd_txt_normal\">{{item.transfer.confirmClinicAddr}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u5c31\u8bca\u79d1\u5ba4</dt>\n                        <dd>{{item.transfer.appointDepartName}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u95e8\u8bca\u7c7b\u578b</dt>\n                        <dd>{{item.transfer.transferTypeText}}<span\n                                class=\"price\">{{item.transfer.clinicPrice+'\u5143'}}</span></dd>\n                    </dl>\n                    <dl>\n                        <dt>\u533b\u751f\u7559\u8a00</dt>\n                        <dd class=\"dd_txt_normal\">{{item.transfer.returnMess}}</dd>\n                    </dl>\n                </div>\n                <div class=\"box_list\" ng-if=\"item.transfer.transferStatus==2&&item.transfer.transferResult==2\">\n                    <dl>\n                        <dt>\u7b54\u590d\u65f6\u95f4</dt>\n                        <dd>{{item.transfer.agreeTime | shortTime}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u62d2\u7edd\u539f\u56e0</dt>\n                        <dd class=\"dd_txt_normal\">{{item.transfer.refuseCause}}</dd>\n                    </dl>\n                </div>\n                <dl class=\"doctor_item_title\">\n                    <dt>\u7533\u8bf7\u4fe1\u606f</dt>\n                    <dd class=\"icon_ji\" ng-if=\"item.transfer.emergency\">\u6025</dd>\n                </dl>\n                <div class=\"box_list\">\n                    <dl>\n                        <dt>\u671f\u671b\u65f6\u95f4</dt>\n                        <dd class=\"dd_txt_normal\">{{item.patient.expectClinicPeriodTypeText}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u5c31\u8bca\u4eba</dt>\n                        <dd class=\"flexNowarp\">\n                            <span class=\"nowarpShrink\">{{item.patient.patientName}} </span>\n                            <span class=\"nowarpNoShrink\">{{item.patient.patientSexText+'  '+item.patient.age+'\u5c81     '+item.patient.patientTypeText}}</span>\n                        </dd>\n                    </dl>\n                    <dl ng-if=\"barcodeId && organInfo.appointDetailHealthcardDisplay\">\n                        <dt>{{item.appointRecord.cardType == '4' ? '\u5065\u5eb7\u5361\u53f7' : '\u5c31\u8bca\u5361\u53f7'}}</dt>\n                        <dd class=\"alignLeft\" ng-if=\"item.appointRecord.cardType != '4'\" ng-click=\"showBarcodeInfo()\">\n                            {{barcodeId}}<i ng-if=\"item.healthCardName && organInfo.CardNameShow\">\uff08{{item.healthCardName}}\uff09</i></dd>\n                        <dd class=\"alignLeft\" ng-if=\"item.appointRecord.cardType == '4'\"\n                            ng-click=\"showElecHealthCardInfo()\">\u7535\u5b50\u5065\u5eb7\u5361\n                        </dd>\n                    </dl>\n                    <dl>\n                        <dt>\u521d\u6b65\u8bca\u65ad</dt>\n                        <dd class=\"dd_txt_normal\">{{item.transfer.diagianName}}\n                        </dd>\n                    </dl>\n                </div>\n                <dl class=\"doctor_item_title\" id='describeBox' ng-click=\"switchSelect()\">\n                    <dt>\u75c5\u60c5\u6982\u8981</dt>\n                </dl>\n                <div class=\"appointdetaildesc\" ng-if=\"!switchFlag\">\n                    <div class=\"fontSize\">{{patientLeaveMsg}}</div>\n                    <div class=\"allTextBtn\" ng-if=\"isShowAllText\">\u5168\u6587</div>\n                </div>\n                <ul style=\"padding-left: 10px;\" class=\"userCdrOtherdocs img-up\" ng-show=\"!switchFlag\"\n                    ng-hide=\"switchFlag\" id=\"J-userCdrOtherdocs\">\n                    <li ng-repeat=\"i in item.cdrOtherdocs\" data-index=\"{{$index}}\"><img\n                            ng-src=\"{{::getThumb(i.docContent,1,i.docContentToken)}}\"/></li>\n                </ul>\n            </div>\n            <!-- \u95e8\u8bca\u52a0\u53f7\u8f6c\u8bca \u4e2a\u6027\u5316\u95e8\u8bca-->\n            <div ng-if=\"item.transfer.statusName == 'doc' && !item.appointInhosp\" class=\"applyDetailBox\">\n                <dl class=\"doctor_item_title\">\n                    <dt>\u5c31\u8bca\u4fe1\u606f</dt>\n                </dl>\n                <div class=\"box_list\">\n                    <dl ng-if=\"!item.doctor.teams\">\n                        <dt>\u5c31\u8bca\u533b\u751f</dt>\n                        <dd class=\"dd_txt_normal\">{{item.transfer.confirmDoctorText}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u5c31\u8bca\u79d1\u5ba4</dt>\n                        <dd>{{item.transfer.appointDepartName || item.transfer.confirmDepartText}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u5c31\u8bca\u533b\u9662</dt>\n                        <dd class=\"dd_txt_normal\">{{item.transfer.confirmOrganText}}</dd>\n                    </dl>\n                    <dl ng-if=\"item.transfer.confirmClinicAddr\">\n                        <dt>\u5c31\u8bca\u5730\u70b9</dt>\n                        <dd class=\"dd_txt_normal\">{{item.transfer.confirmClinicAddr}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u5019\u8bca\u65f6\u95f4</dt>\n                        <dd>{{item.transfer.confirmClinicTime | shortTime}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u8bca\u7597\u8d39\u7528</dt>\n                        <dd><span class=\"price\">{{item.transfer.clinicPrice+'\u5143'}}</span></dd>\n                    </dl>\n                    <dl ng-if=\"item.transfer.returnMess\">\n                        <dt>\u533b\u751f\u7559\u8a00</dt>\n                        <dd class=\"dd_txt_normal\">{{item.transfer.returnMess}}</dd>\n                    </dl>\n                </div>\n                <div class=\"box_list\" ng-if=\"item.transfer.transferStatus==2&&item.transfer.transferResult==2\">\n                    <dl>\n                        <dt>\u7b54\u590d\u65f6\u95f4</dt>\n                        <dd>{{item.transfer.agreeTime | shortTime}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u62d2\u7edd\u539f\u56e0</dt>\n                        <dd class=\"dd_txt_normal\">{{item.transfer.refuseCause}}</dd>\n                    </dl>\n                </div>\n                <dl class=\"doctor_item_title\">\n                    <dt>\u5c31\u8bca\u4eba\u4fe1\u606f</dt>\n                    <dd class=\"icon_ji\" ng-if=\"item.transfer.emergency\">\u6025</dd>\n                </dl>\n                <div class=\"box_list\">\n                    <dl>\n                        <dt>\u5c31\u8bca\u4eba</dt>\n                        <dd class=\"flexNowarp\">\n                            <span class=\"nowarpShrink\">{{item.patient.patientName}}</span>\n                            <span class=\"nowarpNoShrink\">{{item.patient.patientSexText+'  '+item.patient.age}}</span>\n                        </dd>\n                    </dl>\n                    <dl ng-if=\"barcodeId && organInfo.appointDetailHealthcardDisplay\">\n                        <dt>{{item.appointRecord.cardType == '4' ? '\u5065\u5eb7\u5361\u53f7' : '\u5c31\u8bca\u5361\u53f7'}}</dt>\n                        <dd class=\"alignLeft\" ng-if=\"item.appointRecord.cardType != '4'\" ng-click=\"showBarcodeInfo()\">\n                            {{barcodeId}}<i ng-if=\"item.healthCardName && organInfo.CardNameShow\">\uff08{{item.healthCardName}}\uff09</i></dd>\n                        <dd class=\"alignLeft\" ng-if=\"item.appointRecord.cardType == '4'\"\n                            ng-click=\"showElecHealthCardInfo()\">\u7535\u5b50\u5065\u5eb7\u5361\n                        </dd>\n                    </dl>\n                </div>\n                <dl class=\"doctor_item_title\">\n                    <dt>\u7533\u8bf7\u533b\u751f</dt>\n                </dl>\n                <div class=\"box_list\">\n                    <dl>\n                        <dt>\u7533\u8bf7\u533b\u751f</dt>\n                        <dd class=\"alignLeft\">{{item.requestDoctor.name+' '+ item.requestDoctor.proTitleText}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u6267\u4e1a\u70b9</dt>\n                        <dd class=\"alignLeft\">{{item.requestDoctor.professionText+' '+item.requestDoctor.organText }}\n                        </dd>\n                    </dl>\n                </div>\n                <dl class=\"doctor_item_title\">\n                    <dt>\u75c5\u60c5\u6982\u8981</dt>\n                </dl>\n                <div class=\"box_list\">\n                    <dl>\n                        <dt>\u521d\u6b65\u8bca\u65ad</dt>\n                        <dd class=\"alignLeft\">{{item.transfer.diagianName}}</dd>\n                    </dl>\n                    <dl style=\"border-bottom: 0\">\n                        <dt>\u8f6c\u8bca\u8bf4\u660e</dt>\n                        <dd class=\"alignLeft\">{{item.transfer.patientCondition}}</dd>\n                    </dl>\n                    <dl ng-if=\"item.cdrOtherdocs\">\n                        <dt></dt>\n                        <dd>\n                            <ul class=\"userCdrOtherdocs img-up\" id=\"J-userCdrOtherdocs\">\n                                <li ng-repeat=\"i in item.cdrOtherdocs\" data-index=\"{{$index}}\"><img\n                                        ng-src=\"{{::getThumb(i.docContent,1,i.docContentToken)}}\"/></li>\n                            </ul>\n                        </dd>\n                    </dl>\n                </div>\n            </div>\n            <!-- \u4f4f\u9662\u8f6c\u8bca -->\n            <div ng-if=\"(item.transfer.transferResultType == '2' || item.transfer.transferResultType == '4') && item.appointInhosp\"\n                 class=\"applyDetailBox\">\n                <dl class=\"doctor_item_title\">\n                    <dt>\u5c31\u8bca\u4fe1\u606f</dt>\n                </dl>\n                <div class=\"box_list hos\" ng-if=\"item.transfer.transferStatus==2&&item.transfer.transferResult==1\">\n                    <dl ng-if=\"!item.doctor.teams\">\n                        <dt>\u4e3b\u6cbb\u533b\u751f</dt>\n                        <dd class=\"dd_txt_normal\">{{item.appointInhosp.attendingText}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u5165\u9662\u79d1\u5ba4</dt>\n                        <dd>{{item.appointInhosp.inHospDepartText}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u5165\u4f4f\u533b\u9662</dt>\n                        <dd class=\"dd_txt_normal\">{{item.appointInhosp.organIdText}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u5efa\u8bae\u9884\u4ea4\u91d1</dt>\n                        <dd><span class=\"price\">{{item.appointInhosp.prepayment+'\u5143'}}</span></dd>\n                    </dl>\n                    <dl>\n                        <dt>\u7533\u8bf7\u5165\u9662\u65e5\u671f</dt>\n                        <dd>{{ item.appointInhosp.requestInDate | shortTime}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u662f\u5426\u5c31\u8fd1\u6536\u6cbb</dt>\n                        <dd>{{item.appointInhosp.nearbyReceiveText}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u5165\u9662\u68c0\u67e5\u9879\u76ee</dt>\n                        <dd>{{item.appointInhosp.admissionExamText}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u4f4f\u9662\u68c0\u67e5\u9879\u76ee</dt>\n                        <dd>{{item.appointInhosp.specialExamText}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u662f\u5426\u624b\u672f</dt>\n                        <dd>{{item.appointInhosp.isOperationText}}</dd>\n                    </dl>\n                    <dl ng-if=\"item.appointInhosp.operationDate\">\n                        <dt>\u624b\u672f\u9884\u7ea6\u65e5\u671f</dt>\n                        <dd>{{item.appointInhosp.operationDate | shortTime}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u533b\u751f\u7559\u8a00</dt>\n                        <dd class=\"dd_txt_normal\">{{item.transfer.returnMess}}</dd>\n                    </dl>\n                </div>\n                <dl class=\"doctor_item_title\">\n                    <dt>\u5c31\u8bca\u4eba\u4fe1\u606f</dt>\n                    <dd class=\"icon_ji\" ng-if=\"item.transfer.emergency\">\u6025</dd>\n                </dl>\n                <div class=\"box_list\">\n                    <dl>\n                        <dt>\u5c31\u8bca\u4eba</dt>\n                        <dd class=\"flexNowarp\">\n                            <span class=\"nowarpShrink\">{{item.patient.patientName}}</span>\n                            <span class=\"nowarpNoShrink\">{{item.patient.patientSexText+'  '+item.patient.age}}</span>\n                        </dd>\n                    </dl>\n                    <dl ng-if=\"barcodeId && organInfo.appointDetailHealthcardDisplay\">\n                        <dt>{{item.appointRecord.cardType == '4' ? '\u5065\u5eb7\u5361\u53f7' : '\u5c31\u8bca\u5361\u53f7'}}</dt>\n                        <dd class=\"alignLeft\" ng-if=\"item.appointRecord.cardType != '4'\" ng-click=\"showBarcodeInfo()\">\n                            {{barcodeId}}<i ng-if=\"item.healthCardName && organInfo.CardNameShow\">\uff08{{item.healthCardName}}\uff09</i></dd>\n                        <dd class=\"alignLeft\" ng-if=\"item.appointRecord.cardType == '4'\"\n                            ng-click=\"showElecHealthCardInfo()\">\u7535\u5b50\u5065\u5eb7\u5361\n                        </dd>\n                    </dl>\n                </div>\n                <dl class=\"doctor_item_title\">\n                    <dt>\u7533\u8bf7\u533b\u751f</dt>\n                </dl>\n                <div class=\"box_list\">\n                    <dl>\n                        <dt>\u7533\u8bf7\u533b\u751f</dt>\n                        <dd class=\"alignLeft\">{{item.requestDoctor.name+' '+ item.requestDoctor.proTitleText}}</dd>\n                    </dl>\n                    <dl>\n                        <dt>\u6267\u4e1a\u70b9</dt>\n                        <dd class=\"alignLeft\">{{item.requestDoctor.professionText+' '+item.requestDoctor.organText }}\n                        </dd>\n                    </dl>\n                </div>\n                <dl class=\"doctor_item_title\">\n                    <dt>\u75c5\u60c5\u6982\u8981</dt>\n                </dl>\n                <div class=\"box_list\">\n                    <dl>\n                        <dt>\u521d\u6b65\u8bca\u65ad</dt>\n                        <dd class=\"alignLeft\">{{item.transfer.diagianName}}</dd>\n                    </dl>\n                    <dl style=\"border-bottom: 0;\">\n                        <dt>\u8f6c\u8bca\u8bf4\u660e</dt>\n                        <dd class=\"alignLeft\">{{item.transfer.patientCondition}}</dd>\n                    </dl>\n                    <dl ng-if=\"item.cdrOtherdocs\">\n                        <dt></dt>\n                        <dd>\n                            <ul class=\"userCdrOtherdocs img-up\" id=\"J-userCdrOtherdocs\">\n                                <li ng-repeat=\"i in item.cdrOtherdocs\" data-index=\"{{$index}}\"><img\n                                        ng-src=\"{{::getThumb(i.docContent,1,i.docContentToken)}}\"/></li>\n                            </ul>\n                        </dd>\n                    </dl>\n                </div>\n            </div>\n            <div class=\"appoint-btn-wrap\"\n                 ng-if=\"(item.transfer.transferStatus== 2 || item.transfer.transferStatus== 4)&&!item.transfer.evaStatus && !item.appointInhosp && item.transfer.statusName == 'doc'\">\n                <div class=\"bs-wrap\">\n                    <a ng-click=\"cancelApply()\" ng-if=\"!item.transfer.isAdd\">\u53d6\u6d88\u9884\u7ea6</a>\n                    <a ng-click=\"payNow()\"\n                       ng-if=\"(showPayBtn ? ( (item.appointRecord.clinicPrice || preBill) ? 1 : ( organInfo.applyZeroPayFlag ? 1 : 0 ) ) : 0 ) && isPayBtnShow\" data-eventId=\"weixin_userappointdetail_paynow_ck\" data-eventName=\"\u8be6\u60c5\u9875-\u70b9\u51fb\u652f\u4ed8\u6309\u94ae\">\u7acb\u5373\u652f\u4ed8</a>\n                </div>\n            </div>\n            <div ng-if=\"cancelStatus && item.transfer.transferStatus == 2 && item.transfer.appointRecordStatus == 5 && item.appointRecord.isAdd == 1\">\n                <div class=\"bs-wrap\">\n                    <a class=\"one\" ng-click=\"cancelApplyAndRefund()\" ng-if=\"item.transfer.appointRecordStatus == 5\"  data-eventName=\"\u8be6\u60c5\u9875-\u70b9\u51fb\u53d6\u6d88\u9884\u7ea6\u5e76\u9000\u6b3e\u6309\u94ae\" data-eventId=\"weixin_userappointdetail_cancelapplyandrefund_ck\">\u53d6\u6d88\u9884\u7ea6\u5e76\u9000\u6b3e</a>\n                    <a class=\"one\" ng-click=\"cancelApply()\" ng-if=\"item.transfer.appointRecordStatus == 4\">\u53d6\u6d88\u9884\u7ea6</a>\n                </div>\n                <div class=\"bs-text-wrap\">\n                    <p class=\"bs-p\">\u5c31\u8bca\u5f53\u5929\u4e0d\u53ef\u53d6\u6d88\u9884\u7ea6\uff0c\u53d6\u6d88\u540e\uff0c\u5df2\u4ed8\u91d1\u989d\u6309\u539f\u4ed8</p>\n                    <p class=\"bs-p\">\u6b3e\u65b9\u5f0f\u9000\u56de\u3002</p>\n                </div>\n            </div>\n            <div class=\"btn_submit marginTop marginBot\" ng-if=\"item.transfer && item.transfer.evaStatus \">\n                <div class=\"btn_submit_btn\" id=\"J-doctEvaluate\" data-eventName=\"\u8be6\u60c5\u9875-\u53bb\u8bc4\u4ef7\" data-eventId=\"weixin_userappointdetail_doctevaluate_ck\">{{item.transfer.evaStatus == 2 ? \"\u67e5\u770b\u8bc4\u4ef7\" : \"\u7acb\u5373\u8bc4\u4ef7\"}}</div>\n            </div>\n        </div>\n    </ion-content>\n    <div ng-if=\"canShowTongueConsultBtn\" class=\"tongueTest\" ng-class=\"{'tongueFootHeight':(!detailFalg && hasBtnWrapChild)}\">\n        <div class=\"tongueTestText\">\u907f\u514d\u5728\u5c31\u8bca\u533a\u6458\u8131\u53e3\u7f69\u5f15\u8d77\u4e0d\u5fc5\u8981\u7684\n            \u98ce\u9669\uff0c\u8bf7\u914d\u5408\u63d0\u524d\u4e00\u5929\u5b8c\u6210\u7ebf\u4e0a\u820c\u8bca </div>\n        <div class=\"tongueButton\">{{TongueTextArr[canShowTongueConsultBtn]}}</div>\n    </div>\n    <!-- \u6309\u94ae\u533a\u57df -->\n    <ion-footer-bar class=\"bar bar-footer appoint-btn-box\" ng-show=\"!detailFalg && hasBtnWrapChild\">\n        <div id=\"Preconsultation\" class=\"bs-wrap\" ng-if=\"showPreconsultbtn && !refundApplyNo\" data-eventId=\"weixin_userappointdetail_preconsultation_ck\" data-eventName=\"\u8be6\u60c5\u9875-\u70b9\u51fb\u9884\u95ee\u8bca\u6309\u94ae\">\u9884\u95ee\u8bca</div>\n        <div class=\"bs-wrap\" ng-if=\"appointStatusObj.btnTxtType && !isOldPersonModel && !refundApplyNo\" ng-click=\"clickCombineBtns()\">{{appointStatusObj.btnTxt}}</div>\n        <div class=\"bs-wrap\" ng-if=\"cancelStatus && (item.appointRecord.appointStatus == 0 || item.appointRecord.appointStatus == 4 || !noShowCancelBtn)\"\n             ng-class=\"{'bs-wrap-long':(item.appointRecord.appointStatus == 1 && item.appointRecord.payFlag) || (item.appointRecord.appointStatus == 5 && item.appointRecord.outTradeNo), 'grey': zeroRegStatus}\"\n             ng-click=\"cancelApply(item)\" data-eventName=\"\u8be6\u60c5\u9875-\u70b9\u51fb\u53d6\u6d88\u9884\u7ea6\u6309\u94ae\" data-eventId=\"weixin_userappointdetail_cancelapply_ck\">\n            <span ng-if=\"item.appointRecord.appointStatus == 1\">{{item.appointRecord.payFlag ? '\u53d6\u6d88\u9884\u7ea6\u5e76\u9000\u6b3e' : '\u53d6\u6d88\u9884\u7ea6' }}</span>\n            <span ng-if=\"item.appointRecord.appointStatus == 0 || item.appointRecord.appointStatus == 4\">\u53d6\u6d88\u9884\u7ea6</span>\n            <span ng-if=\"item.appointRecord.appointStatus == 5\">{{item.appointRecord.outTradeNo ? '\u53d6\u6d88\u9884\u7ea6\u5e76\u9000\u6b3e' : '\u53d6\u6d88\u9884\u7ea6'}}</span>\n        </div>\n        <div class=\"bs-wrap\" ng-if=\"onlyRefundBtn && ((item.appointRecord.appointStatus == 1 && item.appointRecord.payFlag) || (item.appointRecord.appointStatus == 5 && item.appointRecord.outTradeNo))\"\n             ng-class=\"{'bs-wrap-long':(item.appointRecord.appointStatus == 1 && item.appointRecord.payFlag) || (item.appointRecord.appointStatus == 5 && item.appointRecord.outTradeNo), 'grey': zeroRegStatus}\"\n             ng-click=\"cancelApply(item)\" data-eventName=\"\u8be6\u60c5\u9875-\u70b9\u51fb\u53d6\u6d88\u9884\u7ea6\u6309\u94ae\" data-eventId=\"weixin_userappointdetail_cancelapply_ck\">\n            <span>\u7533\u8bf7\u9000\u6b3e</span>\n        </div>\n        <div class=\"bs-wrap\" ng-if=\"showRefundBtn && !refundApplyNo\" ng-click=\"refundApply()\">\u9000\u8d39\u7533\u8bf7</div>\n        <div class=\"bs-wrap bs-wrap-long\" ng-if=\"refundApplyNo\" ng-click=\"queryRefundStatus()\">\u67e5\u770b\u5ba1\u6838\u8fdb\u5ea6</div>\n        <div class=\"bs-wrap-primary\" ng-click=\"reApply()\"\n             ng-if=\"showReAppointButton && item.appointRecord && (item.appointRecord.appointStatus == 2 || item.appointRecord.appointStatus == 6 || item.appointRecord.appointStatus == 13)\">\n            \u91cd\u65b0\u9884\u7ea6\n        </div>\n        <div class=\"bs-wrap-primary\" ng-class=\"{'grey': zeroRegStatus || !clickAlreadyPay}\" ng-if=\"judgePayBtnShow && !refundApplyNo\" ng-click=\"payNow()\">{{payBtnText}}</div>\n    </ion-footer-bar>\n    <div id=\"J-goBackHome\" class=\"goBackHome\" ng-if=\"goBackHomeFlag\"></div>\n    <account-select class=\"commonlist\" status=\"menuShowFlag\" config-data=\"organInfo\"\n                    on-item-cilck=\"onApilyTypeSelected(chooseType)\" on-close=\"onApilyClose()\"\n                    ng-if=\"menuShowFlag\"></account-select>\n    <back-home-drag ng-if=\"showMoveTips && isDisplayHomeBox\" shanghai-six-css=\"shanghaiSixCss\" tongue-css = '!detailFalg && hasBtnWrapChild && canShowTongueConsultBtn' show-move-tips=\"showMoveTips\" go-index-click=\"goIndexClick()\"></back-home-drag>\n</div>\n", "size":50488, "mimeType":"text/html"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:09 GMT"}, {"name":"Content-Type", "value":"text/html"}, {"name":"Content-Length", "value":"50488"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Server", "value":"openresty"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Last-Modified", "value":"Thu, 13 Apr 2023 11:17:22 GMT"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Access-Control-Allow-Origin", "value":"*"}, {"name":"via", "value":"CHN-BJ-SSPfz3-CACHE5[10],CHN-BJ-SSPfz3-CACHE7[0,TCP_HIT,8],CHN-TJ-GLOBAL1-CACHE11[4],CHN-TJ-GLOBAL1-CACHE13[0,TCP_HIT,1]"}, {"name":"x-hcs-proxy-type", "value":"1"}, {"name":"X-CCDN-CacheTTL", "value":"1728000"}, {"name":"nginx-hit", "value":"1"}, {"name":"Age", "value":"705977"}, {"name":"Accept-Ranges", "value":"bytes"}, {"name":"Access-Control-Allow-Methods", "value":"GET, POST, OPTIONS"}, {"name":"Access-Control-Allow-Credentials", "value":"true"}, {"name":"Access-Control-Allow-Headers", "value":"*"}]}, "startedDateTime":"2023-04-21T23:25:08.8674323+08:00", "cache":{}}, {"time":76, "serverIPAddress":"59.109.99.216", "connection":"ClientPort:53085;EgressPort:54059", "request":{"headersSize":745, "postData":{"text":"", "mimeType":""}, "queryString":[{"name":null, "value":"?lib/code-c9673c96.js,lib/qrcode-b71a3c9a.js,eh/wx/health/person/BindAndFile-37e006b9.js"}], "headers":[{"name":"Host", "value":"weixinnode.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"Accept", "value":"*/*"}, {"name":"Sec-Fetch-Site", "value":"same-site"}, {"name":"Sec-Fetch-Mode", "value":"no-cors"}, {"name":"Sec-Fetch-Dest", "value":"script"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":0, "url":"https://weixinnode.ngarihealth.com/weixin/??lib/code-c9673c96.js,lib/qrcode-b71a3c9a.js,eh/wx/health/person/BindAndFile-37e006b9.js", "cookies":[], "method":"GET", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":22, "receive":0, "wait":30, "dns":0, "send":0, "connect":46}, "response":{"headersSize":632, "bodySize":9988, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":22928, "text":"$class(\"eh.wx.wap.portal.code\",{BARS:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,23311120],START_BASE:38,STOP:106,constructor:function(cfg){this.fromType={A:function(charCode){if(charCode>=0&&charCode<32)return charCode+64;if(charCode>=32&&charCode<96)return charCode-32;return charCode},B:function(charCode){if(charCode>=32&&charCode<128)return charCode-32;return charCode},C:function(charCode){return charCode}}},code128:function(code,barcodeType){if(arguments.length<2)barcodeType=this.code128Detect(code);if(barcodeType==\"C\"&&code.length%2==1)code=\"0\"+code;var a=this.parseBarcode(code,barcodeType);return this.bar2html(a.join(\"\"))+\"<label>\"+code+\"</label>\"},bar2html:function(s){for(var pos=0,sb=[];pos<s.length;pos+=2){sb.push('<div class=\"bar'+s.charAt(pos)+\" space\"+s.charAt(pos+1)+'\"></div>')}return sb.join(\"\")},code128Detect:function(code){if(/^[0-9]+$/.test(code))return\"C\";if(/[a-z]/.test(code))return\"B\";return\"A\"},parseBarcode:function(barcode,barcodeType){var me=this;var bars=[];bars.add=function(nr){var nrCode=me.BARS[nr];this.check=this.length==0?nr:this.check+nr*this.length;this.push(nrCode||\"UNDEFINED: \"+nr+\"->\"+nrCode)};bars.add(this.START_BASE+barcodeType.charCodeAt(0));for(var i=0;i<barcode.length;i++){var code=barcodeType==\"C\"?+barcode.substr(i++,2):barcode.charCodeAt(i);converted=this.fromType[barcodeType](code);if(isNaN(converted)||converted<0||converted>106)throw new Error(\"Unrecognized character (\"+code+\") at position \"+i+\" in code '\"+barcode+\"'.\");bars.add(converted)}bars.push(this.BARS[bars.check%103],this.BARS[this.STOP]);return bars},createBarcode:function(showDiv,textValue,barcodeType){showDiv.innerHTML=this.code128(textValue,barcodeType)}});;\nvar QRCode;(function(){function QR8bitByte(data){this.mode=QRMode.MODE_8BIT_BYTE;this.data=data;this.parsedData=[];for(var i=0,l=this.data.length;i<l;i++){var byteArray=[];var code=this.data.charCodeAt(i);if(code>65536){byteArray[0]=240|(code&1835008)>>>18;byteArray[1]=128|(code&258048)>>>12;byteArray[2]=128|(code&4032)>>>6;byteArray[3]=128|code&63}else if(code>2048){byteArray[0]=224|(code&61440)>>>12;byteArray[1]=128|(code&4032)>>>6;byteArray[2]=128|code&63}else if(code>128){byteArray[0]=192|(code&1984)>>>6;byteArray[1]=128|code&63}else{byteArray[0]=code}this.parsedData.push(byteArray)}this.parsedData=Array.prototype.concat.apply([],this.parsedData);if(this.parsedData.length!=this.data.length){this.parsedData.unshift(191);this.parsedData.unshift(187);this.parsedData.unshift(239)}}QR8bitByte.prototype={getLength:function(buffer){return this.parsedData.length},write:function(buffer){for(var i=0,l=this.parsedData.length;i<l;i++){buffer.put(this.parsedData[i],8)}}};function QRCodeModel(typeNumber,errorCorrectLevel){this.typeNumber=typeNumber;this.errorCorrectLevel=errorCorrectLevel;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}QRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col){throw new Error(row+\",\"+col)}return this.modules[row][col]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(false,this.getBestMaskPattern())},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++){this.modules[row][col]=null}}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7){this.setupTypeNumber(test)}if(this.dataCache==null){this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)}this.mapData(this.dataCache,maskPattern)},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r)continue;for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c)continue;if(0<=r&&r<=6&&(c==0||c==6)||0<=c&&c<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=c&&c<=4){this.modules[row+r][col+c]=true}else{this.modules[row+r][col+c]=false}}}},getBestMaskPattern:function(){var minLostPoint=0;var pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i}}return pattern},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);var cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs;var dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill()}}}return qr_mc},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null){continue}this.modules[r][6]=r%2==0}for(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null){continue}this.modules[6][c]=c%2==0}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++){for(var j=0;j<pos.length;j++){var row=pos[i];var col=pos[j];if(this.modules[row][col]!=null){continue}for(var r=-2;r<=2;r++){for(var c=-2;c<=2;c++){if(r==-2||r==2||c==-2||c==2||r==0&&c==0){this.modules[row+r][col+c]=true}else{this.modules[row+r][col+c]=false}}}}}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=!test&&(bits>>i&1)==1;this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod}for(var i=0;i<18;i++){var mod=!test&&(bits>>i&1)==1;this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod}},setupTypeInfo:function(test,maskPattern){var data=this.errorCorrectLevel<<3|maskPattern;var bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=!test&&(bits>>i&1)==1;if(i<6){this.modules[i][8]=mod}else if(i<8){this.modules[i+1][8]=mod}else{this.modules[this.moduleCount-15+i][8]=mod}}for(var i=0;i<15;i++){var mod=!test&&(bits>>i&1)==1;if(i<8){this.modules[8][this.moduleCount-i-1]=mod}else if(i<9){this.modules[8][15-i-1+1]=mod}else{this.modules[8][15-i-1]=mod}}this.modules[this.moduleCount-8][8]=!test},mapData:function(data,maskPattern){var inc=-1;var row=this.moduleCount-1;var bitIndex=7;var byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6)col--;while(true){for(var c=0;c<2;c++){if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length){dark=(data[byteIndex]>>>bitIndex&1)==1}var mask=QRUtil.getMask(maskPattern,row,col-c);if(mask){dark=!dark}this.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7}}}row+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break}}}}};QRCodeModel.PAD0=236;QRCodeModel.PAD1=17;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel);var buffer=new QRBitBuffer;for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer)}var totalDataCount=0;for(var i=0;i<rsBlocks.length;i++){totalDataCount+=rsBlocks[i].dataCount}if(buffer.getLengthInBits()>totalDataCount*8){throw new Error(\"code length overflow. (\"+buffer.getLengthInBits()+\">\"+totalDataCount*8+\")\")}if(buffer.getLengthInBits()+4<=totalDataCount*8){buffer.put(0,4)}while(buffer.getLengthInBits()%8!=0){buffer.putBit(false)}while(true){if(buffer.getLengthInBits()>=totalDataCount*8){break}buffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8){break}buffer.put(QRCodeModel.PAD1,8)}return QRCodeModel.createBytes(buffer,rsBlocks)};QRCodeModel.createBytes=function(buffer,rsBlocks){var offset=0;var maxDcCount=0;var maxEcCount=0;var dcdata=new Array(rsBlocks.length);var ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount;var ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++){dcdata[r][i]=255&buffer.buffer[i+offset]}offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount);var rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1);var modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=modIndex>=0?modPoly.get(modIndex):0}}var totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++){totalCodeCount+=rsBlocks[i].totalCount}var data=new Array(totalCodeCount);var index=0;for(var i=0;i<maxDcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<dcdata[r].length){data[index++]=dcdata[r][i]}}}for(var i=0;i<maxEcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<ecdata[r].length){data[index++]=ecdata[r][i]}}}return data};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,G18:1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,G15_MASK:1<<14|1<<12|1<<10|1<<4|1<<1,getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0){d^=QRUtil.G15<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)}return(data<<10|d)^QRUtil.G15_MASK},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0){d^=QRUtil.G18<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)}return data<<12|d},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1}return digit},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1]},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return i*j%2+i*j%3==0;case QRMaskPattern.PATTERN110:return(i*j%2+i*j%3)%2==0;case QRMaskPattern.PATTERN111:return(i*j%3+(i+j)%2)%2==0;default:throw new Error(\"bad maskPattern:\"+maskPattern)}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++){a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0))}return a},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error(\"mode:\"+mode)}}else if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error(\"mode:\"+mode)}}else if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error(\"mode:\"+mode)}}else{throw new Error(\"type:\"+type)}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount();var lostPoint=0;for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount;col++){var sameCount=0;var dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r){continue}for(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c){continue}if(r==0&&c==0){continue}if(dark==qrCode.isDark(row+r,col+c)){sameCount++}}}if(sameCount>5){lostPoint+=3+sameCount-5}}}for(var row=0;row<moduleCount-1;row++){for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col))count++;if(qrCode.isDark(row+1,col))count++;if(qrCode.isDark(row,col+1))count++;if(qrCode.isDark(row+1,col+1))count++;if(count==0||count==4){lostPoint+=3}}}for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount-6;col++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)){lostPoint+=40}}}for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount-6;row++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)){lostPoint+=40}}}var darkCount=0;for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount;row++){if(qrCode.isDark(row,col)){darkCount++}}}var ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint}};var QRMath={glog:function(n){if(n<1){throw new Error(\"glog(\"+n+\")\")}return QRMath.LOG_TABLE[n]},gexp:function(n){while(n<0){n+=255}while(n>=256){n-=255}return QRMath.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++){QRMath.EXP_TABLE[i]=1<<i}for(var i=8;i<256;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8]}for(var i=0;i<255;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i}function QRPolynomial(num,shift){if(num.length==undefined){throw new Error(num.length+\"/\"+shift)}var offset=0;while(offset<num.length&&num[offset]==0){offset++}this.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++){this.num[i]=num[i+offset]}}QRPolynomial.prototype={get:function(index){return this.num[index]},getLength:function(){return this.num.length},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++){for(var j=0;j<e.getLength();j++){num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)))}}return new QRPolynomial(num,0)},mod:function(e){if(this.getLength()-e.getLength()<0){return this}var ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0));var num=new Array(this.getLength());for(var i=0;i<this.getLength();i++){num[i]=this.get(i)}for(var i=0;i<e.getLength();i++){num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio)}return new QRPolynomial(num,0).mod(e)}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined){throw new Error(\"bad rs block @ typeNumber:\"+typeNumber+\"/errorCorrectLevel:\"+errorCorrectLevel)}var length=rsBlock.length/3;var list=[];for(var i=0;i<length;i++){var count=rsBlock[i*3+0];var totalCount=rsBlock[i*3+1];var dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++){list.push(new QRRSBlock(totalCount,dataCount))}}return list};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined}};function QRBitBuffer(){this.buffer=[];this.length=0}QRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return(this.buffer[bufIndex]>>>7-index%8&1)==1},put:function(num,length){for(var i=0;i<length;i++){this.putBit((num>>>length-i-1&1)==1)}},getLengthInBits:function(){return this.length},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex){this.buffer.push(0)}if(bit){this.buffer[bufIndex]|=128>>>this.length%8}this.length++}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function _isSupportCanvas(){return typeof CanvasRenderingContext2D!=\"undefined\"}function _getAndroid(){var android=false;var sAgent=navigator.userAgent;if(/android/i.test(sAgent)){android=true;var aMat=sAgent.toString().match(/android ([0-9]\\.[0-9])/i);if(aMat&&aMat[1]){android=parseFloat(aMat[1])}}return android}var svgDrawer=function(){var Drawing=function(el,htOption){this._el=el;this._htOption=htOption};Drawing.prototype.draw=function(oQRCode){var _htOption=this._htOption;var _el=this._el;var nCount=oQRCode.getModuleCount();var nWidth=Math.floor(_htOption.width/nCount);var nHeight=Math.floor(_htOption.height/nCount);this.clear();function makeSVG(tag,attrs){var el=document.createElementNS(\"http://www.w3.org/2000/svg\",tag);for(var k in attrs)if(attrs.hasOwnProperty(k))el.setAttribute(k,attrs[k]);return el}var svg=makeSVG(\"svg\",{viewBox:\"0 0 \"+String(nCount)+\" \"+String(nCount),width:\"100%\",height:\"100%\",fill:_htOption.colorLight});svg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\",\"xmlns:xlink\",\"http://www.w3.org/1999/xlink\");_el.appendChild(svg);svg.appendChild(makeSVG(\"rect\",{fill:_htOption.colorLight,width:\"100%\",height:\"100%\"}));svg.appendChild(makeSVG(\"rect\",{fill:_htOption.colorDark,width:\"1\",height:\"1\",id:_htOption.qrId}));for(var row=0;row<nCount;row++){for(var col=0;col<nCount;col++){if(oQRCode.isDark(row,col)){var child=makeSVG(\"use\",{x:String(col),y:String(row)});child.setAttributeNS(\"http://www.w3.org/1999/xlink\",\"href\",\"#\"+_htOption.qrId);svg.appendChild(child)}}}};Drawing.prototype.clear=function(){while(this._el.hasChildNodes())this._el.removeChild(this._el.lastChild)};return Drawing}();var useSVG=document.documentElement.tagName.toLowerCase()===\"svg\";var Drawing=useSVG?svgDrawer:!_isSupportCanvas()?function(){var Drawing=function(el,htOption){this._el=el;this._htOption=htOption};Drawing.prototype.draw=function(oQRCode){var _htOption=this._htOption;var _el=this._el;var nCount=oQRCode.getModuleCount();var nWidth=Math.floor(_htOption.width/nCount);var nHeight=Math.floor(_htOption.height/nCount);var aHTML=['<table style=\"border:0;border-collapse:collapse;\">'];for(var row=0;row<nCount;row++){aHTML.push(\"<tr>\");for(var col=0;col<nCount;col++){aHTML.push('<td style=\"border:0;border-collapse:collapse;padding:0;margin:0;width:'+nWidth+\"px;height:\"+nHeight+\"px;background-color:\"+(oQRCode.isDark(row,col)?_htOption.colorDark:_htOption.colorLight)+';\"></td>')}aHTML.push(\"</tr>\")}aHTML.push(\"</table>\");_el.innerHTML=aHTML.join(\"\");var elTable=_el.childNodes[0];var nLeftMarginTable=(_htOption.width-elTable.offsetWidth)/2;var nTopMarginTable=(_htOption.height-elTable.offsetHeight)/2;if(nLeftMarginTable>0&&nTopMarginTable>0){elTable.style.margin=nTopMarginTable+\"px \"+nLeftMarginTable+\"px\"}};Drawing.prototype.clear=function(){this._el.innerHTML=\"\"};return Drawing}():function(){function _onMakeImage(){this._elImage.src=this._elCanvas.toDataURL(\"image/png\");this._elImage.style.display=\"block\";this._elImage.className=\"elec-health-img\";this._elCanvas.style.display=\"none\"}if(this._android&&this._android<=2.1){var factor=1/window.devicePixelRatio;var drawImage=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(image,sx,sy,sw,sh,dx,dy,dw,dh){if(\"nodeName\"in image&&/img/i.test(image.nodeName)){for(var i=arguments.length-1;i>=1;i--){arguments[i]=arguments[i]*factor}}else if(typeof dw==\"undefined\"){arguments[1]*=factor;arguments[2]*=factor;arguments[3]*=factor;arguments[4]*=factor}drawImage.apply(this,arguments)}}function _safeSetDataURI(fSuccess,fFail){var self=this;self._fFail=fFail;self._fSuccess=fSuccess;if(self._bSupportDataURI===null){var el=document.createElement(\"img\");var fOnError=function(){self._bSupportDataURI=false;if(self._fFail){self._fFail.call(self)}};var fOnSuccess=function(){self._bSupportDataURI=true;if(self._fSuccess){self._fSuccess.call(self)}};el.onabort=fOnError;el.onerror=fOnError;el.onload=fOnSuccess;el.src=\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==\";return}else if(self._bSupportDataURI===true&&self._fSuccess){self._fSuccess.call(self)}else if(self._bSupportDataURI===false&&self._fFail){self._fFail.call(self)}}var Drawing=function(el,htOption){this._bIsPainted=false;this._android=_getAndroid();this._htOption=htOption;this._elCanvas=document.createElement(\"canvas\");this._elCanvas.width=htOption.width;this._elCanvas.height=htOption.height;el.appendChild(this._elCanvas);this._el=el;this._oContext=this._elCanvas.getContext(\"2d\");this._bIsPainted=false;this._elImage=document.createElement(\"img\");this._elImage.alt=\"Scan me!\";this._elImage.style.display=\"none\";this._el.appendChild(this._elImage);this._bSupportDataURI=null};Drawing.prototype.draw=function(oQRCode){var _elImage=this._elImage;var _oContext=this._oContext;var _htOption=this._htOption;var nCount=oQRCode.getModuleCount();var nWidth=_htOption.width/nCount;var nHeight=_htOption.height/nCount;var nRoundedWidth=Math.round(nWidth);var nRoundedHeight=Math.round(nHeight);_elImage.style.display=\"none\";this.clear();for(var row=0;row<nCount;row++){for(var col=0;col<nCount;col++){var bIsDark=oQRCode.isDark(row,col);var nLeft=col*nWidth;var nTop=row*nHeight;_oContext.strokeStyle=bIsDark?_htOption.colorDark:_htOption.colorLight;_oContext.lineWidth=1;_oContext.fillStyle=bIsDark?_htOption.colorDark:_htOption.colorLight;_oContext.fillRect(nLeft,nTop,nWidth,nHeight);_oContext.strokeRect(Math.floor(nLeft)+.5,Math.floor(nTop)+.5,nRoundedWidth,nRoundedHeight);_oContext.strokeRect(Math.ceil(nLeft)-.5,Math.ceil(nTop)-.5,nRoundedWidth,nRoundedHeight)}}this._bIsPainted=true};Drawing.prototype.makeImage=function(){if(this._bIsPainted){_safeSetDataURI.call(this,_onMakeImage)}};Drawing.prototype.isPainted=function(){return this._bIsPainted};Drawing.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height);this._bIsPainted=false};Drawing.prototype.round=function(nNumber){if(!nNumber){return nNumber}return Math.floor(nNumber*1e3)/1e3};return Drawing}();function _getTypeNumber(sText,nCorrectLevel){var nType=1;var length=_getUTF8Length(sText);for(var i=0,len=QRCodeLimitLength.length;i<=len;i++){var nLimit=0;switch(nCorrectLevel){case QRErrorCorrectLevel.L:nLimit=QRCodeLimitLength[i][0];break;case QRErrorCorrectLevel.M:nLimit=QRCodeLimitLength[i][1];break;case QRErrorCorrectLevel.Q:nLimit=QRCodeLimitLength[i][2];break;case QRErrorCorrectLevel.H:nLimit=QRCodeLimitLength[i][3];break}if(length<=nLimit){break}else{nType++}}if(nType>QRCodeLimitLength.length){throw new Error(\"Too long data\")}return nType}function _getUTF8Length(sText){var replacedText=encodeURI(sText).toString().replace(/\\%[0-9a-fA-F]{2}/g,\"a\");return replacedText.length+(replacedText.length!=sText?3:0)}QRCode=function(el,vOption){this._htOption={qrId:\"template\",width:256,height:256,typeNumber:4,colorDark:\"#000000\",colorLight:\"#ffffff\",correctLevel:QRErrorCorrectLevel.H};if(typeof vOption===\"string\"){vOption={text:vOption}}if(vOption){for(var i in vOption){this._htOption[i]=vOption[i]}}if(typeof el==\"string\"){el=document.getElementById(el)}this._android=_getAndroid();this._el=el;this._oQRCode=null;if(this._htOption.useSVG){this._oDrawing=new svgDrawer(this._el,this._htOption)}else{this._oDrawing=new Drawing(this._el,this._htOption)}if(this._htOption.text){this.makeCode(this._htOption.text)}};QRCode.prototype.makeCode=function(sText){this._oQRCode=new QRCodeModel(_getTypeNumber(sText,this._htOption.correctLevel),this._htOption.correctLevel);this._oQRCode.addData(sText);this._oQRCode.make();this._el.title=sText;this._oDrawing.draw(this._oQRCode);this.makeImage()};QRCode.prototype.makeImage=function(){if(typeof this._oDrawing.makeImage==\"function\"&&(!this._android||this._android>=3)){this._oDrawing.makeImage()}};QRCode.prototype.clear=function(){this._oDrawing.clear()};QRCode.CorrectLevel=QRErrorCorrectLevel})();;\n$class(\"eh.wx.health.person.BindAndFile\",{hts:\"/\",mixins:\"/ngari.utils.ServiceSupport\"}).then(function(c){var app=angular.module(\"app\");app.compileProvider.directive(\"bindItem\",function(){return{restrict:\"E\",replace:true,scope:true,link:function(scope,el,attrs){scope.bindObj.cardTextType=\"3\";scope.pickOn=function(i){scope.cardOn=!1;i==0?(scope.cardOn=!1,scope.bindObj.cardTextType=\"3\"):(scope.cardOn=!0,scope.bindObj.cardTextType=\"2\")};scope.closeClick=function(){scope.popWin.close()};scope.cardClick=function(){var me=this,adapter=ngari.rmi.serviceAdapter,f=adapter.bindMethod({beanName:\"eh.healthCard\",method:\"bindCard\",useHttpHeader:true}),p=adapter.bindMethod({beanName:\"eh.billService\",method:\"settlePreBillForBus\",useHttpHeader:true}),info={mpiId:scope.bindObj.mpiId,cardType:scope.bindObj.cardTextType,number:scope.bindObj.bindCardInfo,organ:scope.bindObj.organId,preBill:scope.bindObj.preBill,payInfo:scope.bindObj.payInfo};f(info.mpiId,info.cardType,info.number,info.organ,\"0\").then(function(res){if(res.patientQueryRequest.errCode==\"0\"){scope.popWin.close();p(+scope.bindObj.appointId,\"40\").then(function(preinfo){if(preinfo.errorCode!=-1&&+preinfo.preBill){me.goForPay(preinfo.preBill,info.payInfo)}else{$sys.showMsg(\"\u9884\u7ed3\u7b97\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u652f\u4ed8\u3002\",true,\"toast-auto\")}}).fail(function(e){$sys.showFail(e)})}else if(res.patientQueryRequest.errCode==\"-3\"&&+scope.bindObj.canFile){scope.popWin.close();$sys.showMsg({template:\"\u5c1a\u672a\u67e5\u5230\u60a8\u5728\u533b\u9662\u7684\u75c5\u5386\u6863\u6848\u4fe1\u606f\uff0c\u60a8\u53ef\u76f4\u63a5\u65b0\u5efa\u6863\u6848\",cssClass:\"default\",buttons:[{text:\"\u65b0\u5efa\u6863\u6848\",type:\"button-default\",onTap:function(){me.fastCreateFile()}},{text:\"\u786e\u5b9a\",type:\"button-positive\"}]})}else if(!+scope.bindObj.canFile&&res.patientQueryRequest.errCode==\"-3\"){scope.popWin.close();$sys.showMsg({title:\"\u5c1a\u672a\u67e5\u5230\u60a8\u5728\u533b\u9662\u7684\u75c5\u5386\u6863\u6848\u4fe1\u606f\uff0c\u8bf7\u524d\u5f80\u533b\u9662\u65b0\u5efa\u6863\u6848\",cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\"}]})}else if(res.patientQueryRequest.errCode==\"-1\"){scope.popWin.close();$sys.showMsg({title:res.patientQueryRequest.errMsg,cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\"}]})}else if(res.patientQueryRequest.errCode==\"-2\"){scope.popWin.close();$sys.showMsg({title:res.patientQueryRequest.errMsg,cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\"}]})}else{$sys.showFail(\"\u7cfb\u7edf\u51fa\u9519\")}}).fail(function(e){$sys.showFail(e)})};scope.fastCreateFile=function(){var me=this,adapter=ngari.rmi.serviceAdapter,f=adapter.bindMethod({beanName:\"eh.healthCard\",method:\"bindCard\",useHttpHeader:true}),p=adapter.bindMethod({beanName:\"eh.billService\",method:\"settlePreBillForBus\",useHttpHeader:true}),info={mpiId:scope.bindObj.mpiId,cardType:scope.bindObj.cardTextType,number:scope.bindObj.bindCardInfo,organ:scope.bindObj.organId,preBill:scope.bindObj.preBill,payInfo:scope.bindObj.payInfo};f(info.mpiId,info.cardType,info.number,info.organ,1).then(function(res){if(!res){scope.popWin.close();$sys.showMsg(\"\u5c31\u8bca\u5361\u59d3\u540d\u4e0e\u60a8\u5728\u5e73\u53f0\u7684\u59d3\u540d\u4e0d\u4e00\u81f4\",!0,\"toast-auto\")}else if(+res.patientQueryRequest.errCode!=0){scope.popWin.close();$sys.showMsg(res.patientQueryRequest.errMsg,!0,\"toast-auto\")}else if(!+res.patientQueryRequest.errCode){scope.popWin.close();$sys.showMsg({title:\"\u5efa\u6863\u5df2\u6210\u529f\uff01\",cssClass:\"default\",buttons:[{text:\"\u786e\u5b9a\",type:\"button-positive\",onTap:function(){p(+scope.bindObj.appointId,\"40\").then(function(preinfo){if(preinfo.errorCode!=-1&&+preinfo.preBill){me.goForPay(preinfo.preBill,info.payInfo)}else{$sys.showMsg(\"\u9884\u7ed3\u7b97\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u652f\u4ed8\u3002\",true,\"toast-auto\")}})}}]})}else{$sys.showFail(\"\u7cfb\u7edf\u51fa\u9519\")}}).fail(function(e){$sys.showFail(e)})};scope.goForPay=function(preBill,payInfo){var me=this,args={mpiId:scope.bindObj.mpiId,appointId:scope.bindObj.appointId,price:preBill,busType:\"appointPay\",couponType:3};$sys.openModule({url:\"eh.wx.health.doctor.AppointApplyOrderConfirm\",cache:me.popovers,title:\"\u786e\u8ba4\u8ba2\u5355\"}).then(function(popover){popover.module.showAppointDeConfirmPayDetail(args)})}},template:c.prototype.html}})});", "size":32916, "mimeType":"application/javascript"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:09 GMT"}, {"name":"Content-Type", "value":"application/javascript"}, {"name":"Content-Length", "value":"9988"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Server", "value":"openresty"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Last-Modified", "value":"Mon, 03 Apr 2023 10:04:18 GMT"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"via", "value":"CHN-BJ-SSPfz3-CACHE1[11],CHN-BJ-SSPfz3-CACHE3[0,TCP_HIT,6],CHN-TJ-GLOBAL1-CACHE6[8],CHN-TJ-GLOBAL1-CACHE35[0,TCP_HIT,7]"}, {"name":"x-hcs-proxy-type", "value":"1"}, {"name":"X-CCDN-CacheTTL", "value":"1728000"}, {"name":"nginx-hit", "value":"1"}, {"name":"Age", "value":"1470010"}, {"name":"Accept-Ranges", "value":"bytes"}, {"name":"Access-Control-Allow-Origin", "value":"*"}, {"name":"Access-Control-Allow-Methods", "value":"GET, POST, OPTIONS"}, {"name":"Access-Control-Allow-Credentials", "value":"true"}, {"name":"Access-Control-Allow-Headers", "value":"*"}]}, "startedDateTime":"2023-04-21T23:25:08.8674323+08:00", "cache":{}}, {"time":31, "serverIPAddress":"59.109.99.216", "connection":"ClientPort:54040;EgressPort:54059", "request":{"headersSize":737, "postData":{"text":"", "mimeType":""}, "queryString":[], "headers":[{"name":"Host", "value":"weixinnode.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"Accept", "value":"*/*"}, {"name":"Sec-Fetch-Site", "value":"same-site"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":0, "url":"https://weixinnode.ngarihealth.com/weixin/eh/wx/health/person/BindAndFile-fb1565cc.html", "cookies":[], "method":"GET", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":0, "receive":0, "wait":31, "dns":0, "send":0, "connect":0}, "response":{"headersSize":641, "bodySize":592, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":1033, "text":"<div class=\"m-pop\">\n    <a class='close' ng-click='closeClick()'><i></i></a>\n    <div class=\"bindCard\">\n        <div class=\"bingTitleWin\">\u8bf7\u5148\u7ed1\u5b9a{{bindObj.name}}\u7684\u5c31\u8bca\u5361<span ng-if=\"bindObj.appoint == 2\">\u6216\u533b\u4fdd\u5361</span></div>\n        <div class=\"box_list bindInfo\">\n            <dl class=\"bingType\" ng-if=\"bindObj.appoint == 2\">\n                <dt class=\"td\">\u7c7b\u578b</dt>\n                <dd class=\"tr\" ng-model=\"bindObj.cardTextType\"><span ng-class=\"{'on':!cardOn }\" ng-click=\"pickOn(0)\"\n                                                                     class=\"ca\">\u5c31\u8bca\u5361</span><span ng-class=\"{'on':cardOn}\"\n                                                                                                ng-click=\"pickOn(1)\"\n                                                                                                class=\"ca\">\u533b\u4fdd\u5361</span>\n                </dd>\n            </dl>\n            <dl class=\"bindCardInput\">\n                <dt class=\"td\">\u5361\u53f7</dt>\n                <dd>\n                    <input name=\"cardInfo\" ng-model=\"bindObj.bindCardInfo\" class=\"inputCard\" type=\"tel\"/>\n                </dd>\n            </dl>\n        </div>\n        <div class=\"bindBtn\"><a ng-click=\"bindObj.bindCardInfo.length && cardClick()\" class=\"cardDef\"\n                                ng-class=\"{'cardOk':bindObj.bindCardInfo.length}\">\u786e\u5b9a</a></div>\n        <div class=\"bindNew\" ng-if=\"bindObj.canFile\">\u5982\u679c\u60a8\u662f\u65b0\u60a3\u8005\uff0c\u53ef\u70b9\u6b64 <span ng-click=\"fastCreateFile()\"\n                                                                       class=\"create\">\u65b0\u5efa\u6863\u6848</span></div>\n    </div>\n</div>", "size":1625, "mimeType":"text/html"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:09 GMT"}, {"name":"Content-Type", "value":"text/html"}, {"name":"Content-Length", "value":"592"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Server", "value":"openresty"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Last-Modified", "value":"Mon, 03 Apr 2023 10:04:18 GMT"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Access-Control-Allow-Origin", "value":"*"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"via", "value":"CHN-BJ-SSPfz3-CACHE1[9],CHN-BJ-SSPfz3-CACHE7[0,TCP_HIT,7],CHN-TJ-GLOBAL1-CACHE14[4],CHN-TJ-GLOBAL1-CACHE55[0,TCP_HIT,2]"}, {"name":"x-hcs-proxy-type", "value":"1"}, {"name":"X-CCDN-CacheTTL", "value":"1728000"}, {"name":"nginx-hit", "value":"1"}, {"name":"Age", "value":"1470094"}, {"name":"Accept-Ranges", "value":"bytes"}, {"name":"Access-Control-Allow-Methods", "value":"GET, POST, OPTIONS"}, {"name":"Access-Control-Allow-Credentials", "value":"true"}, {"name":"Access-Control-Allow-Headers", "value":"*"}]}, "startedDateTime":"2023-04-21T23:25:08.9504919+08:00", "cache":{}}, {"time":336, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53064;EgressPort:54060", "request":{"headersSize":1265, "postData":{"text":"[163286177]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"11"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"5Gtp9KeOa0OZZCX7h0AFGYehEYrqDpYkk1LWGWaNTSU="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090709374132"}, {"name":"X-Ca-Timestamp", "value":"1682090709374"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"getPatAppointRecordByIdWithStar"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"Av7UZll4JMSx9Po2+oe+oA=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"appoint.queryAppointRecordController"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":11, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":109, "receive":0, "wait":172, "dns":0, "send":1, "connect":163}, "response":{"headersSize":339, "bodySize":4197, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":0, "text":"{\"code\":200,\"body\":{\"onlyRefundBtn\":false,\"intellijCloudAppointQrCode\":\"\",\"address\":\"\u5317\u4eac\u5e02\u901a\u5dde\u533a\u7389\u6865\u4e2d\u8def124\u53f7\",\"cancelBtn\":false,\"appointRecord\":{\"appointRecordId\":163286177,\"mpiid\":\"2c908223877b51a301879464282e5538\",\"patientName\":\"\u51af\u95fb\",\"certId\":\"3****************9\",\"linkTel\":\"139****7525\",\"organSchedulingId\":\"545990\",\"appointSourceId\":-100,\"organId\":1000668,\"hospCode\":\"1000668\",\"appointDepartId\":\"3127\",\"appointDepartName\":\"\u8425\u517b\u8bc4\u4f30\u6307\u5bfc\",\"doctorId\":16807,\"workDate\":\"2023-04-25 00:00:00\",\"workType\":25,\"sourceType\":1,\"startTime\":\"2023-04-25 14:30:00\",\"endTime\":\"2023-04-25 15:00:00\",\"orderNum\":1013,\"appointRoad\":5,\"appointPath\":9,\"appointStatus\":2,\"appointDate\":\"2023-04-21 23:25:05\",\"appointUser\":\"2c90823f877b4d0d01879433435c4fdb\",\"appointName\":\"\u5468\u73ca\",\"clinicPrice\":60.0,\"telClinicFlag\":0,\"payFlag\":0,\"cancelResean\":\"\u5c0f\u5e73\u53f0\u53cd\u9988:\u8d8514\u5c81\u75c5\u4eba\u4e0d\u80fd\u6302\u513f\u4fdd\u95e8\u8bca\uff01\",\"cancelType\":4,\"cancelDate\":\"2023-04-21 23:25:06\",\"cancelName\":\"\u9884\u7ea6\u5931\u8d25\",\"transferId\":0,\"sourceLevel\":1,\"deviceId\":114859471,\"recordType\":0,\"isAppointFail\":1,\"evaStatus\":0,\"ifCreateFollowPlan\":true,\"requestNum\":0,\"appointClient\":3,\"baseClientId\":21,\"appointRecordExt\":{\"appointRecordId\":163286177,\"createDate\":\"2023-04-21 23:25:05\",\"haveRemindAppointPayFlag\":0,\"appointXzDepartName\":\"\u8425\u517b\u8bc4\u4f30\u95e8\u8bca\",\"appointOrganName\":\"\u901a\u5dde\u5987\u5e7c\u4fdd\u5065\u9662\",\"openId\":\"oemFQv_PqaTGWaNApxTK8dAx6VYM\",\"os\":\"WX\",\"appId\":\"wx45b57abae69e92e6\",\"orderNumSpot\":\"14:50\",\"extra\":\"{}\",\"processStatusText\":\"\"},\"cancelTypeTextTitle\":\"\u9884\u7ea6\u5931\u8d25\",\"appointSourceReleased\":true,\"lastModified\":\"2023-04-21 23:25:06\",\"connectCallNumberSystem\":false,\"organIdText\":\"\u901a\u5dde\u533a\u5987\u5e7c\u4fdd\u5065\u9662\",\"doctorIdText\":\"\u8425\u517b\u8bc4\u4f30\u6307\u5bfc\",\"workTypeText\":\"\",\"sourceTypeText\":\"\u666e\u901a\u9884\u7ea6\u53f7\",\"appointRoadText\":\"\u533b\u751f\u8bca\u95f4\u9884\u7ea6\",\"appointPathText\":\"\u60a3\u8005\u7aef\u9884\u7ea6\uff08\u542b\u6302\u53f7\uff09\",\"appointStatusText\":\"\u5df2\u53d6\u6d88\",\"appointOragnText\":\"\",\"telClinicFlagText\":\"\u7ebf\u4e0b\",\"clinicObjectText\":\"\",\"oppTypeText\":\"\",\"oppOrganText\":\"\",\"oppdoctorText\":\"\",\"clinicStatusText\":\"\",\"cancelTypeText\":\"\u9884\u7ea6\u5931\u8d25\",\"sourceLevelText\":\"\u666e\u901a\u95e8\u8bca\",\"recordTypeText\":\"\u9884\u7ea6\",\"payWayText\":\"\",\"evaStatusText\":\"\u672a\u5904\u7406\",\"cardTypeText\":\"\",\"appointClientText\":\"\u60a3\u8005\u7aef\u5fae\u4fe1\",\"virtualDoctorText\":\"\",\"virtualOrganText\":\"\",\"receiveStatusText\":\"\",\"cloudAppointStatusText\":\"\",\"extraStatusText\":\"\"},\"statusTitle\":\"\u9884\u7ea6\u5931\u8d25\",\"refundBtn\":false,\"doctor\":{\"doctorId\":16807,\"name\":\"\u8425\u517b\u8bc4\u4f30\u6307\u5bfc\",\"gender\":\"2\",\"profession\":\"09\",\"organProfession\":171924,\"proTitle\":\"99\",\"proTitleImage\":\"\",\"teams\":false,\"organ\":1000668,\"virtualDoctor\":true,\"extendParam\":{},\"currentOrgan\":1000668,\"cloudAppointSourceFlag\":0,\"jobNumber\":\"PT_3127\",\"canReport\":false,\"hasReport\":false,\"proTitleText\":\" \",\"professionText\":\"\u513f\u7ae5\u4fdd\u5065\u90e8\",\"genderText\":\"\u5973\",\"proTitleImageToken\":\"1682094309:ngarihealth:yo2mznpHvRU4AOy7lTZXOyjomVo=\",\"revisitGroupModeText\":\"\",\"infoStatusText\":\"\",\"verifyStatusText\":\"\",\"gradeText\":\"\",\"revisitGroupTypeText\":\"\",\"userTypeText\":\"\",\"organProfessionText\":\"\u513f\u7ae5\u4fdd\u5065\u79d1\",\"jobTitleText\":\"\",\"educationText\":\"\",\"onlineText\":\"\",\"busyFlagText\":\"\",\"statusText\":\"\",\"organText\":\"\u901a\u5dde\u533a\u5987\u5e7c\u4fdd\u5065\u9662\",\"departmentText\":\"\",\"sourceText\":\"\",\"leaderText\":\"\",\"groupTypeText\":\"\",\"groupModeText\":\"\",\"appointSourceFlagText\":\"\",\"cloudAppointSourceFlagText\":\"\",\"currentOrganText\":\"\u901a\u5dde\u533a\u5987\u5e7c\u4fdd\u5065\u9662\"},\"displayIllSummaryBeforeAppoint\":false,\"patient\":{\"mpiId\":\"2c908223877b51a301879464282e5538\",\"patientName\":\"\u51af\u95fb\",\"patientSex\":\"2\",\"birthday\":\"1986-01-13 00:00:00\",\"age\":37,\"patientSexText\":\"\u5973\",\"patientTypeText\":\"\",\"educationText\":\"\",\"statusText\":\"\",\"authStatusText\":\"\",\"patientUserTypeText\":\"\",\"certificateTypeText\":\"\",\"guardianCertificateTypeText\":\"\",\"expectClinicPeriodTypeText\":\"\",\"homeAreaText\":\"\",\"countryText\":\"\",\"marryText\":\"\",\"residentText\":\"\",\"houseHoldText\":\"\",\"jobText\":\"\",\"nationText\":\"\",\"stateText\":\"\",\"birthPlaceText\":\"\"},\"systemDate\":\"2023-04-21 23:25:09\",\"payBtn\":false,\"preConsultBtn\":false,\"department\":{\"deptId\":5609,\"name\":\"\u8425\u517b\u8bc4\u4f30\u95e8\u8bca\",\"organIdText\":\"\",\"organProfessionText\":\"\",\"statusText\":\"\",\"professionCodeText\":\"\",\"parentOrganProfessionText\":\"\",\"doctorShowLogicText\":\"\",\"directorDoctorText\":\"\"},\"couponFlag\":false}}", "size":4197, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:09 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"4197"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"94"}, {"name":"X-Orange-Proxy-Latency", "value":"0"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:09.0324042+08:00", "cache":{}}, {"time":237, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53072;EgressPort:54061", "request":{"headersSize":1236, "postData":{"text":"[{\"eventId\":\"weixin_wx45b57abae69e92e6_eh.wx.health.person.UserAppointDetail_null_pv\",\"eventName\":\"\u6211\u7684\u9884\u7ea6\u5355\",\"time\":\"2023-04-21 23:25:09\",\"params\":\"\",\"location\":\"\",\"userId\":\"\",\"startTime\":\"2023-04-21 23:23:15\"}]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"218"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"5eWCwtvYdNEuei+ClVnVZNF1ehoq43DxZO4C+8mXlmY="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090709380133"}, {"name":"X-Ca-Timestamp", "value":"1682090709380"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"saveBuriedPoint"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"WKqwSh6SMyV53nxmeeIAgw=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"bus.buriedPointService"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":218, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":104, "receive":0, "wait":86, "dns":0, "send":0, "connect":151}, "response":{"headersSize":360, "bodySize":32, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":-20, "text":"{\"code\":200}", "size":12, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:09 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"32"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"4"}, {"name":"X-Orange-Proxy-Latency", "value":"1"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:09.0584253+08:00", "cache":{}}, {"time":61, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53060;EgressPort:54056", "request":{"headersSize":1236, "postData":{"text":"[{\"eventId\":\"weixin_wx45b57abae69e92e6_eh.wx.health.doctor.AppointApply_null_sw\",\"eventName\":\"WECHAT_EMPTY_TITLE\",\"time\":\"2023-04-21 23:25:09\",\"params\":\"\",\"location\":\"\",\"userId\":\"\",\"startTime\":\"2023-04-21 23:23:15\",\"fromUrl\":\"eh.wx.health.doctor.AppointApply\",\"fromUrlTitle\":\"\u9884\u7ea6\u6302\u53f7\u7533\u8bf7\",\"inTime\":\"2023-04-21 23:25:04\",\"toTime\":\"2023-04-21 23:25:09\",\"times\":4906,\"toUrl\":\"eh.wx.health.person.UserAppointDetail\",\"toUrlTitle\":\"\u6211\u7684\u9884\u7ea6\u5355\",\"back\":false}]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"464"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"qNgBtAG/21X9sceDkOCXo9E3NKwHyHrWKwioyHBjVkk="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090709381134"}, {"name":"X-Ca-Timestamp", "value":"1682090709381"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"saveBuriedPoint"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"kpsRSSwnQ+mhf976GZXm9w=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"bus.buriedPointService"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":464, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":0, "receive":0, "wait":61, "dns":0, "send":0, "connect":0}, "response":{"headersSize":360, "bodySize":32, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":-20, "text":"{\"code\":200}", "size":12, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:09 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"32"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"7"}, {"name":"X-Orange-Proxy-Latency", "value":"0"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:09.1034995+08:00", "cache":{}}, {"time":73, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53064;EgressPort:54060", "request":{"headersSize":1239, "postData":{"text":"[1000668]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"9"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"/cvX6Saj+j4cdpVl5BwlQjdBt1rXIzu6Vug0rQHpTbA="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090709718135"}, {"name":"X-Ca-Timestamp", "value":"1682090709718"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"getOrganConfig"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"0al7IXjlOiVrbdSjtoGx8g=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"appoint.appointConfigService"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":9, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":0, "receive":1, "wait":72, "dns":0, "send":0, "connect":0}, "response":{"headersSize":363, "bodySize":3879, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":4582, "text":"{\"code\":200,\"body\":{\"payAhead\":-2,\"immediateOutOfPayRangeTip\":\"\u4e0d\u5728\u533b\u9662\u6709\u6548\u652f\u4ed8\u8303\u56f4\u5185\uff0c\u8bf7\u5728\u533b\u9662\u8303\u56f4\uff082000\u7c73\uff09\u5185\u8fdb\u884c\u652f\u4ed8~\",\"supportSelfAndMedicalChooseCardTypes\":[],\"MedicalInsuranceSettleName\":\"\u533b\u4fdd\",\"coronavirusAssessNickname\":\"\u75c5\u5b66\u8c03\u67e5\",\"enableDrugAdd\":true,\"displayAppointBookFull\":true,\"manualAddHeathCard\":true,\"appointmentConfirmationDoc\":\"\u82e5\u957f\u65f6\u95f4\u672a\u53cd\u5e94\uff0c\u8bf7\u4e0b\u62c9\u5237\u65b0\",\"AppointToCallList\":false,\"jfGroupMode\":0,\"MedCardAppointToPaymentTimeout\":false,\"showAppointStatus\":false,\"doctorScheduleSupport\":true,\"doctorListShowContent\":[\"1\"],\"supportAppointZeroAutoPay\":false,\"outOfPayRangeTip\":\"\u4e0d\u5728\u533b\u9662\u6709\u6548\u652f\u4ed8\u8303\u56f4\u5185\uff0c\u8bf7\u5728\u533b\u9662\u8303\u56f4\uff082000\u7c73\uff09\u5185\u8fdb\u884c\u652f\u4ed8~\",\"maintenanceTimeControl\":false,\"appointConsultPrice\":-1.0,\"assayBeforeDoctorDeparts\":[\"2030-1\",\"5018\"],\"waitingTimeText\":\"\u5019\u8bca\u65f6\u95f4\",\"serviceChargeDesc\":\"\u6302\u53f7\u8d39\",\"showClinicAfterDays\":false,\"organTempId\":1,\"validateHealthSystem\":false,\"canReport\":\"0\",\"MedicalInsuranceTip\":\"\u6e29\u99a8\u63d0\u793a:\u8bf7\u518d\u6b21\u786e\u8ba4\u60a8\u76ee\u524d\u4f7f\u7528\u7684\u662f\u81ea\u8d39\u5361\uff0c \u76ee\u524d\u4ec5\u652f\u6301\u81ea\u8d39\u60a3\u8005\u8fdb\u884c\u7ebf\u4e0a\u652f\u4ed8\uff0c \u533b\u4fdd\u60a3\u8005\u8bf7\u5230\u4eba\u5de5\u7a97\u53e3\u6216\u8005\u81ea\u52a9\u673a\u529e\u7406\u3002\",\"ReconfirmAppointApply\":false,\"medicalNeedNoticeStyle\":[\"\u6211\u77e5\u9053\u4e86\"],\"organname\":\"\u901a\u5dde\u533a\u5987\u5e7c\u4fdd\u5065\u9662\",\"recipeCreamPrice\":-1.00,\"personalAccountNickname\":\"\u4e2a\u4eba\u8d26\u6237\u652f\u4ed8\",\"canRegisterTodayAppoint\":true,\"diagnosisCenterFlag\":false,\"canImage\":0,\"selectOrderNumWithScheduleTimeId\":false,\"applyZeroPayFlag\":false,\"notifyParty\":[],\"appointTodayVerifyRealName\":false,\"appointSimpleProcess\":false,\"organHealthCardSupport\":\"1\",\"CardNameShow\":true,\"isForcedPay\":false,\"HisWorkType\":false,\"appointHisDown\":false,\"consultDirect\":[],\"olderShowDialingEntry\":false,\"autoFillGoodAtHeading\":false,\"refundApplyText\":\"\u60a8\u786e\u8ba4\u8981\u53d1\u8d77\u53d6\u6d88\u9884\u7ea6\u5e76\u9000\u8d39\u7533\u8bf7\u5417\uff1f\u5ba1\u6838\u6210\u529f\u540e\uff0c\u9000\u6b3e\u5c06\u57281-3\u4e2a\u5de5\u4f5c\u65e5\u539f\u8def\u9000\u56de\uff01\",\"supportIntellijCloudAppoint\":false,\"payHisDown\":false,\"showPatientType\":true,\"AppointRecordFixedDisplayNumber\":[\"0\",\"1\"],\"appointDetailMzCardDisplay\":2,\"supportPointMedical\":[],\"showReAppointButton\":false,\"coronavirusAssessPosition\":[],\"supportImage\":0,\"adultSupport\":true,\"medfilingenable\":0,\"deptListDisplayHistoryDoctor\":false,\"wxConfigId\":23,\"payTime\":0,\"enableDrugSync\":true,\"appointNeedVerificationCode\":false,\"appointDoctorDescription\":\"1\",\"registerDescriptionText\":\"<p>\u6302\u53f7\u8bf4\u660e\uff1a</p><p>1\u3001\u5f53\u5929\u6302\u53f7\u5fc5\u987b\u652f\u4ed8</p><p>2\u3001\u5728\u7ebf\u652f\u4ed8\u6682\u4e0d\u652f\u6301\u533b\u4fdd\u652f\u4ed8</p>\",\"validateMobile\":false,\"outRuralInsurancePay\":false,\"isBandCardNeedPhoneNumber\":false,\"drugDataRange\":1,\"signtohis\":0,\"accountFlag\":0,\"canRegisterAppoint\":1,\"selfFinancingNickname\":\"\u81ea\u8d1f\u91d1\u989d\",\"doctorSortLikeTypeText\":\"\u9ed8\u8ba4\",\"appointNumFlag\":false,\"GetAntForestEnergy\":true,\"cancelBeforeTreatment\":true,\"assessSkipAppointApply\":false,\"selectSourceWhenAppoint\":true,\"organDefaultPatient\":1,\"AppointSimpleShowSpecificDesc\":false,\"showOutPatiOrderFlag\":false,\"recipeConsultPrice\":-1.0,\"appointApplyText\":\"\u9884\u7ea6\u7533\u8bf7\u5df2\u63d0\u4ea4\uff0c\u656c\u8bf7\u7559\u610f!\",\"detailsPageAbnormalTips\":\"<p style=\\\"margin-bottom: 0px; text-rendering: optimizelegibility; font-feature-settings: &quot;kern&quot;; font-kerning: normal; color: rgb(51, 51, 51); font-family: PingFangSC-Regular, &quot;PingFang SC&quot;;\\\">\u5c0a\u656c\u7684\u60a3\u8005\uff1a\u6839\u636e\u56fd\u5bb6\u75ab\u60c5\u9632\u63a7\u8981\u6c42\uff0c\u5f53\u60a8\u63d0\u4f9b\u4fe1\u606f\u5177\u6709\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5,\u6682\u65f6\u65e0\u6cd5\u4f7f\u7528\u9884\u7ea6\u6302\u53f7\u529f\u80fd\u60c5\u51b51\uff1a\u5177\u6709\u53d1\u70ed\u75c7\u72b6\uff0c\u5efa\u8bae\u60a8\u5230\u5b9a\u70b9\u533b\u9662\u53d1\u70ed\u95e8\u8bca\u5c31\u8bca\uff1b\u60c5\u51b52\uff1a\u5177\u6709\u98ce\u9669\u4eba\u7fa4\u63a5\u89e6\u53f2\uff0c\u5efa\u8bae\u60a8\u5148\u62a5\u5907\u5c45\u4f4f\u5730\u6240\u5728\u793e\u533a\uff0c\u8bf7\u52ff\u81ea\u884c\u5c31\u8bca\u3002</p><p style=\\\"margin-bottom: 0px; text-rendering: optimizelegibility; font-feature-settings: &quot;kern&quot;; font-kerning: normal; color: rgb(51, 51, 51); font-family: PingFangSC-Regular, &quot;PingFang SC&quot;;\\\">\u611f\u8c22\u60a8\u5bf9\u75ab\u60c5\u9632\u63a7\u5de5\u4f5c\u7684\u7406\u89e3\u548c\u652f\u6301\u3002</p>\",\"onLineConsultPrice\":-1.0,\"specialNickname\":\"\u4f18\u60e0\",\"showExtraInfo\":true,\"organStyleOfDepartmentsView\":[\"empty\"],\"enableDrugDelete\":true,\"GetCardInfoByPatient\":false,\"verifyPhysicalsMobile\":true,\"organid\":1000668,\"scheduleDescLabel\":\"\u4e13\u75c5\u540d\u79f0\",\"signingAhead\":8,\"hisStatus\":1,\"serviceChargeRemark\":\"(\u6302\u53f7\u8d39\u7531\u533b\u9662\u6536\u53d6)\",\"appointOfflinePayOnline\":false,\"unSupportAppointElecColor\":[\"2\",\"3\"],\"showScheduleWorkTimeTypeName\":true,\"showAppointPayInfo\":false,\"organAppointTipShowType\":\"1\",\"displayMedicalCare\":[\"false\"],\"callNumSupportViewInfo\":false,\"coronavirusAssessValidPeriod\":24,\"callNum\":1,\"showConsultButton\":false,\"displayMultiDepartsSources\":true,\"preContract\":false,\"appointAutoPay\":[],\"recipeDecoctionPrice\":-1.00,\"zeroDisplay\":[\"0\u5143\"],\"existOrgan\":1,\"toastCancelReason\":false,\"crossDepartWarnInfo\":true,\"childrenAge\":0,\"otherReliefNicknames\":\"\u5176\u4ed6\u51cf\u514d\",\"supportInsuranceCardSelfPay\":false,\"id\":54,\"appointSuccessTip\":\"\u8bf7\u51c6\u65f6\u4e8e\u5c31\u8bca\u5f53\u5929\u524d\u5f80\u533b\u9662\u95e8\u8bca\u5c31\u8bca\",\"childWithIdSupport\":1,\"displayRemainderSource\":true,\"supportPatientType\":[\"adult\",\"child\"],\"supportAppointRecharge\":false,\"payOnLine\":false,\"DivideTime\":\"12:00\",\"appointInfoDisplaySeconds\":0,\"organId\":1000668,\"canCheckInDistinceRange\":-1,\"appointTimeForbiddenNotice\":false,\"canReportText\":\"\u4e0d\u9700\u7ed1\u5b9a(\u8eab\u4efd\u8bc1\u67e5\u8be2)\",\"isOpenReport\":\"0\",\"enableSecondsign\":true,\"refreshCardFromHis\":false,\"ForcePayTime\":30,\"registerTimeRule\":[\"1\",\"2\"],\"enableReportNotice\":false,\"displayDeptSpecIll\":false,\"hisAppointShowCancelBtn\":true,\"maintenanceStartTime\":\"00:00\",\"hiddenNoCardOption\":false,\"deptListDiseaseSearchEntrance\":false,\"hiddenPrePayForLiveHospital\":false,\"supportMedInsuranceCardBus\":[],\"haveAppointSource\":false,\"deptSearchContent\":0,\"departmentDisplaySelection\":\"1\",\"totalNicknames\":\"\u5408\u8ba1\",\"supportAppointTodayWeiNingPay\":false,\"canSign\":false,\"orderAmountNickname\":\"\u8ba2\u5355\u91d1\u989d\",\"appointApplySuccessText\":\"\u8bf7\u51c6\u65f6\u4e8e\u5c31\u8bca\u5f53\u5929\u524d\u5f80\u533b\u9662\u95e8\u8bca\u5c31\u8bca\u3002\",\"displayIllSummaryBeforeAppoint\":false,\"callNumDeptEntrance\":false,\"showExpertInAppointDoctorList\":false,\"AppointSimpleShowCommonSourceLevel\":false,\"OfflineAppointPayCancel\":true,\"showDeptInfoOnAppointDocList\":false,\"childWithoutIdSupport\":0,\"appointenable\":1,\"healthCardInstructions\":\"\u6b64\u7801\u53ef\u7528\u4e8e\u5c31\u8bca\u3001\u9886\u53d6\u836f\u54c1\u3001\u6253\u5370\u62a5\u544a\u7b49\u573a\u666f\",\"displayLeftSourceNo\":false,\"doctorTitleFlag\":false,\"appointSourceDisplayRule\":[\"0\"],\"submitAppointTitle\":\"\u9884\u7ea6\u6302\u53f7\u7533\u8bf7\",\"oneTomany\":false,\"listAndDetailDixedDisplayNumber\":false,\"hideAllOnSchedulePage\":false,\"transferenable\":1,\"RealTimeSchedulingMode\":true,\"sourceFlag\":1,\"appointVerifyRealName\":false,\"appointTimeRule\":[\"1\",\"3\"],\"appointSupportVoucher\":false,\"tohis\":0,\"showHisSourceLevelText\":false,\"AppointSupportStopCar\":false,\"dockingMode\":1,\"appDomainId\":\"his-pub-service\",\"cancelPay\":0,\"healthCardNeedVerify\":false,\"supportAppointWeiNingPay\":false,\"healthcardHisDown\":false,\"rpcUrl\":\"\",\"appointTimeConfigRecordTypeByWorkDate\":false,\"canAppointText\":\"\u4e0d\u9700\u7ed1\u5b9a(\u8eab\u4efd\u8bc1\u67e5\u8be2)\",\"onlineReferralEntranceFlag\":false,\"cloudClinicNeedToHis\":0,\"appointSourceGroupShow\":\"blockGroup\",\"diagnosisTestPayment\":true,\"reportHisDown\":false,\"maintenanceEndTime\":\"06:00\",\"StopAppointForSometimes\":false,\"medicalInsurancePaymentName\":\"\u533b\u4fdd\u652f\u4ed8\",\"AppointDetailShowSmallTitle\":true,\"RegisterToAppoint\":false,\"openPayFlag\":\"false\",\"nucleinWindow\":false,\"docListPageSelectionCalendar\":false,\"SpotTimeModifyStartTime\":false,\"appointDescriptionText\":\"<p>\u9884\u7ea6\u8bf4\u660e\uff1a</p><p>1\u3001\u5982\u672a\u62a2\u5230\u60a8\u9884\u7ea6\u7684\u53f7\u6e90\uff0c\u5c06\u81ea\u52a8\u4e3a\u60a8\u62a2\u4e4b\u540e\u7684\u53f7\u6e90</p><p>2\u3001\u5728\u7ebf\u652f\u4ed8\u6682\u4e0d\u652f\u6301\u533b\u4fdd\u652f\u4ed8</p><p>3\u3001\u8fd1\u671f\u5c31\u8bca\u9ad8\u5cf0\uff0c\u4e3a\u51cf\u5c11\u6392\u961f\u7b49\u5019\u65f6\u95f4\uff0c\u513f\u79d1\u65e5\u95f4\u95e8\u8bca\u53d6\u6d88\u539f\u9884\u7ea6\u53f7\u5e8f\uff0c\u6309\u7167\u626b\u7801\u7b7e\u5230\u987a\u5e8f\u5c31\u8bca</p><p>4\u3001\u76ee\u524d\u4e0d\u652f\u6301\u4f53\u68c0\u5361\u53f7\u8fdb\u884c\u95e8\u8bca\u53f7\u6e90\u9884\u7ea6</p>\",\"appointDetailHealthcardDisplay\":true,\"regularTime\":\"02:01:00\",\"showRechargeRecordFlag\":false,\"canFile\":0,\"displayAppointTodayStartTimePage\":true,\"canAppoint\":\"0\",\"jfPayMode\":0,\"electronicInvoiceSwitch\":[\"0\"],\"priceForRecipeRegister\":0.00,\"AppointDocListShowScheduleDesc\":[\"scheduleList\"],\"openFunduscope\":false,\"sendStopAppointMsg\":true,\"displaySourceUsedDoctor\":true,\"doctorSortLikeType\":0,\"HaveOrderNum\":true,\"professorConsultPrice\":-1.0,\"enableDrugSyncArtificial\":true,\"appointSourceStartTimeShowType\":[\"timeperiod\"],\"MedicalInsuranceWindow\":false,\"invoiceEntrance\":false,\"showCallNumPdrs\":true,\"patientgetenable\":0,\"MedicalInsuranceNoCardPay\":false,\"RealNameAuthenticationEffectiveTime\":0,\"isolationFlag\":0,\"FromProfessionsToDoctors\":false,\"sourcereal\":1,\"clientFloatingLayerStyle\":false,\"drugDataSource\":\"1\"}}", "size":8461, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:09 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"3879"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"10"}, {"name":"X-Orange-Proxy-Latency", "value":"0"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:09.3770396+08:00", "cache":{}}, {"time":67, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53072;EgressPort:54061", "request":{"headersSize":1232, "postData":{"text":"[]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"2"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"BJtBUzZzcLx1Eb8VPkz+OCkoNiL8Oxnon5gBOA7jo64="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090709719136"}, {"name":"X-Ca-Timestamp", "value":"1682090709719"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"getAllClientConfigs"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"11FxOYiYfpMxmANj4kGJzg=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"eh.unLoginSevice"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":2, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":0, "receive":1, "wait":66, "dns":0, "send":0, "connect":0}, "response":{"headersSize":362, "bodySize":5017, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":5949, "text":"{\"code\":200,\"body\":{\"nursPhoneConsult\":false,\"consultHomePageTheMostOfDepartment\":[\"6\"],\"FastConsultBanner\":\"5e7355c7a4a7337732445d4a\",\"medicalInsuranceCheckoutType\":false,\"isShowIDQrCode\":true,\"enableEmrPdfLoad\":false,\"zjsAliMedicalBusType\":[],\"searchPageSelectedHospitalBusType\":[],\"borderBetweenAdultandChild\":18,\"doctorScheduleSubtitle\":\"\uff08\u9009\u62e9\u6392\u73ed\u65f6\u95f4\u5373\u53ef\u9884\u7ea6\u6302\u53f7\uff09\",\"addPatientFieldRange\":[\"requiredFieldsAndNonRequiredFields\"],\"notConsilientMarkedWords\":\"\u5c31\u8bca\u4eba\u59d3\u540d\u4e0e\u533b\u9662\u6863\u6848\u9884\u7559\u59d3\u540d\u4e0d\u4e00\u81f4\u3002\u5982\u679c\u586b\u5199\u9519\u8bef\uff0c\u8bf7\u5220\u9664\u540e\u518d\u6dfb\u52a0\uff0c\u5982\u679c\u533b\u9662\u6863\u6848\u9884\u7559\u9519\u8bef\uff0c\u8bf7\u5230\u9662\u5185\u7a97\u53e3\u4fee\u6539\",\"DHconsultHelText\":\"\u7535\u8bdd\u54a8\u8be2\",\"medicalInsuranceFilingChannel\":\"weining\",\"guardianShowText\":\"\u966a\u8bca\u4eba\",\"notEnableMatchBusType\":[],\"applyWholeSomeCardWay\":\"manualInputAndUploadIdCard\",\"patientOtherInfo\":[\"address\",\"patientType\",\"photo\",\"job\"],\"patientShowMedicalType\":true,\"registrationTopPrompt\":\"\u6839\u636e\u76f8\u5173\u5236\u5ea6\u89c4\u5b9a\uff0c\u4e92\u8054\u7f51\u5c31\u533b\u9700\u8981\u586b\u5199\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\",\"healthCardFillInMode\":[\"manual\"],\"revisitSortKeyList\":[\"1\",\"2\",\"3\",\"4\"],\"addPatientDisplayPromptForFiling\":true,\"doctorHomepageDisplayContent\":[\"1\",\"2\"],\"myDoctorConsultPageIsShow\":false,\"revisitGuideType\":[],\"showDocCertImage\":true,\"supportChildCard\":true,\"isSwitchNewPatientAssembly\":true,\"helpCenterConsultFlag\":0,\"showVIPMarkingPurchaseEntry\":false,\"showAllOrganEmr\":true,\"showCardType\":[\"1\",\"2\"],\"medicalInsurancePaymentTips\":\"\u672c\u4eba\u5c31\u8bca\u4eba\u51fa\u793a\u7535\u5b50\u533b\u4fdd\u51ed\u8bc1\uff0c\u626b\u7801\u4ed8\u6b3e\",\"addPatientByAuthentication\":false,\"selfDiagnosisUrls\":[\"none\"],\"appleLoginFlag\":false,\"vaild_certificate_tohis\":false,\"gotoQuestionUrls\":[\"none\"],\"ifWNSelectOrgan\":true,\"onetouchAuthorize\":false,\"addRestrictionsForPatient\":\"none\",\"checkChildrenNameEqualsGuardianName\":false,\"socialCardConfig\":[\"certificateFlag\"],\"wholesomeDefaultButtonShowFlag\":false,\"verifiedSwitch\":\"0\",\"noDisPlayInpatient\":false,\"shouldHideType\":[],\"helpCenterSearchFlag\":1,\"systemUpdateAndMaintenancePage\":false,\"isShowHospitalNotice\":true,\"tencentVersion\":\"1\",\"homePageSwitchPatientMode\":[\"choosePatient\"],\"RecommendForDoctorIndex\":false,\"showAgreement\":false,\"revisitFilterDeploy\":[\"1\",\"2\"],\"healthCardEnterAddress\":true,\"consultApplyNeedIdcard\":false,\"showRecommendAreaFlag\":true,\"focusOnWXPushMsg\":true,\"medicalInsurancePaymentShow\":false,\"helpCenterToolName\":\"\u5de5\u5177\u4e0e\u670d\u52a1\",\"cardToConfigure\":[\"base\"],\"technicalSupport\":\"\u7eb3\u91cc\u5065\u5eb7\u63d0\u4f9b\u6280\u672f\u652f\u6301\",\"registrationThirdWay\":[\"0\"],\"wholesomeUploadBusType\":[\"appoint\",\"outpatient\",\"report\",\"inhospital\",\"revisit\"],\"customizedRegister\":\"0\",\"introduceTextForNC\":\"\u533b\u751f\u5f53\u65e5\u5728\u73ed\uff0c\u9700\u6839\u636e\u95e8\u8bca\u53f7\u6e90\u8fdb\u884c\u9884\u7ea6\uff0c\u5f53\u65e5\u5230\u53f7\u540e\u53ef\u4e0e\u533b\u751f\u89c6\u9891\u901a\u8bdd\",\"bandCardWindowDisplay\":true,\"guidePatientAuthenticationLink\":[\"afterAddingPatient\"],\"validPeriodOfRealNameAuth\":0,\"showCandidateList\":false,\"recipeQueryPeriod\":\"default\",\"appointSearchDocListShowSourceLevel\":false,\"isAddrareaCommunity\":false,\"selfPayCardName\":\"\u81ea\u8d39\u5361\",\"hideNationalFilter\":false,\"qrCodeMode\":\"\u5fae\u4fe1\u516c\u4f17\u53f7\u5e73\u53f0-\u5b57\u7b26\u4e32\",\"verifiedUsersOfChildMode\":\"1\",\"isShowSelectedHospitalForAdvice\":false,\"hospitalConfigText\":\"\u8bf7\u9009\u62e9\u533b\u9662\",\"RevisitDoctorListSkipUrl\":\"1\",\"registrationFiledConfig\":[\"patientName#\u59d3\u540d\",\"mobile#\u624b\u673a\u53f7\u7801\"],\"selfServiceJumpWay\":false,\"isOpenReportMenuConfig\":true,\"isShowCustomerServicePhone\":true,\"isShowTeamRecommendations\":true,\"supportDeleteHealthCard\":false,\"networkclinicMiniAppkey\":\"wx38196eafdb50b7b2\",\"addAPatientBindingCardType\":[],\"reportQueryPeriod\":[\"onemonth\",\"threemonth\",\"sixmonth\",\"oneyear\",\"twoyear\",\"searchForTime\"],\"downloadElectronicHealthCard\":false,\"addPatientForceAuthSwitch\":false,\"doctorCertDisplayFlag\":[\"1\"],\"canDelSelf\":true,\"visitorTypeForQueryHisInfo\":[],\"jsjktAppRevisitModuleChange\":false,\"hisMobileCheck\":false,\"AliAppletsPushMessge\":false,\"requiredIDCardFor90Days\":false,\"isViewRevisitSchedule\":false,\"whetherToShowStarRatings\":true,\"supportOtherCardIdType\":[\"passportFlag\",\"HKAndMacaoResidentsFlag\",\"residencePermitOfHMT\",\"ForeignerPermanentID\",\"EntryAndExitPass\"],\"whetherToAdoptInstitutionalRanking\":false,\"showStartEvaluation\":false,\"cardPackage\":false,\"addPatientCheckMobile\":false,\"displayAccordingAppointOrganIdSortList\":false,\"cancelAccountSwitch\":true,\"helpCenterCommonQuestionsName\":\"\u5e38\u89c1\u95ee\u9898\",\"WeightsProfessorConsultDoctorList\":false,\"cancelCourse\":false,\"ShowRecommendedDoctors\":true,\"verifiedUsersOfChild\":false,\"displayDefaultDocumentTypeForChild\":1,\"doctorMultihospitalScheduling\":false,\"idCardIsRequiredOfChild\":false,\"buttonTextForNC\":\"\u9884\u7ea6\u89c6\u9891\u95e8\u8bca\",\"SchedulingHavaPersonalChoice\":true,\"socialCard\":false,\"ocrProviders\":\"none\",\"createHisCardButtonText\":\"\u65b0\u5efa\u9662\u5185\u5c31\u8bca\u5361\",\"healthCardUnbindingMode\":\"unbindHealthCard\",\"newbornCardFlag\":false,\"registerWholesomeEnterInfo\":[\"address\",\"nation\",\"nationality\"],\"scanPayNeedLogin\":false,\"ChronicDiseaseDoctorPopSwitch\":false,\"WeightsDoctorList\":false,\"patientCard\":true,\"healthCardDetailsPageStyle\":\"style\",\"borderBetweenNewbornAndChild\":0,\"recommendDoctorFlag\":false,\"myRecipeShowItem\":[\"onlineRecipe\"],\"moreOrganSyncSubscribe\":false,\"qrCodeType\":\"1\",\"emrAuthorization\":false,\"appointSearchShowBusinessLabel\":false,\"consultMiniAppkey\":\"wx38196eafdb50b7b2\",\"invalidPatientMessage\":\"\u7cfb\u7edf\u6821\u9a8c\uff0c\u8be5\u5c31\u8bca\u4eba\u7684\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u4e0d\u7b26\u5408\uff0c\u5df2\u5931\u6548\uff0c\u540e\u7eed\u65e0\u6cd5\u53d1\u8d77\u4e1a\u52a1\uff0c\u8bf7\u5220\u9664\u672c\u5c31\u8bca\u4eba\uff0c\u5e76\u65b0\u5efa\u5c31\u8bca\u4eba\uff0c\u5220\u9664\u540e\u539f\u8ba2\u5355\u8bb0\u5f55\u4e0d\u53ef\u89c1\",\"forbidDeleteDays\":0,\"medicareCardDescription\":\"\u5df2\u6709\u9662\u5185\u533b\u4fdd\u5361\u5c06\u4e3a\u4f60\u5173\u8054\u7ed1\u5b9a\uff0c\u521d\u8bca\u7528\u6237\u9700\u8981\u5230\u9662\u5185\u7a97\u53e3\u521b\u5efa\u533b\u4fdd\u5361\",\"topLimitOfPatient\":6,\"adviceRegulationBussType\":[],\"forceSignFlag\":false,\"helpCenterToolFlag\":1,\"thirdPartySubscribe\":false,\"registrationVerifyMode\":\"mobileVerify\",\"IMCompletedBottomButton\":[],\"consultHasDiscount\":false,\"isSupportMedical\":false,\"healthCardBuilderSource\":\"1\",\"patientAddTopText\":\"\u9690\u79c1\u4fdd\u62a4\uff0c\u4ee5\u4e0b\u4fe1\u606f\u4ec5\u5bf9\u63a5\u8bca\u533b\u751f\u53ef\u89c1\",\"FastConsultCountSwitch\":false,\"findRecipeListType\":[\"onLine\"],\"servicePhone\":\"400-613-8688\",\"addPatientSubscribe\":false,\"showManageOrganEmr\":true,\"pageGrayFlag\":false,\"patientGuideModel\":\"1\",\"homepageReferralGuidance\":false,\"TWconsultHelText\":\"\u56fe\u6587\u54a8\u8be2\",\"adviceRegulationOrderShowMessage\":[\"item1\"],\"patientAgeMode\":1,\"returnVisitRemindPat\":true,\"AppointOrganListBig\":false,\"revisitFilterManage\":[\"1\",\"2\",\"3\"],\"addressDefaultLevel\":\"3\",\"selectTheContentOfThePopUpBox\":\"1\",\"isHideShowService\":[],\"businessJumpPayment\":[\"paymentMerge\"],\"invoiceNoQueryReport\":false,\"selfPayCardDescription\":\"\u5df2\u6709\u9662\u5185\u81ea\u8d39\u5361\u5c06\u4e3a\u4f60\u5173\u8054\u7ed1\u5b9a\uff0c\u521d\u8bca\u7528\u6237\u53ef\u5728\u7ebf\u521b\u5efa\u81ea\u8d39\u5361\",\"healthCardValidateMobile\":false,\"supportPatientTypeForClient\":[\"child\",\"adult\"],\"NeedChoosePatient\":[],\"IntelligentGuidanceMode\":[\"free\"],\"NCoVFastConsultSwitch\":false,\"showRecommendDoctorsOnDepartmentPage\":false,\"doctorListShowEmployDepart\":false,\"ngariQrcode\":false,\"showAttentionDoctor\":false,\"wholesomeWhiteList\":false,\"toHandlePatientMessage\":\"\u7cfb\u7edf\u6821\u9a8c\uff0c\u8be5\u5c31\u8bca\u4eba\u7684\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u4e0d\u5339\u914d\uff0c\u8bf7\u53ca\u65f6\u5904\u7406\uff0c\u540e\u7eed\u5c06\u65e0\u6cd5\u4f7f\u7528\u8be5\u5c31\u8bca\u4eba\uff0c\u5904\u7406\u65b9\u5f0f\uff1a\u8bf7\u5220\u9664\u672c\u5c31\u8bca\u4eba\uff0c\u5e76\u65b0\u5efa\u5c31\u8bca\u4eba\uff0c\u5220\u9664\u540e\u539f\u8ba2\u5355\u8bb0\u5f55\u4e0d\u53ef\u89c1\",\"childApplyMedicalCard\":false,\"protocalKey\":\"https://yypt.ngarihealth.com/ngaridoc/health_agreement/\",\"healthCardShowText\":\"\u5c31\u8bca\u5361\u53f7\",\"consultIMChannelPatientFunction\":[\"upLoadReport\",\"appoint\"],\"consultEntrance\":true,\"nursPicConsult\":false,\"matchIsSelectAppointOrgan\":false,\"supportUsersToUnbind\":false,\"defaultCardProp\":\"manual\",\"openMedAgent\":false,\"healthCardApplyPageStyle\":[\"style1\"],\"attendantPerfectionOfBusType\":[\"7\"],\"addPatientIsPublic\":false,\"revisitHistoryDoctorListFlag\":false,\"addCardBindingType\":[\"ownExpenseCard\",\"medicalInsuranceCard\",\"electronicMedicalInsuranceCard\"],\"supportWeiNingPaySwitch\":true,\"shouldCheckMedArchives\":false,\"doctorListOrgNameNewLines\":false,\"ConsultDepartmentOrderNum\":false,\"supportSINCard\":false,\"qrCodeCorrespondingField\":\"cardId\",\"cardDataUpload\":false,\"pre-settlement\":false,\"isPrivacyVisible\":true,\"registerWholesomeCertificateType\":[\"idCard\"],\"addPatientOCRSwitch\":false,\"revisitIsShowMyRevisitButton\":true,\"promptCopyOfHisNoMobile\":\"\u65e0\u6cd5\u7ed1\u5b9a\u5c31\u8bca\u4eba\u3002\u60a8\u7684\u5c31\u8bca\u5361\u5728\u672c\u9662\u9884\u7559\u7535\u8bdd\u975e\u624b\u673a\u6216\u4e0e\u5f53\u524d\u53f7\u7801\u4e0d\u5339\u914d\u3002\u8bf7\u54a8\u8be2\u7ebf\u4e0a\u4eba\u5de5\u5ba2\u670d\u6216\u5e26\u6709\u6548\u8bc1\u4ef6\u5230\u4fbf\u6c11\u670d\u52a1\u4e2d\u5fc3\u4fee\u6539\u3002\",\"visitCardFieldDisplay\":true,\"electronicHealthCardDescription\":\"\u5df2\u7533\u9886\u5065\u5eb7\u5361\u5c06\u4e3a\u4f60\u5173\u8054\u7ed1\u5b9a\uff0c\u672a\u7533\u9886\u5065\u5eb7\u5361\u53ef\u5728\u7ebf\u7533\u9886\",\"isDisplayHomeBox\":true,\"patientAdressInputType\":\"1\",\"pageTextForNC\":\"\u7f51\u7edc\u89c6\u9891\u95e8\u8bca\",\"doctorScheduleMainTitle\":\"\u6392\u73ed\u4fe1\u606f\",\"switchCardName\":false,\"wholesomeUploadCardType\":[\"4\"],\"supportCancelWholesome\":false,\"switchMedicalInsuranceTypeDocument\":\"\u6162\u75c5\u60a3\u8005\uff08\u95e8\u7279\u4e00\u7c7b\uff09\u4ee5\u533b\u751f\u5f00\u5904\u65b9\u65f6\u9009\u62e9\u7684\u75c5\u79cd\u4e3a\u51c6\uff0c\u82e5\u533b\u751f\u6240\u9009\u75c5\u79cd\u4e0e\u533b\u4fdd\u5e73\u53f0\u4e0d\u4e00\u81f4\u6216\u672a\u9009\u75c5\u79cd\uff0c\u7cfb\u7edf\u5c06\u6309\u666e\u901a\u7edf\u7b79\u7ed3\u7b97\uff0c\u82e5\u5bf9\u533b\u4fdd\u62a5\u9500\u6bd4\u4f8b\u6709\u7591\u95ee\uff0c\u8bf7\u5230\u4eba\u5de5\u7a97\u53e3\u7ed3\u7b97\u3002\u7ebf\u4e0a\u6682\u4e0d\u652f\u6301\u95e8\u7279\u4e8c\u7c7b\u7684\u7ed3\u7b97\u3002\u8c22\u8c22\uff01\",\"cardModel\":\"1\",\"autoApplyHealthCard\":true,\"clientShowAppointFullDoctor\":false,\"shareBtnConfig\":true,\"styleOfDepartmentsView\":[\"list\"],\"descriptionTextForNC\":\"\u7f51\u7edc\u89c6\u9891\u95e8\u8bca\u64cd\u4f5c\u8bf4\u660e\uff1a\\r\\n\\r\\n1\u3001\u5230\u8fbe\u5c31\u8bca\u65f6\u95f4\u540e\uff0c\u533b\u751f\u4f1a\u5411\u60a8\u53d1\u9001\u89c6\u9891\u95e8\u8bca\u6d88\u606f\uff0c\u60a8\u9700\u901a\u8fc7\u516c\u4f17\u53f7\u6d88\u606f\u8df3\u8f6c\u81f3\u5c0f\u7a0b\u5e8f\uff0c\u53d1\u8d77\u89c6\u9891\u4ee5\u8fdb\u884c\u95e8\u8bca\u3002\",\"medicalSettlement\":false,\"adviceTitleAndButtonText\":\"\u610f\u89c1\u53cd\u9988\",\"AuthBeforeAddHealthCard\":false,\"separateNameCertificates\":[],\"payConfirmShowFee\":[\"medical\",\"cash\"],\"defaultVisitCardPriorityMechanism\":\"manualFirst\",\"createHisCardSwitch\":false,\"ConsultHomePageOrderListLink\":\"common\",\"registrationLoginPriorityMode\":\"2\",\"medicalCertificateDescription\":\"\u672c\u4eba\u6709\u5f53\u5730\u533b\u4fdd\uff0c\u53ef\u4ee5\u901a\u8fc7\u7535\u5b50\u533b\u4fdd\u51ed\u8bc1\u6388\u6743\u5728\u7ebf\u521b\u5efa\u533b\u4fdd\u5361\",\"assignOrganToHandleAdvice\":false,\"createHisPatientMode\":\"1\",\"supportCardRechargeSwitch\":true,\"CanBeBoundByUserNum\":0,\"doctorIndexScheduleDisplay\":2,\"XFconsultHelText\":\"\u5728\u7ebf\u590d\u8bca\",\"isGotoLangtong\":false,\"showPatientAddress\":true,\"consultRedirect\":[],\"nursingOrganList\":false,\"patientOtherInfoRequired\":[\"address\"],\"invoicesTips\":\"\u8bf7\u5728\u6d59\u91cc\u529eapp\u641c\u7d22\u201c\u7535\u5b50\u7968\u636e\u67e5\u9a8c\u201d\u67e5\u770b\u53d1\u7968\u9884\u89c8\",\"qrCodeColorFlag\":false,\"revisitChosePatientDoIndex\":false,\"revisitSortKeyListV2\":[\"1\",\"2\",\"3\",\"4\"],\"showSubscribeResult\":false,\"helpCenterCommonQuestionsFlag\":1,\"createHisCardAttention\":\"<p>\u63d0\u793a\uff1a\\r\\n</p><p>1\u3001\u65b0\u5efa\u6210\u529f\u540e\uff0c\u4f1a\u5728\u533b\u9662\u4e2d\u589e\u52a0\u4e00\u5f20\u5b9e\u540d\u5c31\u8bca\u5361\uff1b\\r\\n</p><p>2\u3001\u8bf7\u518d\u6b21\u786e\u8ba4\u5c31\u8bca\u4eba\u4fe1\u606f\uff1b\\r\\n</p><p>3\u3001\u82e5\u673a\u6784\u4e0d\u5b58\u5728\uff0c\u8bf4\u660e\u673a\u6784\u4e0d\u652f\u6301\u5728\u7ebf\u4e0a\u5efa\u5361\u3002</p>\",\"priorityCardTypeOnThePatientPage\":\"medicalCard\",\"provincialAndUrbanAddressDisplay\":true,\"supportWholeSomeCard\":false,\"addressHierarchy\":\"4\",\"callNumberModuleText\":\"\u6392\u961f\u53eb\u53f7\",\"callPreSettlement\":\"1\",\"medicalPayConfig\":false,\"mpiEventTrigger\":0,\"medicalCardDesensitization\":false,\"patientPageDisplayMode\":\"2021\",\"subscribeByHospital\":false,\"refreshCardToSetDefault\":false}}", "size":10966, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:09 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"5017"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"9"}, {"name":"X-Orange-Proxy-Latency", "value":"0"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:09.3780400+08:00", "cache":{}}, {"time":63, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53060;EgressPort:54056", "request":{"headersSize":1244, "postData":{"text":"[1000668,[\"healthCardInstructions\",\"appointAutoPay\",\"waitPayDescription\",\"refundFailDescription\",\"canCheckInDistinceRange\",\"callNumBeyondDistanceInfo\"]]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"152"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"OISgh6Sl4pdJpoMbHUPj4Hcw+/AKehuy6Q3NuQHqrZY="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090709719137"}, {"name":"X-Ca-Timestamp", "value":"1682090709719"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"findConfigurations"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"nOFqKgWlY6EmVUX3iluXzg=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"eh.configurationCenterUtils"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":152, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":0, "receive":0, "wait":63, "dns":0, "send":0, "connect":0}, "response":{"headersSize":362, "bodySize":415, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":59, "text":"{\"code\":200,\"body\":{\"waitPayDescription\":\"\u8bf7\u51c6\u65f6\u4e8e\u5c31\u8bca\u5f53\u5929\u524d\u5f80\u533b\u9662\u95e8\u8bca\u5c31\u8bca\u3002\",\"refundFailDescription\":\"\u5df2\u652f\u4ed8\u8d39\u7528\u53ef\u8054\u7cfb\u533b\u9662\u6216\u8005\u5ba2\u670d\u7535\u8bdd400-613-8688\",\"callNumBeyondDistanceInfo\":\"\u5f53\u524d\u6682\u4e0d\u80fd\u7b7e\u5230\uff0c\u8bf7\u5728\u533b\u9662\u8303\u56f4\u5185\u8fdb\u884c\u7b7e\u5230\u54e6\uff5e\u7b7e\u5230\u6210\u529f\u540e\u8fdb\u5165\u53eb\u53f7\u5bf9\u5217\uff0c\u53ef\u5728\u7ebf\u67e5\u770b\u53eb\u53f7\u3002\",\"appointAutoPay\":[],\"canCheckInDistinceRange\":-1,\"healthCardInstructions\":\"\u6b64\u7801\u53ef\u7528\u4e8e\u5c31\u8bca\u3001\u9886\u53d6\u836f\u54c1\u3001\u6253\u5370\u62a5\u544a\u7b49\u573a\u666f\"}}", "size":474, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:09 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"415"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"12"}, {"name":"X-Orange-Proxy-Latency", "value":"0"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:09.3790396+08:00", "cache":{}}, {"time":69, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53074;EgressPort:54055", "request":{"headersSize":1250, "postData":{"text":"[\"3127\",1000668]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"16"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"4NrTeBe9weabrx+TWpVu6OWmwtXeDAwcXuBngX80MqY="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090709720138"}, {"name":"X-Ca-Timestamp", "value":"1682090709720"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"getDoctorDeptInfo"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"eAyFTYQRfvm4C7Ibf3zdsg=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"appoint.requestAppointRecordService"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":16, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":0, "receive":0, "wait":69, "dns":0, "send":0, "connect":0}, "response":{"headersSize":361, "bodySize":91, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":-23, "text":"{\"code\":200,\"body\":[[\"\u8425\u517b\u8bc4\u4f30\u95e8\u8bca\",\"\u901a\u5dde\u5987\u5e7c\u4fdd\u5065\u9662\"]]}", "size":68, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:09 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"91"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"12"}, {"name":"X-Orange-Proxy-Latency", "value":"0"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:09.3790396+08:00", "cache":{}}, {"time":66, "serverIPAddress":"47.110.216.127", "connection":"ClientPort:53064;EgressPort:54060", "request":{"headersSize":1240, "postData":{"text":"[[{\"time\":\"2023-04-21 23:25:09\",\"organId\":\"wx45b57abae69e92e6\",\"appVersion\":2.9,\"deviceId\":\"21\",\"deviceType\":\"WINDOWS\",\"serviceModule\":\"\u9884\u7ea6\u6302\u53f7\u8be6\u60c5\",\"deviceNet\":\"wifi\",\"route\":\"weixin_eh.wx.health.portal.Portal_null_sw|weixin_eh.wx.health.doctFinder.Reservation_null_sw|weixin_eh.wx.health.doctFinder.DateSelectDoct_null_sw|weixin_eh.wx.health.select.SelectAppointAddr_null_sw|weixin_eh.wx.health.doctor.AppointApply_null_sw|\",\"eventId\":\"weixin_userappointdetail_null_sw\",\"eventName\":\"\u8be6\u60c5\u9875\",\"fromUrl\":\"eh.wx.health.doctor.AppointApply\",\"fromUrlTitle\":\"WECHAT_EMPTY_TITLE\",\"url\":\"eh.wx.health.person.UserAppointDetail\",\"urlTitle\":\"WECHAT_EMPTY_TITLE\",\"location\":\"\",\"userId\":\"\",\"startTime\":\"2023-04-21 23:23:15\"}]]", "mimeType":"application/json"}, "queryString":[], "headers":[{"name":"Host", "value":"weixin.ngarihealth.com"}, {"name":"Connection", "value":"keep-alive"}, {"name":"Content-Length", "value":"724"}, {"name":"Origin", "value":"https://weixin.ngarihealth.com"}, {"name":"X-Ca-Signature", "value":"al2whU6nljgvKwl3HTqXZ9PQqy7GNzKhTOk3v+k4hQk="}, {"name":"X-Ca-Nonce", "value":"6442aa638ddcd92bf5907d9a1682090711272139"}, {"name":"X-Ca-Timestamp", "value":"1682090711272"}, {"name":"User-Agent", "value":"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63030073)"}, {"name":"content-Type", "value":"application/json"}, {"name":"X-Service-Method", "value":"saveBuriedPointList"}, {"name":"X-Ca-Key", "value":"ngari-wx"}, {"name":"X-Content-MD5", "value":"x1WWxWv/geXp8UdK2tBxNQ=="}, {"name":"encoding", "value":"utf-8"}, {"name":"X-Service-Id", "value":"bus.buriedPointService"}, {"name":"Accept", "value":"*/*"}, {"name":"Cookie", "value":"client-id=114859471; isNewUser=false; api=WX; tk=b722a43d-5f91-4189-a5ae-f71c58e44d0c; acw_tc=2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}, {"name":"Sec-Fetch-Site", "value":"same-origin"}, {"name":"Sec-Fetch-Mode", "value":"cors"}, {"name":"Sec-Fetch-Dest", "value":"empty"}, {"name":"Referer", "value":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/index.html?module=appointHomePage&code=0019fqll2XdQ9b4iJNml2Dqo4009fqll&state=STATE"}, {"name":"Accept-Encoding", "value":"gzip, deflate, br"}, {"name":"Accept-Language", "value":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7"}], "bodySize":724, "url":"https://weixin.ngarihealth.com/weixin/wx/mp/wx45b57abae69e92e6/gateway", "cookies":[{"name":"client-id", "value":"114859471"}, {"name":"isNewUser", "value":"false"}, {"name":"api", "value":"WX"}, {"name":"tk", "value":"b722a43d-5f91-4189-a5ae-f71c58e44d0c"}, {"name":"acw_tc", "value":"2f61f27316820902718582068e57845d228f3850882b6bb11d8e6d5d9d0862"}], "method":"POST", "httpVersion":"HTTP/1.1"}, "timings":{"blocked":-1, "ssl":0, "receive":0, "wait":66, "dns":0, "send":0, "connect":0}, "response":{"headersSize":360, "bodySize":32, "statusText":"OK", "redirectURL":"", "status":200, "httpVersion":"HTTP/1.1", "cookies":[], "content":{"compression":-20, "text":"{\"code\":200}", "size":12, "mimeType":"application/json;charset=utf-8"}, "headers":[{"name":"Date", "value":"Fri, 21 Apr 2023 15:25:11 GMT"}, {"name":"Content-Type", "value":"application/json;charset=utf-8"}, {"name":"Content-Length", "value":"32"}, {"name":"Connection", "value":"keep-alive"}, {"name":"X-Coded-JSON-Message", "value":"true"}, {"name":"Content-Encoding", "value":"gzip"}, {"name":"Vary", "value":"Accept-Encoding"}, {"name":"Cache-Control", "value":"no-cache, no-store"}, {"name":"X-Orange-Upstream-Latency", "value":"4"}, {"name":"X-Orange-Proxy-Latency", "value":"0"}, {"name":"Strict-Transport-Security", "value":"max-age=31536000"}]}, "startedDateTime":"2023-04-21T23:25:10.9313705+08:00", "cache":{}}], "creator":{"name":"Fiddler", "comment":"https://fiddler2.com", "version":"5.0.20204.45441"}, "version":"1.2"}}
